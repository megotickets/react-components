"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[756],{70756:function(e,a,t){t.d(a,{offchainLookup:function(){return g},offchainLookupSignature:function(){return m}});var n=t(99261),s=t(90552),r=t(87806),o=t(55658);class c extends r.G{constructor({callbackSelector:e,cause:a,data:t,extraData:n,sender:s,urls:r}){var c;super(a.shortMessage||"An error occurred while fetching for an offchain result.",{cause:a,metaMessages:[...a.metaMessages||[],(null===(c=a.metaMessages)||void 0===c?void 0:c.length)?"":[],"Offchain Gateway Call:",r&&["  Gateway URL(s):",...r.map(e=>"    ".concat((0,o.G)(e)))],"  Sender: ".concat(s),"  Data: ".concat(t),"  Callback selector: ".concat(e),"  Extra data: ".concat(n)].flat(),name:"OffchainLookupError"})}}class i extends r.G{constructor({result:e,url:a}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:["Gateway URL: ".concat((0,o.G)(a)),"Response: ".concat((0,s.P)(e))],name:"OffchainLookupResponseMalformedError"})}}class u extends r.G{constructor({sender:e,to:a}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:["Contract address: ".concat(a),"OffchainLookup sender address: ".concat(e)],name:"OffchainLookupSenderMismatchError"})}}var d=t(73912),l=t(37066),f=t(46893),p=t(29503),h=t(86655),y=t(18782);let m="0x556f1830",w={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function g(e,a){let{blockNumber:t,blockTag:s,data:r,to:o}=a,{args:i}=(0,l.p)({data:r,abi:[w]}),[d,y,m,g,v]=i,{ccipRead:b}=e,G=b&&"function"==typeof(null==b?void 0:b.request)?b.request:k;try{if(!(0,p.E)(o,d))throw new u({sender:d,to:o});let a=await G({data:m,sender:d,urls:y}),{data:r}=await (0,n.R)(e,{blockNumber:t,blockTag:s,data:(0,h.zo)([g,(0,f.E)([{type:"bytes"},{type:"bytes"}],[a,v])]),to:o});return r}catch(e){throw new c({callbackSelector:g,cause:e,data:r,extraData:v,sender:d,urls:y})}}async function k(e){let{data:a,sender:t,urls:n}=e,r=Error("An unknown error occurred.");for(let e=0;e<n.length;e++){let c=n[e],u=c.includes("{data}")?"GET":"POST",l="POST"===u?{data:a,sender:t}:void 0,f="POST"===u?{"Content-Type":"application/json"}:{};try{var o;let e;let n=await fetch(c.replace("{sender}",t).replace("{data}",a),{body:JSON.stringify(l),headers:f,method:u});if(e=(null===(o=n.headers.get("Content-Type"))||void 0===o?void 0:o.startsWith("application/json"))?(await n.json()).data:await n.text(),!n.ok){r=new d.Gg({body:l,details:(null==e?void 0:e.error)?(0,s.P)(e.error):n.statusText,headers:n.headers,status:n.status,url:c});continue}if(!(0,y.v)(e)){r=new i({result:e,url:c});continue}return e}catch(e){r=new d.Gg({body:l,details:e.message,url:c})}}throw r}}}]);