(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6390],{14912:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(86175);function s(e,t,i){return void 0===t&&(t=new Uint8Array(2)),void 0===i&&(i=0),t[i+0]=e>>>8,t[i+1]=e>>>0,t}function n(e,t,i){return void 0===t&&(t=new Uint8Array(2)),void 0===i&&(i=0),t[i+0]=e>>>0,t[i+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function a(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function h(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,i){return void 0===t&&(t=new Uint8Array(4)),void 0===i&&(i=0),t[i+0]=e>>>24,t[i+1]=e>>>16,t[i+2]=e>>>8,t[i+3]=e>>>0,t}function d(e,t,i){return void 0===t&&(t=new Uint8Array(4)),void 0===i&&(i=0),t[i+0]=e>>>0,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24,t}function l(e,t,i){return void 0===t&&(t=new Uint8Array(8)),void 0===i&&(i=0),u(e/4294967296>>>0,t,i),u(e>>>0,t,i+4),t}function f(e,t,i){return void 0===t&&(t=new Uint8Array(8)),void 0===i&&(i=0),d(e>>>0,t,i),d(e/4294967296>>>0,t,i+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=s,t.writeInt16BE=s,t.writeUint16LE=n,t.writeInt16LE=n,t.readInt32BE=o,t.readUint32BE=a,t.readInt32LE=c,t.readUint32LE=h,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=d,t.writeInt32LE=d,t.readInt64BE=function(e,t){void 0===t&&(t=0);var i=o(e,t),r=o(e,t+4);return 4294967296*i+r-(r>>31)*4294967296},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*a(e,t)+a(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var i=c(e,t);return 4294967296*c(e,t+4)+i-(i>>31)*4294967296},t.readUint64LE=function(e,t){void 0===t&&(t=0);var i=h(e,t);return 4294967296*h(e,t+4)+i},t.writeUint64BE=l,t.writeInt64BE=l,t.writeUint64LE=f,t.writeInt64LE=f,t.readUintBE=function(e,t,i){if(void 0===i&&(i=0),e%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-i)throw Error("readUintBE: array is too short for the given bitLength");for(var r=0,s=1,n=e/8+i-1;n>=i;n--)r+=t[n]*s,s*=256;return r},t.readUintLE=function(e,t,i){if(void 0===i&&(i=0),e%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-i)throw Error("readUintLE: array is too short for the given bitLength");for(var r=0,s=1,n=i;n<i+e/8;n++)r+=t[n]*s,s*=256;return r},t.writeUintBE=function(e,t,i,s){if(void 0===i&&(i=new Uint8Array(e/8)),void 0===s&&(s=0),e%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!r.isSafeInteger(t))throw Error("writeUintBE value must be an integer");for(var n=1,o=e/8+s-1;o>=s;o--)i[o]=t/n&255,n*=256;return i},t.writeUintLE=function(e,t,i,s){if(void 0===i&&(i=new Uint8Array(e/8)),void 0===s&&(s=0),e%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!r.isSafeInteger(t))throw Error("writeUintLE value must be an integer");for(var n=1,o=s;o<s+e/8;o++)i[o]=t/n&255,n*=256;return i},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,i){return void 0===t&&(t=new Uint8Array(4)),void 0===i&&(i=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(i,e),t},t.writeFloat32LE=function(e,t,i){return void 0===t&&(t=new Uint8Array(4)),void 0===i&&(i=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(i,e,!0),t},t.writeFloat64BE=function(e,t,i){return void 0===t&&(t=new Uint8Array(8)),void 0===i&&(i=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(i,e),t},t.writeFloat64LE=function(e,t,i){return void 0===t&&(t=new Uint8Array(8)),void 0===i&&(i=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(i,e,!0),t}},36973:function(e,t,i){"use strict";var r=i(33860),s=i(88818),n=i(40471),o=i(14912),a=i(80287);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),h=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,i,s){if(e.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");var o,a=new Uint8Array(16);a.set(e,a.length-e.length);var c=new Uint8Array(32);r.stream(this._key,a,c,4);var h=t.length+this.tagLength;if(s){if(s.length!==h)throw Error("ChaCha20Poly1305: incorrect destination length");o=s}else o=new Uint8Array(h);return r.streamXOR(this._key,a,t,o,4),this._authenticate(o.subarray(o.length-this.tagLength,o.length),c,o.subarray(0,o.length-this.tagLength),i),n.wipe(a),o},e.prototype.open=function(e,t,i,s){if(e.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o,c=new Uint8Array(16);c.set(e,c.length-e.length);var h=new Uint8Array(32);r.stream(this._key,c,h,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,h,t.subarray(0,t.length-this.tagLength),i),!a.equal(u,t.subarray(t.length-this.tagLength,t.length)))return null;var d=t.length-this.tagLength;if(s){if(s.length!==d)throw Error("ChaCha20Poly1305: incorrect destination length");o=s}else o=new Uint8Array(d);return r.streamXOR(this._key,c,t.subarray(0,t.length-this.tagLength),o,4),n.wipe(c),o},e.prototype.clean=function(){return n.wipe(this._key),this},e.prototype._authenticate=function(e,t,i,r){var a=new s.Poly1305(t);r&&(a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16))),a.update(i),i.length%16>0&&a.update(c.subarray(i.length%16));var h=new Uint8Array(8);r&&o.writeUint64LE(r.length,h),a.update(h),o.writeUint64LE(i.length,h),a.update(h);for(var u=a.digest(),d=0;d<u.length;d++)e[d]=u[d];a.clean(),n.wipe(u),n.wipe(h)},e}();t.OK=h},33860:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(14912),s=i(40471);function n(e,t,i,n,o){if(void 0===o&&(o=0),32!==e.length)throw Error("ChaCha: key size must be 32 bytes");if(n.length<i.length)throw Error("ChaCha: destination is shorter than source");if(0===o){if(8!==t.length&&12!==t.length)throw Error("ChaCha nonce must be 8 or 12 bytes");c=(a=new Uint8Array(16)).length-t.length,a.set(t,c)}else{if(16!==t.length)throw Error("ChaCha nonce with counter must be 16 bytes");a=t,c=o}for(var a,c,h=new Uint8Array(64),u=0;u<i.length;u+=64){!function(e,t,i){for(var s=i[3]<<24|i[2]<<16|i[1]<<8|i[0],n=i[7]<<24|i[6]<<16|i[5]<<8|i[4],o=i[11]<<24|i[10]<<16|i[9]<<8|i[8],a=i[15]<<24|i[14]<<16|i[13]<<8|i[12],c=i[19]<<24|i[18]<<16|i[17]<<8|i[16],h=i[23]<<24|i[22]<<16|i[21]<<8|i[20],u=i[27]<<24|i[26]<<16|i[25]<<8|i[24],d=i[31]<<24|i[30]<<16|i[29]<<8|i[28],l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],f=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],g=t[15]<<24|t[14]<<16|t[13]<<8|t[12],b=1634760805,y=857760878,m=2036477234,v=1797285236,w=s,_=n,D=o,E=a,S=c,I=h,M=u,A=d,x=l,C=f,R=p,O=g,P=0;P<20;P+=2)x^=b=b+w|0,w^=S=S+(x=x>>>16|x<<16)|0,w=w>>>20|w<<12,C^=y=y+_|0,_^=I=I+(C=C>>>16|C<<16)|0,_=_>>>20|_<<12,R^=m=m+D|0,D^=M=M+(R=R>>>16|R<<16)|0,D=D>>>20|D<<12,O^=v=v+E|0,E^=A=A+(O=O>>>16|O<<16)|0,E=E>>>20|E<<12,R^=m=m+D|0,D^=M=M+(R=R>>>24|R<<8)|0,D=D>>>25|D<<7,O^=v=v+E|0,E^=A=A+(O=O>>>24|O<<8)|0,E=E>>>25|E<<7,C^=y=y+_|0,_^=I=I+(C=C>>>24|C<<8)|0,_=_>>>25|_<<7,x^=b=b+w|0,w^=S=S+(x=x>>>24|x<<8)|0,w=w>>>25|w<<7,O^=b=b+_|0,_^=M=M+(O=O>>>16|O<<16)|0,_=_>>>20|_<<12,x^=y=y+D|0,D^=A=A+(x=x>>>16|x<<16)|0,D=D>>>20|D<<12,C^=m=m+E|0,E^=S=S+(C=C>>>16|C<<16)|0,E=E>>>20|E<<12,R^=v=v+w|0,w^=I=I+(R=R>>>16|R<<16)|0,w=w>>>20|w<<12,C^=m=m+E|0,E^=S=S+(C=C>>>24|C<<8)|0,E=E>>>25|E<<7,R^=v=v+w|0,w^=I=I+(R=R>>>24|R<<8)|0,w=w>>>25|w<<7,x^=y=y+D|0,D^=A=A+(x=x>>>24|x<<8)|0,D=D>>>25|D<<7,O^=b=b+_|0,_^=M=M+(O=O>>>24|O<<8)|0,_=_>>>25|_<<7;r.writeUint32LE(b+1634760805|0,e,0),r.writeUint32LE(y+857760878|0,e,4),r.writeUint32LE(m+2036477234|0,e,8),r.writeUint32LE(v+1797285236|0,e,12),r.writeUint32LE(w+s|0,e,16),r.writeUint32LE(_+n|0,e,20),r.writeUint32LE(D+o|0,e,24),r.writeUint32LE(E+a|0,e,28),r.writeUint32LE(S+c|0,e,32),r.writeUint32LE(I+h|0,e,36),r.writeUint32LE(M+u|0,e,40),r.writeUint32LE(A+d|0,e,44),r.writeUint32LE(x+l|0,e,48),r.writeUint32LE(C+f|0,e,52),r.writeUint32LE(R+p|0,e,56),r.writeUint32LE(O+g|0,e,60)}(h,a,e);for(var d=u;d<u+64&&d<i.length;d++)n[d]=i[d]^h[d-u];!function(e,t,i){for(var r=1;i--;)r=r+(255&e[t])|0,e[t]=255&r,r>>>=8,t++;if(r>0)throw Error("ChaCha: counter overflow")}(a,0,c)}return s.wipe(h),0===o&&s.wipe(a),n}t.streamXOR=n,t.stream=function(e,t,i,r){return void 0===r&&(r=0),s.wipe(i),n(e,t,i,i,r)}},80287:function(e,t){"use strict";function i(e,t){if(e.length!==t.length)return 0;for(var i=0,r=0;r<e.length;r++)i|=e[r]^t[r];return 1&i-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,i){return~(e-1)&t|e-1&i},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=i,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==i(e,t)}},63193:function(e,t,i){"use strict";t.Xx=t._w=t.aP=t.KS=t.jQ=void 0,i(92090);let r=i(90430);function s(e){let t=new Float64Array(16);if(e)for(let i=0;i<e.length;i++)t[i]=e[i];return t}i(40471),t.jQ=64,t.KS=64,t.aP=32,new Uint8Array(32)[0]=9;let n=s(),o=s([1]),a=(s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),c=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);function u(e,t){for(let i=0;i<16;i++)e[i]=0|t[i]}function d(e){let t=1;for(let i=0;i<16;i++){let r=e[i]+t+65535;t=Math.floor(r/65536),e[i]=r-65536*t}e[0]+=t-1+37*(t-1)}function l(e,t,i){let r=~(i-1);for(let i=0;i<16;i++){let s=r&(e[i]^t[i]);e[i]^=s,t[i]^=s}}function f(e,t){let i=s(),r=s();for(let e=0;e<16;e++)r[e]=t[e];d(r),d(r),d(r);for(let e=0;e<2;e++){i[0]=r[0]-65517;for(let e=1;e<15;e++)i[e]=r[e]-65535-(i[e-1]>>16&1),i[e-1]&=65535;i[15]=r[15]-32767-(i[14]>>16&1);let e=i[15]>>16&1;i[14]&=65535,l(r,i,1-e)}for(let t=0;t<16;t++)e[2*t]=255&r[t],e[2*t+1]=r[t]>>8}s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,i){for(let r=0;r<16;r++)e[r]=t[r]+i[r]}function g(e,t,i){for(let r=0;r<16;r++)e[r]=t[r]-i[r]}function b(e,t,i){let r,s,n=0,o=0,a=0,c=0,h=0,u=0,d=0,l=0,f=0,p=0,g=0,b=0,y=0,m=0,v=0,w=0,_=0,D=0,E=0,S=0,I=0,M=0,A=0,x=0,C=0,R=0,O=0,P=0,T=0,N=0,k=0,L=i[0],q=i[1],z=i[2],j=i[3],U=i[4],F=i[5],B=i[6],K=i[7],V=i[8],H=i[9],J=i[10],W=i[11],Y=i[12],G=i[13],Q=i[14],X=i[15];n+=(r=t[0])*L,o+=r*q,a+=r*z,c+=r*j,h+=r*U,u+=r*F,d+=r*B,l+=r*K,f+=r*V,p+=r*H,g+=r*J,b+=r*W,y+=r*Y,m+=r*G,v+=r*Q,w+=r*X,o+=(r=t[1])*L,a+=r*q,c+=r*z,h+=r*j,u+=r*U,d+=r*F,l+=r*B,f+=r*K,p+=r*V,g+=r*H,b+=r*J,y+=r*W,m+=r*Y,v+=r*G,w+=r*Q,_+=r*X,a+=(r=t[2])*L,c+=r*q,h+=r*z,u+=r*j,d+=r*U,l+=r*F,f+=r*B,p+=r*K,g+=r*V,b+=r*H,y+=r*J,m+=r*W,v+=r*Y,w+=r*G,_+=r*Q,D+=r*X,c+=(r=t[3])*L,h+=r*q,u+=r*z,d+=r*j,l+=r*U,f+=r*F,p+=r*B,g+=r*K,b+=r*V,y+=r*H,m+=r*J,v+=r*W,w+=r*Y,_+=r*G,D+=r*Q,E+=r*X,h+=(r=t[4])*L,u+=r*q,d+=r*z,l+=r*j,f+=r*U,p+=r*F,g+=r*B,b+=r*K,y+=r*V,m+=r*H,v+=r*J,w+=r*W,_+=r*Y,D+=r*G,E+=r*Q,S+=r*X,u+=(r=t[5])*L,d+=r*q,l+=r*z,f+=r*j,p+=r*U,g+=r*F,b+=r*B,y+=r*K,m+=r*V,v+=r*H,w+=r*J,_+=r*W,D+=r*Y,E+=r*G,S+=r*Q,I+=r*X,d+=(r=t[6])*L,l+=r*q,f+=r*z,p+=r*j,g+=r*U,b+=r*F,y+=r*B,m+=r*K,v+=r*V,w+=r*H,_+=r*J,D+=r*W,E+=r*Y,S+=r*G,I+=r*Q,M+=r*X,l+=(r=t[7])*L,f+=r*q,p+=r*z,g+=r*j,b+=r*U,y+=r*F,m+=r*B,v+=r*K,w+=r*V,_+=r*H,D+=r*J,E+=r*W,S+=r*Y,I+=r*G,M+=r*Q,A+=r*X,f+=(r=t[8])*L,p+=r*q,g+=r*z,b+=r*j,y+=r*U,m+=r*F,v+=r*B,w+=r*K,_+=r*V,D+=r*H,E+=r*J,S+=r*W,I+=r*Y,M+=r*G,A+=r*Q,x+=r*X,p+=(r=t[9])*L,g+=r*q,b+=r*z,y+=r*j,m+=r*U,v+=r*F,w+=r*B,_+=r*K,D+=r*V,E+=r*H,S+=r*J,I+=r*W,M+=r*Y,A+=r*G,x+=r*Q,C+=r*X,g+=(r=t[10])*L,b+=r*q,y+=r*z,m+=r*j,v+=r*U,w+=r*F,_+=r*B,D+=r*K,E+=r*V,S+=r*H,I+=r*J,M+=r*W,A+=r*Y,x+=r*G,C+=r*Q,R+=r*X,b+=(r=t[11])*L,y+=r*q,m+=r*z,v+=r*j,w+=r*U,_+=r*F,D+=r*B,E+=r*K,S+=r*V,I+=r*H,M+=r*J,A+=r*W,x+=r*Y,C+=r*G,R+=r*Q,O+=r*X,y+=(r=t[12])*L,m+=r*q,v+=r*z,w+=r*j,_+=r*U,D+=r*F,E+=r*B,S+=r*K,I+=r*V,M+=r*H,A+=r*J,x+=r*W,C+=r*Y,R+=r*G,O+=r*Q,P+=r*X,m+=(r=t[13])*L,v+=r*q,w+=r*z,_+=r*j,D+=r*U,E+=r*F,S+=r*B,I+=r*K,M+=r*V,A+=r*H,x+=r*J,C+=r*W,R+=r*Y,O+=r*G,P+=r*Q,T+=r*X,v+=(r=t[14])*L,w+=r*q,_+=r*z,D+=r*j,E+=r*U,S+=r*F,I+=r*B,M+=r*K,A+=r*V,x+=r*H,C+=r*J,R+=r*W,O+=r*Y,P+=r*G,T+=r*Q,N+=r*X,w+=(r=t[15])*L,_+=r*q,D+=r*z,E+=r*j,S+=r*U,I+=r*F,M+=r*B,A+=r*K,x+=r*V,C+=r*H,R+=r*J,O+=r*W,P+=r*Y,T+=r*G,N+=r*Q,k+=r*X,n+=38*_,o+=38*D,a+=38*E,c+=38*S,h+=38*I,u+=38*M,d+=38*A,l+=38*x,f+=38*C,p+=38*R,g+=38*O,b+=38*P,y+=38*T,m+=38*N,v+=38*k,s=Math.floor((r=n+(s=1)+65535)/65536),n=r-65536*s,s=Math.floor((r=o+s+65535)/65536),o=r-65536*s,s=Math.floor((r=a+s+65535)/65536),a=r-65536*s,s=Math.floor((r=c+s+65535)/65536),c=r-65536*s,s=Math.floor((r=h+s+65535)/65536),h=r-65536*s,s=Math.floor((r=u+s+65535)/65536),u=r-65536*s,s=Math.floor((r=d+s+65535)/65536),d=r-65536*s,s=Math.floor((r=l+s+65535)/65536),l=r-65536*s,s=Math.floor((r=f+s+65535)/65536),f=r-65536*s,s=Math.floor((r=p+s+65535)/65536),p=r-65536*s,s=Math.floor((r=g+s+65535)/65536),g=r-65536*s,s=Math.floor((r=b+s+65535)/65536),b=r-65536*s,s=Math.floor((r=y+s+65535)/65536),y=r-65536*s,s=Math.floor((r=m+s+65535)/65536),m=r-65536*s,s=Math.floor((r=v+s+65535)/65536),v=r-65536*s,s=Math.floor((r=w+s+65535)/65536),w=r-65536*s,n+=s-1+37*(s-1),s=Math.floor((r=n+(s=1)+65535)/65536),n=r-65536*s,s=Math.floor((r=o+s+65535)/65536),o=r-65536*s,s=Math.floor((r=a+s+65535)/65536),a=r-65536*s,s=Math.floor((r=c+s+65535)/65536),c=r-65536*s,s=Math.floor((r=h+s+65535)/65536),h=r-65536*s,s=Math.floor((r=u+s+65535)/65536),u=r-65536*s,s=Math.floor((r=d+s+65535)/65536),d=r-65536*s,s=Math.floor((r=l+s+65535)/65536),l=r-65536*s,s=Math.floor((r=f+s+65535)/65536),f=r-65536*s,s=Math.floor((r=p+s+65535)/65536),p=r-65536*s,s=Math.floor((r=g+s+65535)/65536),g=r-65536*s,s=Math.floor((r=b+s+65535)/65536),b=r-65536*s,s=Math.floor((r=y+s+65535)/65536),y=r-65536*s,s=Math.floor((r=m+s+65535)/65536),m=r-65536*s,s=Math.floor((r=v+s+65535)/65536),v=r-65536*s,s=Math.floor((r=w+s+65535)/65536),w=r-65536*s,n+=s-1+37*(s-1),e[0]=n,e[1]=o,e[2]=a,e[3]=c,e[4]=h,e[5]=u,e[6]=d,e[7]=l,e[8]=f,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=m,e[14]=v,e[15]=w}function y(e,t){let i=s(),r=s(),n=s(),o=s(),c=s(),h=s(),u=s(),d=s(),l=s();g(i,e[1],e[0]),g(l,t[1],t[0]),b(i,i,l),p(r,e[0],e[1]),p(l,t[0],t[1]),b(r,r,l),b(n,e[3],t[3]),b(n,n,a),b(o,e[2],t[2]),p(o,o,o),g(c,r,i),g(h,o,n),p(u,o,n),p(d,r,i),b(e[0],c,h),b(e[1],d,u),b(e[2],u,h),b(e[3],c,d)}function m(e,t,i){for(let r=0;r<4;r++)l(e[r],t[r],i)}function v(e,t){let i=s(),r=s(),n=s();(function(e,t){let i;let r=s();for(i=0;i<16;i++)r[i]=t[i];for(i=253;i>=0;i--)b(r,r,r),2!==i&&4!==i&&b(r,r,t);for(i=0;i<16;i++)e[i]=r[i]})(n,t[2]),b(i,t[0],n),b(r,t[1],n),f(e,r),e[31]^=function(e){let t=new Uint8Array(32);return f(t,e),1&t[0]}(i)<<7}function w(e,t){let i=[s(),s(),s(),s()];u(i[0],c),u(i[1],h),u(i[2],o),b(i[3],c,h),function(e,t,i){u(e[0],n),u(e[1],o),u(e[2],o),u(e[3],n);for(let r=255;r>=0;--r){let s=i[r/8|0]>>(7&r)&1;m(e,t,s),y(t,e),y(e,e),m(e,t,s)}}(e,i,t)}t._w=function(e){if(e.length!==t.aP)throw Error("ed25519: seed must be ".concat(t.aP," bytes"));let i=(0,r.hash)(e);i[0]&=248,i[31]&=127,i[31]|=64;let n=new Uint8Array(32),o=[s(),s(),s(),s()];w(o,i),v(n,o);let a=new Uint8Array(64);return a.set(e),a.set(n,32),{publicKey:n,secretKey:a}};let _=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function D(e,t){let i,r,s,n;for(r=63;r>=32;--r){for(i=0,s=r-32,n=r-12;s<n;++s)t[s]+=i-16*t[r]*_[s-(r-32)],i=Math.floor((t[s]+128)/256),t[s]-=256*i;t[s]+=i,t[r]=0}for(s=0,i=0;s<32;s++)t[s]+=i-(t[31]>>4)*_[s],i=t[s]>>8,t[s]&=255;for(s=0;s<32;s++)t[s]-=i*_[s];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function E(e){let t=new Float64Array(64);for(let i=0;i<64;i++)t[i]=e[i];for(let t=0;t<64;t++)e[t]=0;D(e,t)}t.Xx=function(e,t){let i=new Float64Array(64),n=[s(),s(),s(),s()],o=(0,r.hash)(e.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;let a=new Uint8Array(64);a.set(o.subarray(32),32);let c=new r.SHA512;c.update(a.subarray(32)),c.update(t);let h=c.digest();c.clean(),E(h),w(n,h),v(a,n),c.reset(),c.update(a.subarray(0,32)),c.update(e.subarray(32)),c.update(t);let u=c.digest();E(u);for(let e=0;e<32;e++)i[e]=h[e];for(let e=0;e<32;e++)for(let t=0;t<32;t++)i[e+t]+=u[e]*o[t];return D(a.subarray(32),i),a}},21593:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},48454:function(e,t,i){"use strict";var r=i(73048),s=i(40471),n=function(){function e(e,t,i,s){void 0===i&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=s;var n=r.hmac(this._hash,i,t);this._hmac=new r.HMAC(e,n),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),s.wipe(this._buffer),s.wipe(this._counter),this._bufpos=0},e}();t.t=n},73048:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(21593),s=i(80287),n=i(40471),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var s=0;s<i.length;s++)i[s]^=54;this._inner.update(i);for(var s=0;s<i.length;s++)i[s]^=106;this._outer.update(i),r.isSerializableHash(this._inner)&&r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),n.wipe(i)}return e.prototype.reset=function(){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?this._outer.finish(e):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!r.isSerializableHash(this._inner))throw Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!r.isSerializableHash(this._inner))throw Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=o,t.hmac=function(e,t,i){var r=new o(e,t);r.update(i);var s=r.digest();return r.clean(),s},t.equal=s.equal},86175:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var i=65535&e,r=65535&t;return i*r+((e>>>16&65535)*r+i*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},88818:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(80287),s=i(40471);t.DIGEST_LENGTH=16;var n=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var i=e[0]|e[1]<<8;this._r[0]=8191&i;var r=e[2]|e[3]<<8;this._r[1]=(i>>>13|r<<3)&8191;var s=e[4]|e[5]<<8;this._r[2]=(r>>>10|s<<6)&7939;var n=e[6]|e[7]<<8;this._r[3]=(s>>>7|n<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(n>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var h=e[14]|e[15]<<8;this._r[8]=(c>>>8|h<<8)&8191,this._r[9]=h>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,i){for(var r=this._fin?0:2048,s=this._h[0],n=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],h=this._h[5],u=this._h[6],d=this._h[7],l=this._h[8],f=this._h[9],p=this._r[0],g=this._r[1],b=this._r[2],y=this._r[3],m=this._r[4],v=this._r[5],w=this._r[6],_=this._r[7],D=this._r[8],E=this._r[9];i>=16;){var S,I=e[t+0]|e[t+1]<<8;s+=8191&I;var M=e[t+2]|e[t+3]<<8;n+=(I>>>13|M<<3)&8191;var A=e[t+4]|e[t+5]<<8;o+=(M>>>10|A<<6)&8191;var x=e[t+6]|e[t+7]<<8;a+=(A>>>7|x<<9)&8191;var C=e[t+8]|e[t+9]<<8;c+=(x>>>4|C<<12)&8191,h+=C>>>1&8191;var R=e[t+10]|e[t+11]<<8;u+=(C>>>14|R<<2)&8191;var O=e[t+12]|e[t+13]<<8;d+=(R>>>11|O<<5)&8191;var P=e[t+14]|e[t+15]<<8;l+=(O>>>8|P<<8)&8191,f+=P>>>5|r;var T=0;T=(S=0+s*p+5*E*n+5*D*o+5*_*a+5*w*c)>>>13,S&=8191,S+=5*v*h+5*m*u+5*y*d+5*b*l+5*g*f,T+=S>>>13,S&=8191;var N=T;N+=s*g+n*p+5*E*o+5*D*a+5*_*c,T=N>>>13,N&=8191,N+=5*w*h+5*v*u+5*m*d+5*y*l+5*b*f,T+=N>>>13,N&=8191;var k=T;k+=s*b+n*g+o*p+5*E*a+5*D*c,T=k>>>13,k&=8191,k+=5*_*h+5*w*u+5*v*d+5*m*l+5*y*f,T+=k>>>13,k&=8191;var L=T;L+=s*y+n*b+o*g+a*p+5*E*c,T=L>>>13,L&=8191,L+=5*D*h+5*_*u+5*w*d+5*v*l+5*m*f,T+=L>>>13,L&=8191;var q=T;q+=s*m+n*y+o*b+a*g+c*p,T=q>>>13,q&=8191,q+=5*E*h+5*D*u+5*_*d+5*w*l+5*v*f,T+=q>>>13,q&=8191;var z=T;z+=s*v+n*m+o*y+a*b+c*g,T=z>>>13,z&=8191,z+=h*p+5*E*u+5*D*d+5*_*l+5*w*f,T+=z>>>13,z&=8191;var j=T;j+=s*w+n*v+o*m+a*y+c*b,T=j>>>13,j&=8191,j+=h*g+u*p+5*E*d+5*D*l+5*_*f,T+=j>>>13,j&=8191;var U=T;U+=s*_+n*w+o*v+a*m+c*y,T=U>>>13,U&=8191,U+=h*b+u*g+d*p+5*E*l+5*D*f,T+=U>>>13,U&=8191;var F=T;F+=s*D+n*_+o*w+a*v+c*m,T=F>>>13,F&=8191,F+=h*y+u*b+d*g+l*p+5*E*f,T+=F>>>13,F&=8191;var B=T;B+=s*E+n*D+o*_+a*w+c*v,T=B>>>13,B&=8191,B+=h*m+u*y+d*b+l*g+f*p,T+=B>>>13,B&=8191,S=8191&(T=(T=(T<<2)+T|0)+S|0),T>>>=13,N+=T,s=S,n=N,o=k,a=L,c=q,h=z,u=j,d=U,l=F,f=B,t+=16,i-=16}this._h[0]=s,this._h[1]=n,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=h,this._h[6]=u,this._h[7]=d,this._h[8]=l,this._h[9]=f},e.prototype.finish=function(e,t){void 0===t&&(t=0);var i,r,s,n,o=new Uint16Array(10);if(this._leftover){for(n=this._leftover,this._buffer[n++]=1;n<16;n++)this._buffer[n]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,n=2;n<10;n++)this._h[n]+=i,i=this._h[n]>>>13,this._h[n]&=8191;for(this._h[0]+=5*i,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,o[0]=this._h[0]+5,i=o[0]>>>13,o[0]&=8191,n=1;n<10;n++)o[n]=this._h[n]+i,i=o[n]>>>13,o[n]&=8191;for(o[9]-=8192,r=(1^i)-1,n=0;n<10;n++)o[n]&=r;for(n=0,r=~r;n<10;n++)this._h[n]=this._h[n]&r|o[n];for(n=1,this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,s=this._h[0]+this._pad[0],this._h[0]=65535&s;n<8;n++)s=(this._h[n]+this._pad[n]|0)+(s>>>16)|0,this._h[n]=65535&s;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,i=0,r=e.length;if(this._leftover){(t=16-this._leftover)>r&&(t=r);for(var s=0;s<t;s++)this._buffer[this._leftover+s]=e[i+s];if(r-=t,i+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(r>=16&&(t=r-r%16,this._blocks(e,i,t),i+=t,r-=t),r){for(var s=0;s<r;s++)this._buffer[this._leftover+s]=e[i+s];this._leftover+=r}return this},e.prototype.digest=function(){if(this._finished)throw Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return s.wipe(this._buffer),s.wipe(this._r),s.wipe(this._h),s.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=n,t.oneTimeAuth=function(e,t){var i=new n(e);i.update(t);var r=i.digest();return i.clean(),r},t.equal=function(e,i){return e.length===t.DIGEST_LENGTH&&i.length===t.DIGEST_LENGTH&&r.equal(e,i)}},92090:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;let r=i(53111),s=i(14912),n=i(40471);function o(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultRandomSource;return i.randomBytes(e)}t.defaultRandomSource=new r.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.defaultRandomSource,i=o(4,e),r=(0,s.readUint32LE)(i);return(0,n.wipe)(i),r};let a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultRandomSource;if(i.length<2)throw Error("randomString charset is too short");if(i.length>256)throw Error("randomString charset is too long");let s="",c=i.length,h=256-256%c;for(;e>0;){let t=o(Math.ceil(256*e/h),r);for(let r=0;r<t.length&&e>0;r++){let n=t[r];n<h&&(s+=i.charAt(n%c),e--)}(0,n.wipe)(t)}return s}t.randomString=c,t.randomStringForEntropy=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultRandomSource;return c(Math.ceil(e/(Math.log(i.length)/Math.LN2)),i,r)}},67111:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;class i{randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}t.BrowserRandomSource=i},21528:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;let r=i(40471);class s{randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw Error("NodeRandomSource: got fewer bytes than requested");let i=new Uint8Array(e);for(let e=0;e<i.length;e++)i[e]=t[e];return(0,r.wipe)(t),i}constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let e=i(73804);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}}t.NodeRandomSource=s},53111:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;let r=i(67111),s=i(21528);class n{randomBytes(e){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(e)}constructor(){if(this.isAvailable=!1,this.name="",this._source=new r.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new s.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}}t.SystemRandomSource=n},575:function(e,t,i){"use strict";var r=i(14912),s=i(40471);t.k=32,t.cn=64;var n=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){s.wipe(this._buffer),s.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[i++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(i=a(this._temp,this._state,e,i,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[i++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,i=this._bufferLength,s=t%64<56?64:128;this._buffer[i]=128;for(var n=i+1;n<s-8;n++)this._buffer[n]=0;r.writeUint32BE(t/536870912|0,this._buffer,s-8),r.writeUint32BE(t<<3,this._buffer,s-4),a(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(var n=0;n<this.digestLength/4;n++)r.writeUint32BE(this._state[n],e,4*n);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){s.wipe(e.state),e.buffer&&s.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=n;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,i,s,n){for(;n>=64;){for(var a=t[0],c=t[1],h=t[2],u=t[3],d=t[4],l=t[5],f=t[6],p=t[7],g=0;g<16;g++){var b=s+4*g;e[g]=r.readUint32BE(i,b)}for(var g=16;g<64;g++){var y=e[g-2],m=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10,v=((y=e[g-15])>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;e[g]=(m+e[g-7]|0)+(v+e[g-16]|0)}for(var g=0;g<64;g++){var m=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&l^~d&f)|0)+(p+(o[g]+e[g]|0)|0)|0,v=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&h^c&h)|0;p=f,f=l,l=d,d=u+m|0,u=h,h=c,c=a,a=m+v|0}t[0]+=a,t[1]+=c,t[2]+=h,t[3]+=u,t[4]+=d,t[5]+=l,t[6]+=f,t[7]+=p,s+=64,n-=64}return s}t.vp=function(e){var t=new n;t.update(e);var i=t.digest();return t.clean(),i}},90430:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(14912),s=i(40471);t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function e(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){s.wipe(this._buffer),s.wipe(this._tempHi),s.wipe(this._tempLo),this.reset()},e.prototype.update=function(e,i){if(void 0===i&&(i=e.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var r=0;if(this._bytesHashed+=i,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&i>0;)this._buffer[this._bufferLength++]=e[r++],i--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(i>=this.blockSize&&(r=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,r,i),i%=this.blockSize);i>0;)this._buffer[this._bufferLength++]=e[r++],i--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,i=this._bufferLength,s=t%128<112?128:256;this._buffer[i]=128;for(var n=i+1;n<s-8;n++)this._buffer[n]=0;r.writeUint32BE(t/536870912|0,this._buffer,s-8),r.writeUint32BE(t<<3,this._buffer,s-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,s),this._finished=!0}for(var n=0;n<this.digestLength/8;n++)r.writeUint32BE(this._stateHi[n],e,8*n),r.writeUint32BE(this._stateLo[n],e,8*n+4);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){s.wipe(e.stateHi),s.wipe(e.stateLo),e.buffer&&s.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.SHA512=n;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(e,t,i,s,n,a,c){for(var h,u,d,l,f,p,g,b,y=i[0],m=i[1],v=i[2],w=i[3],_=i[4],D=i[5],E=i[6],S=i[7],I=s[0],M=s[1],A=s[2],x=s[3],C=s[4],R=s[5],O=s[6],P=s[7];c>=128;){for(var T=0;T<16;T++){var N=8*T+a;e[T]=r.readUint32BE(n,N),t[T]=r.readUint32BE(n,N+4)}for(var T=0;T<80;T++){var k=y,L=m,q=v,z=w,j=_,U=D,F=E,B=S,K=I,V=M,H=A,J=x,W=C,Y=R,G=O,Q=P;if(h=S,f=65535&(u=P),p=u>>>16,g=65535&h,b=h>>>16,h=(_>>>14|C<<18)^(_>>>18|C<<14)^(C>>>9|_<<23),f+=65535&(u=(C>>>14|_<<18)^(C>>>18|_<<14)^(_>>>9|C<<23)),p+=u>>>16,g+=65535&h,b+=h>>>16,h=_&D^~_&E,f+=65535&(u=C&R^~C&O),p+=u>>>16,g+=65535&h,b+=h>>>16,h=o[2*T],f+=65535&(u=o[2*T+1]),p+=u>>>16,g+=65535&h,b+=h>>>16,h=e[T%16],f+=65535&(u=t[T%16]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,d=65535&g|b<<16,l=65535&f|p<<16,h=d,f=65535&(u=l),p=u>>>16,g=65535&h,b=h>>>16,h=(y>>>28|I<<4)^(I>>>2|y<<30)^(I>>>7|y<<25),f+=65535&(u=(I>>>28|y<<4)^(y>>>2|I<<30)^(y>>>7|I<<25)),p+=u>>>16,g+=65535&h,b+=h>>>16,h=y&m^y&v^m&v,f+=65535&(u=I&M^I&A^M&A),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,B=65535&g|b<<16,Q=65535&f|p<<16,h=z,f=65535&(u=J),p=u>>>16,g=65535&h,b=h>>>16,h=d,f+=65535&(u=l),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,z=65535&g|b<<16,J=65535&f|p<<16,m=k,v=L,w=q,_=z,D=j,E=U,S=F,y=B,M=K,A=V,x=H,C=J,R=W,O=Y,P=G,I=Q,T%16==15)for(var N=0;N<16;N++)h=e[N],f=65535&(u=t[N]),p=u>>>16,g=65535&h,b=h>>>16,h=e[(N+9)%16],f+=65535&(u=t[(N+9)%16]),p+=u>>>16,g+=65535&h,b+=h>>>16,h=((d=e[(N+1)%16])>>>1|(l=t[(N+1)%16])<<31)^(d>>>8|l<<24)^d>>>7,f+=65535&(u=(l>>>1|d<<31)^(l>>>8|d<<24)^(l>>>7|d<<25)),p+=u>>>16,g+=65535&h,b+=h>>>16,h=((d=e[(N+14)%16])>>>19|(l=t[(N+14)%16])<<13)^(l>>>29|d<<3)^d>>>6,f+=65535&(u=(l>>>19|d<<13)^(d>>>29|l<<3)^(l>>>6|d<<26)),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,e[N]=65535&g|b<<16,t[N]=65535&f|p<<16}h=y,f=65535&(u=I),p=u>>>16,g=65535&h,b=h>>>16,h=i[0],f+=65535&(u=s[0]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,i[0]=y=65535&g|b<<16,s[0]=I=65535&f|p<<16,h=m,f=65535&(u=M),p=u>>>16,g=65535&h,b=h>>>16,h=i[1],f+=65535&(u=s[1]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,i[1]=m=65535&g|b<<16,s[1]=M=65535&f|p<<16,h=v,f=65535&(u=A),p=u>>>16,g=65535&h,b=h>>>16,h=i[2],f+=65535&(u=s[2]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,i[2]=v=65535&g|b<<16,s[2]=A=65535&f|p<<16,h=w,f=65535&(u=x),p=u>>>16,g=65535&h,b=h>>>16,h=i[3],f+=65535&(u=s[3]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,i[3]=w=65535&g|b<<16,s[3]=x=65535&f|p<<16,h=_,f=65535&(u=C),p=u>>>16,g=65535&h,b=h>>>16,h=i[4],f+=65535&(u=s[4]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,i[4]=_=65535&g|b<<16,s[4]=C=65535&f|p<<16,h=D,f=65535&(u=R),p=u>>>16,g=65535&h,b=h>>>16,h=i[5],f+=65535&(u=s[5]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,i[5]=D=65535&g|b<<16,s[5]=R=65535&f|p<<16,h=E,f=65535&(u=O),p=u>>>16,g=65535&h,b=h>>>16,h=i[6],f+=65535&(u=s[6]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,i[6]=E=65535&g|b<<16,s[6]=O=65535&f|p<<16,h=S,f=65535&(u=P),p=u>>>16,g=65535&h,b=h>>>16,h=i[7],f+=65535&(u=s[7]),p+=u>>>16,g+=65535&h,b+=h>>>16,p+=f>>>16,g+=p>>>16,b+=g>>>16,i[7]=S=65535&g|b<<16,s[7]=P=65535&f|p<<16,a+=128,c-=128}return a}t.hash=function(e){var t=new n;t.update(e);var i=t.digest();return t.clean(),i}},40471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},32514:function(e,t,i){"use strict";t.gi=t.Au=t.KS=t.kz=void 0;let r=i(92090),s=i(40471);function n(e){let t=new Float64Array(16);if(e)for(let i=0;i<e.length;i++)t[i]=e[i];return t}t.kz=32,t.KS=32;let o=new Uint8Array(32);o[0]=9;let a=n([56129,1]);function c(e){let t=1;for(let i=0;i<16;i++){let r=e[i]+t+65535;t=Math.floor(r/65536),e[i]=r-65536*t}e[0]+=t-1+37*(t-1)}function h(e,t,i){let r=~(i-1);for(let i=0;i<16;i++){let s=r&(e[i]^t[i]);e[i]^=s,t[i]^=s}}function u(e,t,i){for(let r=0;r<16;r++)e[r]=t[r]+i[r]}function d(e,t,i){for(let r=0;r<16;r++)e[r]=t[r]-i[r]}function l(e,t,i){let r,s,n=0,o=0,a=0,c=0,h=0,u=0,d=0,l=0,f=0,p=0,g=0,b=0,y=0,m=0,v=0,w=0,_=0,D=0,E=0,S=0,I=0,M=0,A=0,x=0,C=0,R=0,O=0,P=0,T=0,N=0,k=0,L=i[0],q=i[1],z=i[2],j=i[3],U=i[4],F=i[5],B=i[6],K=i[7],V=i[8],H=i[9],J=i[10],W=i[11],Y=i[12],G=i[13],Q=i[14],X=i[15];n+=(r=t[0])*L,o+=r*q,a+=r*z,c+=r*j,h+=r*U,u+=r*F,d+=r*B,l+=r*K,f+=r*V,p+=r*H,g+=r*J,b+=r*W,y+=r*Y,m+=r*G,v+=r*Q,w+=r*X,o+=(r=t[1])*L,a+=r*q,c+=r*z,h+=r*j,u+=r*U,d+=r*F,l+=r*B,f+=r*K,p+=r*V,g+=r*H,b+=r*J,y+=r*W,m+=r*Y,v+=r*G,w+=r*Q,_+=r*X,a+=(r=t[2])*L,c+=r*q,h+=r*z,u+=r*j,d+=r*U,l+=r*F,f+=r*B,p+=r*K,g+=r*V,b+=r*H,y+=r*J,m+=r*W,v+=r*Y,w+=r*G,_+=r*Q,D+=r*X,c+=(r=t[3])*L,h+=r*q,u+=r*z,d+=r*j,l+=r*U,f+=r*F,p+=r*B,g+=r*K,b+=r*V,y+=r*H,m+=r*J,v+=r*W,w+=r*Y,_+=r*G,D+=r*Q,E+=r*X,h+=(r=t[4])*L,u+=r*q,d+=r*z,l+=r*j,f+=r*U,p+=r*F,g+=r*B,b+=r*K,y+=r*V,m+=r*H,v+=r*J,w+=r*W,_+=r*Y,D+=r*G,E+=r*Q,S+=r*X,u+=(r=t[5])*L,d+=r*q,l+=r*z,f+=r*j,p+=r*U,g+=r*F,b+=r*B,y+=r*K,m+=r*V,v+=r*H,w+=r*J,_+=r*W,D+=r*Y,E+=r*G,S+=r*Q,I+=r*X,d+=(r=t[6])*L,l+=r*q,f+=r*z,p+=r*j,g+=r*U,b+=r*F,y+=r*B,m+=r*K,v+=r*V,w+=r*H,_+=r*J,D+=r*W,E+=r*Y,S+=r*G,I+=r*Q,M+=r*X,l+=(r=t[7])*L,f+=r*q,p+=r*z,g+=r*j,b+=r*U,y+=r*F,m+=r*B,v+=r*K,w+=r*V,_+=r*H,D+=r*J,E+=r*W,S+=r*Y,I+=r*G,M+=r*Q,A+=r*X,f+=(r=t[8])*L,p+=r*q,g+=r*z,b+=r*j,y+=r*U,m+=r*F,v+=r*B,w+=r*K,_+=r*V,D+=r*H,E+=r*J,S+=r*W,I+=r*Y,M+=r*G,A+=r*Q,x+=r*X,p+=(r=t[9])*L,g+=r*q,b+=r*z,y+=r*j,m+=r*U,v+=r*F,w+=r*B,_+=r*K,D+=r*V,E+=r*H,S+=r*J,I+=r*W,M+=r*Y,A+=r*G,x+=r*Q,C+=r*X,g+=(r=t[10])*L,b+=r*q,y+=r*z,m+=r*j,v+=r*U,w+=r*F,_+=r*B,D+=r*K,E+=r*V,S+=r*H,I+=r*J,M+=r*W,A+=r*Y,x+=r*G,C+=r*Q,R+=r*X,b+=(r=t[11])*L,y+=r*q,m+=r*z,v+=r*j,w+=r*U,_+=r*F,D+=r*B,E+=r*K,S+=r*V,I+=r*H,M+=r*J,A+=r*W,x+=r*Y,C+=r*G,R+=r*Q,O+=r*X,y+=(r=t[12])*L,m+=r*q,v+=r*z,w+=r*j,_+=r*U,D+=r*F,E+=r*B,S+=r*K,I+=r*V,M+=r*H,A+=r*J,x+=r*W,C+=r*Y,R+=r*G,O+=r*Q,P+=r*X,m+=(r=t[13])*L,v+=r*q,w+=r*z,_+=r*j,D+=r*U,E+=r*F,S+=r*B,I+=r*K,M+=r*V,A+=r*H,x+=r*J,C+=r*W,R+=r*Y,O+=r*G,P+=r*Q,T+=r*X,v+=(r=t[14])*L,w+=r*q,_+=r*z,D+=r*j,E+=r*U,S+=r*F,I+=r*B,M+=r*K,A+=r*V,x+=r*H,C+=r*J,R+=r*W,O+=r*Y,P+=r*G,T+=r*Q,N+=r*X,w+=(r=t[15])*L,_+=r*q,D+=r*z,E+=r*j,S+=r*U,I+=r*F,M+=r*B,A+=r*K,x+=r*V,C+=r*H,R+=r*J,O+=r*W,P+=r*Y,T+=r*G,N+=r*Q,k+=r*X,n+=38*_,o+=38*D,a+=38*E,c+=38*S,h+=38*I,u+=38*M,d+=38*A,l+=38*x,f+=38*C,p+=38*R,g+=38*O,b+=38*P,y+=38*T,m+=38*N,v+=38*k,s=Math.floor((r=n+(s=1)+65535)/65536),n=r-65536*s,s=Math.floor((r=o+s+65535)/65536),o=r-65536*s,s=Math.floor((r=a+s+65535)/65536),a=r-65536*s,s=Math.floor((r=c+s+65535)/65536),c=r-65536*s,s=Math.floor((r=h+s+65535)/65536),h=r-65536*s,s=Math.floor((r=u+s+65535)/65536),u=r-65536*s,s=Math.floor((r=d+s+65535)/65536),d=r-65536*s,s=Math.floor((r=l+s+65535)/65536),l=r-65536*s,s=Math.floor((r=f+s+65535)/65536),f=r-65536*s,s=Math.floor((r=p+s+65535)/65536),p=r-65536*s,s=Math.floor((r=g+s+65535)/65536),g=r-65536*s,s=Math.floor((r=b+s+65535)/65536),b=r-65536*s,s=Math.floor((r=y+s+65535)/65536),y=r-65536*s,s=Math.floor((r=m+s+65535)/65536),m=r-65536*s,s=Math.floor((r=v+s+65535)/65536),v=r-65536*s,s=Math.floor((r=w+s+65535)/65536),w=r-65536*s,n+=s-1+37*(s-1),s=Math.floor((r=n+(s=1)+65535)/65536),n=r-65536*s,s=Math.floor((r=o+s+65535)/65536),o=r-65536*s,s=Math.floor((r=a+s+65535)/65536),a=r-65536*s,s=Math.floor((r=c+s+65535)/65536),c=r-65536*s,s=Math.floor((r=h+s+65535)/65536),h=r-65536*s,s=Math.floor((r=u+s+65535)/65536),u=r-65536*s,s=Math.floor((r=d+s+65535)/65536),d=r-65536*s,s=Math.floor((r=l+s+65535)/65536),l=r-65536*s,s=Math.floor((r=f+s+65535)/65536),f=r-65536*s,s=Math.floor((r=p+s+65535)/65536),p=r-65536*s,s=Math.floor((r=g+s+65535)/65536),g=r-65536*s,s=Math.floor((r=b+s+65535)/65536),b=r-65536*s,s=Math.floor((r=y+s+65535)/65536),y=r-65536*s,s=Math.floor((r=m+s+65535)/65536),m=r-65536*s,s=Math.floor((r=v+s+65535)/65536),v=r-65536*s,s=Math.floor((r=w+s+65535)/65536),w=r-65536*s,n+=s-1+37*(s-1),e[0]=n,e[1]=o,e[2]=a,e[3]=c,e[4]=h,e[5]=u,e[6]=d,e[7]=l,e[8]=f,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=m,e[14]=v,e[15]=w}function f(e,t){let i=new Uint8Array(32),r=new Float64Array(80),s=n(),o=n(),f=n(),p=n(),g=n(),b=n();for(let t=0;t<31;t++)i[t]=e[t];i[31]=127&e[31]|64,i[0]&=248,function(e,t){for(let i=0;i<16;i++)e[i]=t[2*i]+(t[2*i+1]<<8);e[15]&=32767}(r,t);for(let e=0;e<16;e++)o[e]=r[e];s[0]=p[0]=1;for(let e=254;e>=0;--e){let t=i[e>>>3]>>>(7&e)&1;h(s,o,t),h(f,p,t),u(g,s,f),d(s,s,f),u(f,o,p),d(o,o,p),l(p,g,g),l(b,s,s),l(s,f,s),l(f,o,g),u(g,s,f),d(s,s,f),l(o,s,s),d(f,p,b),l(s,f,a),u(s,s,p),l(f,f,s),l(s,p,b),l(p,o,r),l(o,g,g),h(s,o,t),h(f,p,t)}for(let e=0;e<16;e++)r[e+16]=s[e],r[e+32]=f[e],r[e+48]=o[e],r[e+64]=p[e];let y=r.subarray(32),m=r.subarray(16);!function(e,t){let i=n();for(let e=0;e<16;e++)i[e]=t[e];for(let e=253;e>=0;e--)l(i,i,i),2!==e&&4!==e&&l(i,i,t);for(let t=0;t<16;t++)e[t]=i[t]}(y,y),l(m,m,y);let v=new Uint8Array(32);return!function(e,t){let i=n(),r=n();for(let e=0;e<16;e++)r[e]=t[e];c(r),c(r),c(r);for(let e=0;e<2;e++){i[0]=r[0]-65517;for(let e=1;e<15;e++)i[e]=r[e]-65535-(i[e-1]>>16&1),i[e-1]&=65535;i[15]=r[15]-32767-(i[14]>>16&1);let e=i[15]>>16&1;i[14]&=65535,h(r,i,1-e)}for(let t=0;t<16;t++)e[2*t]=255&r[t],e[2*t+1]=r[t]>>8}(v,m),v}t.Au=function(e){let i=(0,r.randomBytes)(32,e),n=function(e){if(e.length!==t.KS)throw Error("x25519: seed must be ".concat(t.KS," bytes"));let i=new Uint8Array(e);return{publicKey:f(i,o),secretKey:i}}(i);return(0,s.wipe)(i),n},t.gi=function(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.length!==t.kz)throw Error("X25519: incorrect secret key length");if(i.length!==t.kz)throw Error("X25519: incorrect public key length");let s=f(e,i);if(r){let e=0;for(let t=0;t<s.length;t++)e|=s[t];if(0===e)throw Error("X25519: invalid shared key")}return s}},70594:function(e,t,i){"use strict";function r(){return(null===i.g||void 0===i.g?void 0:i.g.crypto)||(null===i.g||void 0===i.g?void 0:i.g.msCrypto)||{}}function s(){let e=r();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=r,t.getSubtleCrypto=s,t.isBrowserCryptoAvailable=function(){return!!r()&&!!s()}},68405:function(e,t,i){"use strict";var r=i(51501);function s(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function n(){return void 0!==r&&void 0!==r.versions&&void 0!==r.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=s,t.isNode=n,t.isBrowser=function(){return!s()&&!n()}},70732:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(50547);r.__exportStar(i(70594),t),r.__exportStar(i(68405),t)},59325:function(e,t,i){"use strict";i.d(t,{EthereumProvider:function(){return E}});var r=i(17365),s=i(31018),n=i(9569);let o="".concat("wc","@2:").concat("ethereum_provider",":"),a=["eth_sendTransaction","personal_sign"],c=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],h=["chainChanged","accountsChanged"],u=["chainChanged","accountsChanged","message","disconnect","connect"];var d=Object.defineProperty,l=Object.defineProperties,f=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,y=(e,t,i)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,m=(e,t)=>{for(var i in t||(t={}))g.call(t,i)&&y(e,i,t[i]);if(p)for(var i of p(t))b.call(t,i)&&y(e,i,t[i]);return e},v=(e,t)=>l(e,f(t));function w(e){return Number(e[0].split(":")[1])}function _(e){return"0x".concat(e.toString(16))}class D{static async init(e){let t=new D;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,i){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),i)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);let{required:t,optional:i}=function(e){let{chains:t,optionalChains:i,methods:r,optionalMethods:n,events:o,optionalEvents:d,rpcMap:l}=e;if(!(0,s.qt8)(t))throw Error("Invalid chains");let f={chains:t,methods:r||a,events:o||h,rpcMap:m({},t.length?{[w(t)]:l[w(t)]}:{})},p=null==o?void 0:o.filter(e=>!h.includes(e)),g=null==r?void 0:r.filter(e=>!a.includes(e));if(!i&&!d&&!n&&!(null!=p&&p.length)&&!(null!=g&&g.length))return{required:t.length?f:void 0};let b=(null==p?void 0:p.length)&&(null==g?void 0:g.length)||!i,y={chains:[...new Set(b?f.chains.concat(i||[]):i)],methods:[...new Set(f.methods.concat(null!=n&&n.length?n:c))],events:[...new Set(f.events.concat(null!=d&&d.length?d:u))],rpcMap:l};return{required:t.length?f:void 0,optional:i.length?y:void 0}}(this.rpc);try{let r=await new Promise(async(r,s)=>{var n;this.rpc.showQrModal&&(null==(n=this.modal)||n.subscribeModal(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),s(Error("Connection request reset. Please try again.")))})),await this.signer.connect(v(m({namespaces:m({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:null==e?void 0:e.pairingTopic})).then(e=>{r(e)}).catch(e=>{s(Error(e.message))})});if(!r)return;let n=(0,s.guN)(r.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:n),this.setAccounts(n),this.events.emit("connect",{chainId:_(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:null==e?void 0:e.chains});try{let i=await new Promise(async(i,r)=>{var s;this.rpc.showQrModal&&(null==(s=this.modal)||s.subscribeModal(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),r(Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(v(m({},e),{chains:this.rpc.chains}),t).then(e=>{i(e)}).catch(e=>{r(Error(e.message))})}),r=i.session;if(r){let e=(0,s.guN)(r.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:_(this.chainId)})}return i}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{let{params:t}=e,{event:i}=t;"accountsChanged"===i.name?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===i.name?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{let t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",_(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",v(m({},(0,s.D6H)("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(i=this.modal)||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith("".concat(this.namespace,":"))}formatChainId(e){return"".concat(this.namespace,":").concat(e)}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){let t=e.filter(e=>this.isCompatibleChainId(e)).map(e=>this.parseChainId(e));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",_(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){let t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){let[t,i,r]=e.split(":");return{chainId:"".concat(t,":").concat(i),address:r}}setAccounts(e){this.accounts=e.filter(e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId).map(e=>this.parseAccountId(e).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;let r=null!=(t=null==e?void 0:e.chains)?t:[],s=null!=(i=null==e?void 0:e.optionalChains)?i:[],n=r.concat(s);if(!n.length)throw Error("No chains specified in either `chains` or `optionalChains`");let o=r.length?(null==e?void 0:e.methods)||a:[],c=r.length?(null==e?void 0:e.events)||h:[],u=(null==e?void 0:e.optionalMethods)||[],d=(null==e?void 0:e.optionalEvents)||[],l=(null==e?void 0:e.rpcMap)||this.buildRpcMap(n,e.projectId),f=(null==e?void 0:e.qrModalOptions)||void 0;return{chains:null==r?void 0:r.map(e=>this.formatChainId(e)),optionalChains:s.map(e=>this.formatChainId(e)),methods:o,events:c,optionalMethods:u,optionalEvents:d,rpcMap:l,showQrModal:!!(null!=e&&e.showQrModal),qrModalOptions:f,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){let i={};return e.forEach(e=>{i[e]=this.getRpcUrl(e,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?w(this.rpc.chains):w(this.rpc.optionalChains),this.signer=await n.k.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{let{WalletConnectModal:t}=await i.e(1755).then(i.bind(i,21755));e=t}catch(e){throw Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(m({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(e){throw this.signer.logger.error(e),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;let{chains:t,optionalChains:i,rpcMap:r}=e;t&&(0,s.qt8)(t)&&(this.rpc.chains=t.map(e=>this.formatChainId(e)),t.forEach(e=>{this.rpc.rpcMap[e]=(null==r?void 0:r[e])||this.getRpcUrl(e)})),i&&(0,s.qt8)(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=null==i?void 0:i.map(e=>this.formatChainId(e)),i.forEach(e=>{this.rpc.rpcMap[e]=(null==r?void 0:r[e])||this.getRpcUrl(e)}))}getRpcUrl(e,t){var i;return(null==(i=this.rpc.rpcMap)?void 0:i[e])||"".concat("https://rpc.walletconnect.org/v1/","?chainId=eip155:").concat(e,"&projectId=").concat(t||this.rpc.projectId)}async loadPersistedSession(){if(this.session)try{let e=await this.signer.client.core.storage.getItem("".concat(this.STORAGE_KEY,"/chainId")),t=this.session.namespaces["".concat(this.namespace,":").concat(e)]?this.session.namespaces["".concat(this.namespace,":").concat(e)]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:null==t?void 0:t.accounts),this.setAccounts(null==t?void 0:t.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(e=>this.signer.logger.warn(e))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem("".concat(this.STORAGE_KEY,"/chainId"),this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(e=>this.parseAccount(e))}constructor(){this.events=new r.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=o,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}}let E=D},20081:function(e,t,i){"use strict";i.d(t,{Z:function(){return m},k:function(){return m}});var r=i(17365),s=i(21664),n=i.n(s),o=i(2860),a=i(73500),c=Object.defineProperty,h=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,p=(e,t,i)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,g=(e,t)=>{for(var i in t||(t={}))l.call(t,i)&&p(e,i,t[i]);if(d)for(var i of d(t))f.call(t,i)&&p(e,i,t[i]);return e},b=(e,t)=>h(e,u(t));let y={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class m{get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;await this.register(e)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{let t=(0,o.u)(e),i=await (await n()(this.url,b(g({},y),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}}async register(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;if(!(0,a.isHttpUrl)(e))throw Error("Provided URL is not compatible with HTTP connection: ".concat(e));if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(Error("HTTP connection is missing or invalid"));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=(0,o.u)({id:1,jsonrpc:"2.0",method:"test",params:[]});await n()(e,b(g({},y),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,o.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let i=this.parseError(t),r=i.message||i.toString(),s=(0,a.formatJsonRpcError)(e,r);this.events.emit("payload",s)}parseError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.url;return(0,a.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new r.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,a.isHttpUrl)(e))throw Error("Provided URL is not compatible with HTTP connection: ".concat(e));this.url=e,this.disableProviderPing=t}}},75101:function(e,t,i){"use strict";i.d(t,{r:function(){return n}});var r=i(17365),s=i(73500);class n extends s.IJsonRpcProvider{async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict((0,s.formatJsonRpcRequest)(e.method,e.params||[],e.id||(0,s.getBigIntRpcId)().toString()),t)}async requestStrict(e,t){return new Promise(async(i,r)=>{if(!this.connection.connected)try{await this.open()}catch(e){r(e)}this.events.on("".concat(e.id),e=>{(0,s.isJsonRpcError)(e)?r(e.error):i(e.result)});try{await this.connection.send(e,t)}catch(e){r(e)}})}setConnection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;return e}onPayload(e){this.events.emit("payload",e),(0,s.isJsonRpcResponse)(e)?this.events.emit("".concat(e.id),e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error("WebSocket connection closed abnormally with code: ".concat(e.code," ").concat(e.reason?"(".concat(e.reason,")"):""))),this.events.emit("disconnect")}async open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection;this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}constructor(e){super(e),this.events=new r.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}}},81294:function(e,t,i){"use strict";i.d(t,{CA:function(){return s},JV:function(){return a},O4:function(){return r},dQ:function(){return n},xK:function(){return o}});let r="INTERNAL_ERROR",s="SERVER_ERROR",n=[-32700,-32600,-32601,-32602,-32603],o={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[r]:{code:-32603,message:"Internal error"},[s]:{code:-32e3,message:"Server error"}},a=s},95172:function(e,t,i){"use strict";var r=i(70732);i.o(r,"IJsonRpcProvider")&&i.d(t,{IJsonRpcProvider:function(){return r.IJsonRpcProvider}}),i.o(r,"formatJsonRpcError")&&i.d(t,{formatJsonRpcError:function(){return r.formatJsonRpcError}}),i.o(r,"formatJsonRpcRequest")&&i.d(t,{formatJsonRpcRequest:function(){return r.formatJsonRpcRequest}}),i.o(r,"formatJsonRpcResult")&&i.d(t,{formatJsonRpcResult:function(){return r.formatJsonRpcResult}}),i.o(r,"getBigIntRpcId")&&i.d(t,{getBigIntRpcId:function(){return r.getBigIntRpcId}}),i.o(r,"isHttpUrl")&&i.d(t,{isHttpUrl:function(){return r.isHttpUrl}}),i.o(r,"isJsonRpcError")&&i.d(t,{isJsonRpcError:function(){return r.isJsonRpcError}}),i.o(r,"isJsonRpcRequest")&&i.d(t,{isJsonRpcRequest:function(){return r.isJsonRpcRequest}}),i.o(r,"isJsonRpcResponse")&&i.d(t,{isJsonRpcResponse:function(){return r.isJsonRpcResponse}}),i.o(r,"isJsonRpcResult")&&i.d(t,{isJsonRpcResult:function(){return r.isJsonRpcResult}}),i.o(r,"isLocalhostUrl")&&i.d(t,{isLocalhostUrl:function(){return r.isLocalhostUrl}}),i.o(r,"isReactNative")&&i.d(t,{isReactNative:function(){return r.isReactNative}}),i.o(r,"isWsUrl")&&i.d(t,{isWsUrl:function(){return r.isWsUrl}}),i.o(r,"payloadId")&&i.d(t,{payloadId:function(){return r.payloadId}})},8156:function(e,t,i){"use strict";i.d(t,{CX:function(){return a},L2:function(){return o},by:function(){return n},i5:function(){return s}});var r=i(81294);function s(e){return r.dQ.includes(e)}function n(e){return Object.keys(r.xK).includes(e)?r.xK[e]:r.xK[r.JV]}function o(e){return Object.values(r.xK).find(t=>t.code===e)||r.xK[r.JV]}function a(e,t,i){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error("Unavailable ".concat(i," RPC url at ").concat(t)):e}},41898:function(e,t,i){"use strict";i.d(t,{CS:function(){return o},RI:function(){return h},o0:function(){return n},sT:function(){return a},tm:function(){return c}});var r=i(8156),s=i(81294);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return BigInt(n(e))}function a(e,t,i){return{id:i||n(),jsonrpc:"2.0",method:e,params:t}}function c(e,t){return{id:e,jsonrpc:"2.0",result:t}}function h(e,t,i){var n;return{id:e,jsonrpc:"2.0",error:void 0===(n=t)?(0,r.by)(s.O4):("string"==typeof n&&(n=Object.assign(Object.assign({},(0,r.by)(s.CA)),{message:n})),void 0!==i&&(n.data=i),(0,r.i5)(n.code)&&(n=(0,r.L2)(n.code)),n)}}},73500:function(e,t,i){"use strict";i.d(t,{IJsonRpcProvider:function(){return o.x0},formatJsonRpcError:function(){return n.RI},formatJsonRpcRequest:function(){return n.sT},formatJsonRpcResult:function(){return n.tm},getBigIntRpcId:function(){return n.CS},isHttpUrl:function(){return a.jK},isJsonRpcError:function(){return c.jg},isJsonRpcRequest:function(){return c.DW},isJsonRpcResponse:function(){return c.u},isJsonRpcResult:function(){return c.k4},isLocalhostUrl:function(){return a.JF},isWsUrl:function(){return a.UZ},parseConnectionError:function(){return r.CX},payloadId:function(){return n.o0}}),i(81294);var r=i(8156),s=i(95172);i.o(s,"IJsonRpcProvider")&&i.d(t,{IJsonRpcProvider:function(){return s.IJsonRpcProvider}}),i.o(s,"formatJsonRpcError")&&i.d(t,{formatJsonRpcError:function(){return s.formatJsonRpcError}}),i.o(s,"formatJsonRpcRequest")&&i.d(t,{formatJsonRpcRequest:function(){return s.formatJsonRpcRequest}}),i.o(s,"formatJsonRpcResult")&&i.d(t,{formatJsonRpcResult:function(){return s.formatJsonRpcResult}}),i.o(s,"getBigIntRpcId")&&i.d(t,{getBigIntRpcId:function(){return s.getBigIntRpcId}}),i.o(s,"isHttpUrl")&&i.d(t,{isHttpUrl:function(){return s.isHttpUrl}}),i.o(s,"isJsonRpcError")&&i.d(t,{isJsonRpcError:function(){return s.isJsonRpcError}}),i.o(s,"isJsonRpcRequest")&&i.d(t,{isJsonRpcRequest:function(){return s.isJsonRpcRequest}}),i.o(s,"isJsonRpcResponse")&&i.d(t,{isJsonRpcResponse:function(){return s.isJsonRpcResponse}}),i.o(s,"isJsonRpcResult")&&i.d(t,{isJsonRpcResult:function(){return s.isJsonRpcResult}}),i.o(s,"isLocalhostUrl")&&i.d(t,{isLocalhostUrl:function(){return s.isLocalhostUrl}}),i.o(s,"isReactNative")&&i.d(t,{isReactNative:function(){return s.isReactNative}}),i.o(s,"isWsUrl")&&i.d(t,{isWsUrl:function(){return s.isWsUrl}}),i.o(s,"payloadId")&&i.d(t,{payloadId:function(){return s.payloadId}});var n=i(41898),o=i(47620),a=i(91624),c=i(71198)},47620:function(e,t,i){"use strict";i.d(t,{x0:function(){return n}});class r{}class s extends r{constructor(){super()}}class n extends s{constructor(e){super()}}},91624:function(e,t,i){"use strict";function r(e,t){let i=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==i&&new RegExp(t).test(i)}function s(e){return r(e,"^https?:")}function n(e){return r(e,"^wss?:")}function o(e){return RegExp("wss?://localhost(:d{2,5})?").test(e)}i.d(t,{JF:function(){return o},UZ:function(){return n},jK:function(){return s}})},71198:function(e,t,i){"use strict";function r(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function s(e){return r(e)&&"method"in e}function n(e){return r(e)&&(o(e)||a(e))}function o(e){return"result"in e}function a(e){return"error"in e}i.d(t,{DW:function(){return s},jg:function(){return a},k4:function(){return o},u:function(){return n}})},74839:function(e,t,i){"use strict";i.d(t,{Ep:function(){return E},Fd:function(){return D},Rt:function(){return S},gw:function(){return s.a},jI:function(){return _}});var r=i(62156),s=i.n(r),n=i(2860);let o={level:"info"},a="custom_context";class c{get value(){return this.nodeValue}get size(){return this.sizeInBytes}constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}}class h{append(e){let t=new c(e);if(t.size>this.maxSizeInBytes)throw Error("[LinkedList] Value too big to insert into list: ".concat(e," with size ").concat(t.size));for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=t):this.head=t,this.tail=t,this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}}class u{forwardToConsole(e,t){t===r.levels.values.error?console.error(e):t===r.levels.values.warn?console.warn(e):t===r.levels.values.debug?console.debug(e):t===r.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append((0,n.u)({timestamp:new Date().toISOString(),log:e}));let t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new h(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push((0,n.u)({extraMetadata:e})),new Blob(t,{type:"application/json"})}constructor(e,t=1024e3){this.level=null!=e?e:"error",this.levelValue=r.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new h(this.MAX_LOG_SIZE_IN_BYTES)}}class d{write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=t,i.download="walletconnect-logs-".concat(new Date().toISOString(),".txt"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}constructor(e,t=1024e3){this.baseChunkLogger=new u(e,t)}}var l=Object.defineProperty,f=Object.defineProperties,p=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,m=(e,t,i)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,v=(e,t)=>{for(var i in t||(t={}))b.call(t,i)&&m(e,i,t[i]);if(g)for(var i of g(t))y.call(t,i)&&m(e,i,t[i]);return e},w=(e,t)=>f(e,p(t));function _(e){return w(v({},e),{level:(null==e?void 0:e.level)||o.level})}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return typeof e.bindings>"u"?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return e[t]||""}(e,t):e.bindings().context||""}function E(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,r=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,r=D(e,i);return r.trim()?"".concat(r,"/").concat(t):t}(e,t,i);return function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return e[i]=t,e}(e.child({context:r}),r,i)}function S(e){return"u">typeof e.loggerOverride&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:function(e){var t,i;let r=new d(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:s()(w(v({},e.opts),{level:"trace",browser:w(v({},null==(i=e.opts)?void 0:i.browser),{write:e=>r.write(e)})})),chunkLoggerController:r}}(e)}},49979:function(e,t,i){"use strict";i.d(t,{iO:function(){return r}});let r={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}}},70460:function(e,t,i){"use strict";i.d(t,{decodeJWT:function(){return y},encodeIss:function(){return b},generateKeyPair:function(){return m},signJWT:function(){return v}});var r=i(63193),s=i(92090),n=i(70435);let o="base64url",a="utf8",c="utf8",h="base58btc";var u=i(46105),d=i(20023),l=i(57564),f=i(2860);function p(e){return(0,f.D)((0,d.B)((0,l.m)(e,o),a))}function g(e){return(0,d.B)((0,l.m)((0,f.u)(e),a),o)}function b(e){let t=(0,l.m)("K36",h);return["did","key","z"+(0,d.B)((0,u.z)([t,e]),h)].join(":")}function y(e){var t;let i=e.split("."),r=p(i[0]);return{header:r,payload:p(i[1]),signature:(t=i[2],(0,l.m)(t,o)),data:(0,l.m)(i.slice(0,2).join("."),c)}}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.randomBytes)(32);return r._w(e)}async function v(e,t,i,s){var a,h,u;let f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,n.fromMiliseconds)(Date.now()),p={alg:"EdDSA",typ:"JWT"},y={iss:b(s.publicKey),sub:e,aud:t,iat:f,exp:f+i},m=(a={header:p,payload:y},(0,l.m)([g(a.header),g(a.payload)].join("."),c));return[g((h={header:p,payload:y,signature:r.Xx(s.secretKey,m)}).header),g(h.payload),(u=h.signature,(0,d.B)(u,o))].join(".")}i(69685)},69685:function(){},2860:function(e,t,i){"use strict";i.d(t,{D:function(){return n},u:function(){return o}});let r=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),s=e=>JSON.parse(e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3'),(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t);function n(e){if("string"!=typeof e)throw Error("Cannot safe json parse value of type ".concat(typeof e));try{return s(e)}catch(t){return e}}function o(e){return"string"==typeof e?e:r(e)||""}},48391:function(e,t,i){"use strict";let r;i.d(t,{lO:function(){return im},ZP:function(){return iK}});var s=i(17365),n=i.n(s),o=i(70435);class a{}class c extends a{constructor(e){super()}}let h=o.FIVE_SECONDS,u={pulse:"heartbeat_pulse"};class d extends c{static async init(e){let t=new d(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,o.toMiliseconds)(this.interval))}pulse(){this.events.emit(u.pulse)}constructor(e){super(e),this.events=new s.EventEmitter,this.interval=h,this.interval=(null==e?void 0:e.interval)||h}}let l=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,f=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,p=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function g(e,t){if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){console.warn('[destr] Dropping "'.concat(e,'" key to prevent prototype pollution.'));return}return t}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)return e;let i=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return i.slice(1,-1);if(i.length<=9){let e=i.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!p.test(e)){if(t.strict)throw SyntaxError("[destr] Invalid JSON");return e}try{if(l.test(e)||f.test(e)){if(t.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(e,g)}return JSON.parse(e)}catch(i){if(t.strict)throw i;return e}}var y=i(72285).Buffer;function m(e){for(var t,i=arguments.length,r=Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];try{return(t=e(...r))&&"function"==typeof t.then?t:Promise.resolve(t)}catch(e){return Promise.reject(e)}}function v(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return v(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}let w="base64:";function _(e){var t;return e&&(null===(t=e.split("?")[0])||void 0===t?void 0:t.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function D(e){return(e=_(e))?e+":":""}let E=()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem(t){var i;return null!==(i=e.get(t))&&void 0!==i?i:null},getItemRaw(t){var i;return null!==(i=e.get(t))&&void 0!==i?i:null},setItem(t,i){e.set(t,i)},setItemRaw(t,i){e.set(t,i)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function S(e,t,i){return e.watch?e.watch((e,r)=>t(e,i+r)):()=>{}}async function I(e){"function"==typeof e.dispose&&await m(e.dispose)}function M(e){return new Promise((t,i)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>i(e.error)})}function A(e,t){let i=indexedDB.open(e);i.onupgradeneeded=()=>i.result.createObjectStore(t);let r=M(i);return(e,i)=>r.then(r=>i(r.transaction(t,e).objectStore(t)))}function x(){return r||(r=A("keyval-store","keyval")),r}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x();return t("readonly",t=>M(t.get(e)))}var R=i(2860),O=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.base&&t.base.length>0?"".concat(t.base,":"):"",r=e=>i+e;return t.dbName&&t.storeName&&(e=A(t.dbName,t.storeName)),{name:"idb-keyval",options:t,hasItem:async t=>!(typeof await C(r(t),e)>"u"),async getItem(t){var i;return null!==(i=await C(r(t),e))&&void 0!==i?i:null},setItem:(t,i)=>(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x();return i("readwrite",i=>(i.put(t,e),M(i.transaction)))})(r(t),i,e),removeItem:t=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x();return t("readwrite",t=>(t.delete(e),M(t.transaction)))})(r(t),e),getKeys:()=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return e("readonly",e=>{var t;if(e.getAllKeys)return M(e.getAllKeys());let i=[];return(t=e=>i.push(e.key),e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},M(e.transaction)).then(()=>i)})})(e),clear:()=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return e("readwrite",e=>(e.clear(),M(e.transaction)))})(e)}};class P{async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,R.u)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}constructor(){this.indexedDb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={mounts:{"":e.driver||E()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},i=e=>{for(let i of t.mountpoints)if(e.startsWith(i))return{base:i,relativeKey:e.slice(i.length),driver:t.mounts[i]};return{base:"",relativeKey:e,driver:t.mounts[""]}},r=(e,i)=>t.mountpoints.filter(t=>t.startsWith(e)||i&&e.startsWith(t)).map(i=>({relativeBase:e.length>i.length?e.slice(i.length):void 0,mountpoint:i,driver:t.mounts[i]})),s=(e,i)=>{if(t.watching)for(let r of(i=_(i),t.watchListeners))r(e,i)},n=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await S(t.mounts[e],s,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,r)=>{let s=new Map,n=e=>{let t=s.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},s.set(e.base,t)),t};for(let r of e){let e="string"==typeof r,s=_(e?r:r.key),o=e?void 0:r.value,a=e||!r.options?t:{...t,...r.options},c=i(s);n(c).items.push({key:s,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...s.values()].map(e=>r(e))).then(e=>e.flat())},c={hasItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{relativeKey:r,driver:s}=i(e=_(e));return m(s.hasItem,r,t)},getItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{relativeKey:r,driver:s}=i(e=_(e));return m(s.getItem,r,t).then(e=>b(e))},getItems(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(e,t,e=>e.driver.getItems?m(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return _(t.join(":"))}(e.base,t.key),value:b(t.value)}))):Promise.all(e.items.map(t=>m(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:b(e)})))))},getItemRaw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{relativeKey:r,driver:s}=i(e=_(e));return s.getItemRaw?m(s.getItemRaw,r,t):m(s.getItem,r,t).then(e=>{var t;return"string"==typeof e&&e.startsWith(w)?(t=e.slice(w.length),globalThis.Buffer?y.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))):e})},async setItem(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)return c.removeItem(e);let{relativeKey:n,driver:o}=i(e=_(e));o.setItem&&(await m(o.setItem,n,v(t),r),o.watch||s("update",e))},async setItems(e,t){await a(e,t,async e=>{if(e.driver.setItems)return m(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:v(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>m(e.driver.setItem,t.relativeKey,v(t.value),t.options)))})},async setItemRaw(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)return c.removeItem(e,r);let{relativeKey:n,driver:o}=i(e=_(e));if(o.setItemRaw)await m(o.setItemRaw,n,t,r);else{if(!o.setItem)return;await m(o.setItem,n,"string"==typeof t?t:w+(globalThis.Buffer?y.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))),r)}o.watch||s("update",e)},async removeItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:r,driver:n}=i(e=_(e));n.removeItem&&(await m(n.removeItem,r,t),(t.removeMeta||t.removeMata)&&await m(n.removeItem,r+"$",t),n.watch||s("remove",e))},async getMeta(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:r,driver:s}=i(e=_(e)),n=Object.create(null);if(s.getMeta&&Object.assign(n,await m(s.getMeta,r,t)),!t.nativeOnly){let e=await m(s.getItem,r+"$",t).then(e=>b(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(n,e))}return n},setMeta(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setItem(e+"$",t,i)},removeMeta(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.removeItem(e+"$",t)},async getKeys(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r(e=D(e),!0),s=[],n=[],o=!0;for(let e of i){var a;for(let i of((null===(a=e.driver.flags)||void 0===a?void 0:a.maxDepth)||(o=!1),await m(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+_(i);s.some(e=>t.startsWith(e))||n.push(t)}s=[e.mountpoint,...s.filter(t=>!t.startsWith(e.mountpoint))]}let c=void 0!==t.maxDepth&&!o;return n.filter(i=>{var r;return(!c||function(e,t){if(void 0===t)return!0;let i=0,r=e.indexOf(":");for(;r>-1;)i++,r=e.indexOf(":",r+1);return i<=t}(i,t.maxDepth))&&((r=e)?i.startsWith(r)&&"$"!==i[i.length-1]:"$"!==i[i.length-1])})},async clear(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=D(e),await Promise.all(r(e,!1).map(async e=>e.driver.clear?m(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(i=>e.driver.removeItem(i,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>I(e)))},watch:async e=>(await n(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,i){if((e=D(e))&&t.mounts[e])throw Error("already mounted at ".concat(e));return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=i,t.watching&&Promise.resolve(S(i,s,e)).then(i=>{t.unwatch[e]=i}).catch(console.error),c},async unmount(e){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if((e=D(e))&&t.mounts[e]){if(t.watching&&e in t.unwatch){var r,s;null===(r=(s=t.unwatch)[e])||void 0===r||r.call(s),delete t.unwatch[e]}i&&await I(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e]}},getMount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=i(e=_(e)+":");return{driver:t.driver,base:t.base}},getMounts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e=_(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint}))},keys:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.getKeys(e,t)},get:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.getItem(e,t)},set:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c.setItem(e,t,i)},has:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.hasItem(e,t)},del:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.removeItem(e,t)},remove:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.removeItem(e,t)}};return c}({driver:O({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}}var T="u">typeof globalThis?globalThis:window,N={exports:{}};function k(e){var t;return[e[0],(0,R.D)(null!=(t=e[1])?t:"")]}!function(){function e(){}e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof T&&T.localStorage?N.exports=T.localStorage:window.localStorage?N.exports=window.localStorage:N.exports=new e}();class L{async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(k)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return(0,R.D)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,R.u)(t))}async removeItem(e){this.localStorage.removeItem(e)}constructor(){this.localStorage=N.exports}}let q=async(e,t,i)=>{let r="wc_storage_version",s=await t.getItem(r);if(s&&s>=1){i(t);return}let n=await e.getKeys();if(!n.length){i(t);return}let o=[];for(;n.length;){let i=n.shift();if(!i)continue;let r=i.toLowerCase();if(r.includes("wc@")||r.includes("walletconnect")||r.includes("wc_")||r.includes("wallet_connect")){let r=await e.getItem(i);await t.setItem(i,r),o.push(i)}}await t.setItem(r,1),i(t),z(e,o)},z=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class j{async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new L;this.storage=e;try{let t=new P;q(e,t,this.setInitialized)}catch(e){this.initialized=!0}}}var U=i(74839);class F extends a{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class B extends a{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class K{constructor(e,t){this.logger=e,this.core=t}}class V extends a{constructor(e,t){super(),this.relayer=e,this.logger=t}}class H extends a{constructor(e){super()}}class J{constructor(e,t,i,r){this.core=e,this.logger=t,this.name=i}}class W extends a{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Y extends a{constructor(e,t){super(),this.core=e,this.logger=t}}class G{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}}class Q{constructor(e,t){this.projectId=e,this.logger=t}}class X{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}}class Z{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class ${constructor(e){this.client=e}}var ee=i(70460),et=i(31018),ei=i(33194),er=i(75101),es=i(73500);let en=()=>"u">typeof WebSocket||"u">typeof i.g&&"u">typeof i.g.WebSocket||"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,eo=e=>e.split("?")[0],ea="u">typeof WebSocket?WebSocket:"u">typeof i.g&&"u">typeof i.g.WebSocket?i.g.WebSocket:"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:i(18224);class ec{get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(Error("Connection already closed"));return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,R.u)(e))}catch(t){this.onError(e.id,t)}}register(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;if(!(0,es.isWsUrl)(e))throw Error("Provided URL is not compatible with WebSocket connection: ".concat(e));if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{let r=new URLSearchParams(e).get("origin"),s=(0,es.isReactNative)()?{headers:{origin:r}}:{rejectUnauthorized:!(0,es.isLocalhostUrl)(e)},n=new ea(e,[],s);en()?n.onerror=e=>{i(this.emitError(e.error))}:n.on("error",e=>{i(this.emitError(e))}),n.onopen=()=>{this.onOpen(n),t(n)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,R.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let i=this.parseError(t),r=i.message||i.toString(),s=(0,es.formatJsonRpcError)(e,r);this.events.emit("payload",s)}parseError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.url;return(0,es.parseConnectionError)(e,eo(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error((null==e?void 0:e.message)||"WebSocket connection failed for host: ".concat(eo(this.url))));return this.events.emit("register_error",t),t}constructor(e){if(this.url=e,this.events=new s.EventEmitter,this.registering=!1,!(0,es.isWsUrl)(e))throw Error("Provided URL is not compatible with WebSocket connection: ".concat(e));this.url=e}}var eh=i(55999),eu=i.n(eh);let ed="core",el="".concat("wc","@2:").concat(ed,":"),ef={logger:"error"},ep={database:":memory:"},eg="client_ed25519_seed",eb=o.ONE_DAY,ey=o.SIX_HOURS,em="wss://relay.walletconnect.org",ev={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},ew={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},e_="2.17.0",eD={link_mode:"link_mode",relay:"relay"},eE="WALLETCONNECT_LINK_MODE_APPS",eS={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},eI=1e3*o.FIVE_SECONDS,eM={wc_pairingDelete:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:o.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:o.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:o.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:o.ONE_DAY,prompt:!1,tag:0},res:{ttl:o.ONE_DAY,prompt:!1,tag:0}}},eA={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ex={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},eC={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},eR="https://verify.walletconnect.org",eO="".concat(eR,"/v3"),eP=["https://verify.walletconnect.com",eR],eT={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},eN={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},ek={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},eL={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},eq={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},ez={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"};var ej=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var s=0;s<e.length;s++){var n=e.charAt(s),o=n.charCodeAt(0);if(255!==i[o])throw TypeError(n+" is ambiguous");i[o]=s}var a=e.length,c=e.charAt(0),h=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var n=(e.length-t)*h+1>>>0,o=new Uint8Array(n);e[t];){var u=i[e.charCodeAt(t)];if(255===u)return;for(var d=0,l=n-1;(0!==u||d<s)&&-1!==l;l--,d++)u+=a*o[l]>>>0,o[l]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");s=d,t++}if(" "!==e[t]){for(var f=n-s;f!==n&&0===o[f];)f++;for(var p=new Uint8Array(r+(n-f)),g=r;f!==n;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var i=0,r=0,s=0,n=t.length;s!==n&&0===t[s];)s++,i++;for(var o=(n-s)*u+1>>>0,h=new Uint8Array(o);s!==n;){for(var d=t[s],l=0,f=o-1;(0!==d||l<r)&&-1!==f;f--,l++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw Error("Non-zero carry");r=l,s++}for(var p=o-r;p!==o&&0===h[p];)p++;for(var g=c.repeat(i);p<o;++p)g+=e.charAt(h[p]);return g},decodeUnsafe:d,decode:function(e){var i=d(e);if(i)return i;throw Error("Non-".concat(t," character"))}}};let eU=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},eF=e=>new TextEncoder().encode(e),eB=e=>new TextDecoder().decode(e);class eK{encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}}class eV{decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return eJ(this,e)}constructor(e,t,i){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}}class eH{or(e){return eJ(this,e)}decode(e){let t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}constructor(e){this.decoders=e}}let eJ=(e,t)=>new eH({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class eW{encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}constructor(e,t,i,r){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=r,this.encoder=new eK(e,t,i),this.decoder=new eV(e,t,r)}}let eY=e=>{let{name:t,prefix:i,encode:r,decode:s}=e;return new eW(t,i,r,s)},eG=e=>{let{prefix:t,name:i,alphabet:r}=e,{encode:s,decode:n}=ej(r,i);return eY({prefix:t,name:i,encode:s,decode:e=>eU(n(e))})},eQ=(e,t,i,r)=>{let s={};for(let e=0;e<t.length;++e)s[t[e]]=e;let n=e.length;for(;"="===e[n-1];)--n;let o=new Uint8Array(n*i/8|0),a=0,c=0,h=0;for(let t=0;t<n;++t){let n=s[e[t]];if(void 0===n)throw SyntaxError("Non-".concat(r," character"));c=c<<i|n,(a+=i)>=8&&(a-=8,o[h++]=255&c>>a)}if(a>=i||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},eX=(e,t,i)=>{let r="="===t[t.length-1],s=(1<<i)-1,n="",o=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],o+=8;o>i;)o-=i,n+=t[s&a>>o];if(o&&(n+=t[s&a<<i-o]),r)for(;n.length*i&7;)n+="=";return n},eZ=e=>{let{name:t,prefix:i,bitsPerChar:r,alphabet:s}=e;return eY({prefix:i,name:t,encode:e=>eX(e,s,r),decode:e=>eQ(e,s,r,t)})};var e$=Object.freeze({__proto__:null,identity:eY({prefix:"\x00",name:"identity",encode:e=>eB(e),decode:e=>eF(e)})}),e0=Object.freeze({__proto__:null,base2:eZ({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),e1=Object.freeze({__proto__:null,base8:eZ({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),e3=Object.freeze({__proto__:null,base10:eG({prefix:"9",name:"base10",alphabet:"0123456789"})}),e6=Object.freeze({__proto__:null,base16:eZ({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:eZ({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let e2=eZ({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),e5=eZ({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),e8=eZ({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),e4=eZ({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e9=eZ({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),e7=eZ({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var te=Object.freeze({__proto__:null,base32:e2,base32upper:e5,base32pad:e8,base32padupper:e4,base32hex:e9,base32hexupper:e7,base32hexpad:eZ({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:eZ({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:eZ({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),tt=Object.freeze({__proto__:null,base36:eG({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:eG({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),ti=Object.freeze({__proto__:null,base58btc:eG({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:eG({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let tr=eZ({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var ts=Object.freeze({__proto__:null,base64:tr,base64pad:eZ({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:eZ({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:eZ({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let tn=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),to=tn.reduce((e,t,i)=>(e[i]=t,e),[]),ta=tn.reduce((e,t,i)=>(e[t.codePointAt(0)]=i,e),[]);var tc=Object.freeze({__proto__:null,base256emoji:eY({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=to[t],"")},decode:function(e){let t=[];for(let i of e){let e=ta[i.codePointAt(0)];if(void 0===e)throw Error("Non-base256emoji character: ".concat(i));t.push(e)}return new Uint8Array(t)}})}),th={encode:function e(t,i,r){i=i||[],r=r||0;for(var s=r;t>=2147483648;)i[r++]=255&t|128,t/=128;for(;-128&t;)i[r++]=255&t|128,t>>>=7;return i[r]=0|t,e.bytes=r-s+1,i},decode:function e(t,i){var r,s=0,i=i||0,n=0,o=i,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");r=t[o++],s+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),n+=7}while(r>=128);return e.bytes=o-i,s},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let tu=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return th.encode(e,t,i),t},td=e=>th.encodingLength(e),tl=(e,t)=>{let i=t.byteLength,r=td(e),s=r+td(i),n=new Uint8Array(s+i);return tu(e,n,0),tu(i,n,r),n.set(t,s),new tf(e,i,t,n)};class tf{constructor(e,t,i,r){this.code=e,this.size=t,this.digest=i,this.bytes=r}}let tp=e=>{let{name:t,code:i,encode:r}=e;return new tg(t,i,r)};class tg{digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?tl(this.code,t):t.then(e=>tl(this.code,e))}throw Error("Unknown type, must be binary type")}constructor(e,t,i){this.name=e,this.code=t,this.encode=i}}let tb=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var ty=Object.freeze({__proto__:null,sha256:tp({name:"sha2-256",code:18,encode:tb("SHA-256")}),sha512:tp({name:"sha2-512",code:19,encode:tb("SHA-512")})}),tm=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:eU,digest:e=>tl(0,eU(e))}});new TextEncoder,new TextDecoder;let tv={...e$,...e0,...e1,...e3,...e6,...te,...tt,...ti,...ts,...tc};function tw(e,t,i,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:i},decoder:{decode:r}}}({...ty,...tm});let t_=tw("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),tD=tw("ascii","a",e=>{let t="a";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e=>{let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}),tE={utf8:t_,"utf-8":t_,hex:tv.base16,latin1:tD,ascii:tD,binary:tD,...tv};class tS{get context(){return(0,U.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,(0,et.KCv)(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?(0,et.IPd)(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=el,this.init=async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","".concat(this.name,": ").concat(e));throw Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=(0,U.Ep)(t,this.name)}}class tI{get context(){return(0,U.Fd)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(eg)}catch(t){e=(0,et.jdp)(),await this.keychain.set(eg,e)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",i=tE[t];if(!i)throw Error('Unsupported encoding "'.concat(t,'"'));return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):i.decoder.decode("".concat(i.prefix).concat(e))}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}constructor(e,t,i){this.core=e,this.logger=t,this.name="crypto",this.randomSessionIdentifier=(0,et.jdp)(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>{this.isInitialized();let e=await this.getClientSeed(),t=ee.generateKeyPair(e);return ee.encodeIss(t.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let e=(0,et.Au2)();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();let t=await this.getClientSeed(),i=ee.generateKeyPair(t),r=this.randomSessionIdentifier;return await ee.signJWT(r,e,eb,i)},this.generateSharedKey=(e,t,i)=>{this.isInitialized();let r=this.getPrivateKey(e),s=(0,et.m$A)(r,t);return this.setSymKey(s,i)},this.setSymKey=async(e,t)=>{this.isInitialized();let i=t||(0,et.YmJ)(e);return await this.keychain.set(i,e),i},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,i)=>{this.isInitialized();let r=(0,et.ENt)(i),s=(0,R.u)(t);if((0,et.Hs$)(r))return(0,et.Spz)(s,null==i?void 0:i.encoding);if((0,et.Q8x)(r)){let t=r.senderPublicKey,i=r.receiverPublicKey;e=await this.generateSharedKey(t,i)}let n=this.getSymKey(e),{type:o,senderPublicKey:a}=r;return(0,et.HIp)({type:o,symKey:n,message:s,senderPublicKey:a,encoding:null==i?void 0:i.encoding})},this.decode=async(e,t,i)=>{this.isInitialized();let r=(0,et.Llj)(t,i);if((0,et.Hs$)(r)){let e=(0,et.xQU)(t,null==i?void 0:i.encoding);return(0,R.D)(e)}if((0,et.Q8x)(r)){let t=r.receiverPublicKey,i=r.senderPublicKey;e=await this.generateSharedKey(t,i)}try{let r=this.getSymKey(e),s=(0,et.peR)({symKey:r,encoded:t,encoding:null==i?void 0:i.encoding});return(0,R.D)(s)}catch(t){this.logger.error("Failed to decode message from topic: '".concat(e,"', clientId: '").concat(await this.getClientId(),"'")),this.logger.error(t)}},this.getPayloadType=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.$dT,i=(0,et.vBi)({encoded:e,encoding:t});return(0,et.WGe)(i.type)},this.getPayloadSenderPublicKey=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.$dT,i=(0,et.vBi)({encoded:e,encoding:t});return i.senderPublicKey?(0,ei.BB)(i.senderPublicKey,et.AWt):void 0},this.core=e,this.logger=(0,U.Ep)(t,this.name),this.keychain=i||new tS(this.core,this.logger)}}class tM extends K{get context(){return(0,U.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,(0,et.KCv)(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?(0,et.IPd)(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=el,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e),this.logger.debug("Successfully Restored records for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug("Failed to Restore records for ".concat(this.name)),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();let i=(0,et.rjm)(t),r=this.messages.get(e);return typeof r>"u"&&(r={}),"u">typeof r[i]||(r[i]=t,this.messages.set(e,r),await this.persist()),i},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[(0,et.rjm)(t)]),this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=(0,U.Ep)(e,this.name),this.core=t}}class tA extends V{get context(){return(0,U.Fd)(this.logger)}rpcPublish(e,t,i,r,s,n,o,a){var c,h,u,d;let l={method:(0,et.cOS)(r.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:s,tag:n,attestation:a},id:o};return(0,et.o8e)(null==(c=l.params)?void 0:c.prompt)&&(null==(h=l.params)||delete h.prompt),(0,et.o8e)(null==(u=l.params)?void 0:u.tag)&&(null==(d=l.params)||delete d.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:l}),this.relayer.request(l)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:t,message:i,opts:r}=e;await this.publish(t,i,r)})}registerEventListeners(){this.relayer.core.heartbeat.on(u.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ev.connection_stalled);return}this.checkQueue()}),this.relayer.on(ev.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new s.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,o.toMiliseconds)(o.ONE_MINUTE),this.failedPublishTimeout=(0,o.toMiliseconds)(o.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(e,t,i)=>{var r;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:i}});let s=(null==i?void 0:i.ttl)||ey,n=(0,et._HE)(i),o=(null==i?void 0:i.prompt)||!1,a=(null==i?void 0:i.tag)||0,c=(null==i?void 0:i.id)||(0,es.getBigIntRpcId)().toString(),h={topic:e,message:t,opts:{ttl:s,relay:n,prompt:o,tag:a,id:c,attestation:null==i?void 0:i.attestation}},u="Failed to publish payload, please try again. id:".concat(c," tag:").concat(a),d=Date.now(),l,f=1;try{for(;void 0===l;){if(Date.now()-d>this.publishTimeout)throw Error(u);this.logger.trace({id:c,attempts:f},"publisher.publish - attempt ".concat(f)),l=await await (0,et.hFY)(this.rpcPublish(e,t,s,n,o,a,c,null==i?void 0:i.attestation).catch(e=>this.logger.warn(e)),this.publishTimeout,u),f++,l||await new Promise(e=>setTimeout(e,this.failedPublishTimeout))}this.relayer.events.emit(ev.publish,h),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:i}})}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(r=null==i?void 0:i.internal)&&r.throwOnFailedPublish)throw e;this.queue.set(c,h)}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=(0,U.Ep)(t,this.name),this.registerEventListeners()}}class tx{get topics(){return Array.from(this.map.keys())}constructor(){this.map=new Map,this.set=(e,t)=>{let i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let i=this.get(e);if(!this.exists(e,t))return;let r=i.filter(e=>e!==t);if(!r.length){this.map.delete(e);return}this.map.set(e,r)},this.clear=()=>{this.map.clear()}}}var tC=Object.defineProperty,tR=Object.defineProperties,tO=Object.getOwnPropertyDescriptors,tP=Object.getOwnPropertySymbols,tT=Object.prototype.hasOwnProperty,tN=Object.prototype.propertyIsEnumerable,tk=(e,t,i)=>t in e?tC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tL=(e,t)=>{for(var i in t||(t={}))tT.call(t,i)&&tk(e,i,t[i]);if(tP)for(var i of tP(t))tN.call(t,i)&&tk(e,i,t[i]);return e},tq=(e,t)=>tR(e,tO(t));class tz extends W{get context(){return(0,U.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch(e){}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let i=this.topicMap.get(e);await Promise.all(i.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{let r=(0,et._HE)(i);await this.rpcUnsubscribe(e,t,r);let s=(0,et.D6H)("USER_DISCONNECTED","".concat(this.name,", ").concat(e));await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eD.relay;i===eD.relay&&await this.restartToComplete();let r={method:(0,et.cOS)(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{let t=(0,et.rjm)(e+this.clientId);return i===eD.link_mode?(setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(r).catch(e=>this.logger.warn(e))},(0,o.toMiliseconds)(o.ONE_SECOND)),t):await await (0,et.hFY)(this.relayer.request(r).catch(e=>this.logger.warn(e)),this.subscribeTimeout)?t:null}catch(e){this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ev.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t=e[0].relay,i={method:(0,et.cOS)(t.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await (0,et.hFY)(this.relayer.request(i).catch(e=>this.logger.warn(e)),this.subscribeTimeout)}catch(e){this.relayer.events.emit(ev.connection_stalled)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let i=e[0].relay,r={method:(0,et.cOS)(i.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await (0,et.hFY)(this.relayer.request(r).catch(e=>this.logger.warn(e)),this.subscribeTimeout)}catch(e){this.relayer.events.emit(ev.connection_stalled)}return t}rpcUnsubscribe(e,t,i){let r={method:(0,et.cOS)(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}onSubscribe(e,t){this.setSubscription(e,tq(tL({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,tL({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,tL({},t)),this.topicMap.set(t.topic,e),this.events.emit(eS.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","".concat(this.name,": ").concat(e));throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(eS.deleted,tq(tL({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(eS.sync)}async reset(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){let e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(e),await this.batchSubscribe(e)}}this.events.emit(eS.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=(0,et.kCb)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error("".concat(this.name,": ").concat(JSON.stringify(this.values))),Error(e)}this.cached=e,this.logger.debug("Successfully Restored subscriptions for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug("Failed to Restore subscriptions for ".concat(this.name)),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let t=await this.rpcBatchSubscribe(e);(0,et.qt8)(t)&&this.onBatchSubscribe(t.map((t,i)=>tq(tL({},e[i]),{id:t})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace("Fetching batch messages for ".concat(e.length," subscriptions"));let t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(u.pulse,async()=>{await this.checkPending()}),this.events.on(eS.created,async e=>{let t=eS.created;this.logger.info("Emitting ".concat(t)),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(eS.deleted,async e=>{let t=eS.deleted;this.logger.info("Emitting ".concat(t)),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(){this.relayer.connected||this.relayer.connecting||await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{let t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new tx,this.events=new s.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=el,this.subscribeTimeout=(0,o.toMiliseconds)(o.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let i=(0,et._HE)(t),r={topic:e,relay:i,transportType:null==t?void 0:t.transportType};this.pending.set(e,r);let s=await this.rpcSubscribe(e,i,null==t?void 0:t.transportType);return"string"==typeof s&&(this.onSubscribe(s,r),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),s}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof(null==t?void 0:t.id)?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>{if(this.topics.includes(e))return!0;let t="".concat(this.pendingSubscriptionWatchLabel,"_").concat(e);return await new Promise((i,r)=>{let s=new o.Watch;s.start(t);let n=setInterval(()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(n),s.stop(t),i(!0)),s.elapsed(t)>=eI&&(clearInterval(n),s.stop(t),r(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,U.Ep)(t,this.name),this.clientId=""}}var tj=Object.defineProperty,tU=Object.getOwnPropertySymbols,tF=Object.prototype.hasOwnProperty,tB=Object.prototype.propertyIsEnumerable,tK=(e,t,i)=>t in e?tj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tV=(e,t)=>{for(var i in t||(t={}))tF.call(t,i)&&tK(e,i,t[i]);if(tU)for(var i of tU(t))tB.call(t,i)&&tK(e,i,t[i]);return e};class tH extends H{async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return(0,U.Fd)(this.logger)}get connected(){var e,t,i;return(null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.readyState)===1}get connecting(){var e,t,i;return(null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.readyState)===0}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:eD.relay})}async subscribe(e,t){var i;this.isInitialized(),(null==t?void 0:t.transportType)==="relay"&&await this.toEstablishConnection();let r=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"",s,n=t=>{t.topic===e&&(this.subscriber.off(eS.created,n),s())};return await Promise.all([new Promise(e=>{s=e,this.subscriber.on(eS.created,n)}),new Promise(async i=>{r=await this.subscriber.subscribe(e,t)||r,i()})]),r}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await (0,et.hFY)(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(e,t)=>{let i=()=>{this.provider.off(ew.disconnect,i),t(Error("Connection interrupted while trying to subscribe"))};this.provider.on(ew.disconnect,i),await (0,et.hFY)(this.provider.connect(),(0,o.toMiliseconds)(o.ONE_MINUTE),"Socket stalled when trying to connect to ".concat(this.relayUrl)).catch(e=>{t(e)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(e=>{this.logger.error(e),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){if(this.logger.error(e),this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(e.message))throw e}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await (0,et.Ggh)())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((null==e?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.trace("Batch of ".concat(t.length," message events sorted")),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e)}this.logger.trace("Batch of ".concat(t.length," message events processed"))}async onLinkMessageEvent(e,t){let{topic:i}=e;if(!t.sessionExists){let e=(0,et.gn4)(o.FIVE_MINUTES);await this.core.pairing.pairings.set(i,{topic:i,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(ev.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,t,i,r,s;if((0,et.UGU)())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(s=null==(r=null==(i=this.provider)?void 0:i.connection)?void 0:r.socket)||s.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e)}}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new er.r(new ec((0,et.$0m)({sdkVersion:e_,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){let{topic:t,message:i}=e;if(!i||0===i.length)return this.logger.debug("Ignoring invalid/empty message: ".concat(i)),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug("Ignoring message for non-subscribed topic ".concat(t)),!0;let r=this.messages.has(t,i);return r&&this.logger.debug("Ignoring duplicate message: ".concat(i)),r}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,es.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:i,message:r,publishedAt:s,attestation:n}=t.data,o={topic:i,message:r,publishedAt:s,transportType:eD.relay,attestation:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(tV({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else(0,es.isJsonRpcResponse)(e)&&this.events.emit(ev.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(ev.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let t=(0,es.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(ew.payload,this.onPayloadHandler),this.provider.off(ew.connect,this.onConnectHandler),this.provider.off(ew.disconnect,this.onDisconnectHandler),this.provider.off(ew.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await (0,et.Ggh)();(0,et.uwg)(async t=>{e!==t&&(e=t,t?await this.restartTransport().catch(e=>this.logger.error(e)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(ev.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},(0,o.toMiliseconds)(.1))))}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),this.connected||(this.connectionAttemptInProgress&&await new Promise(e=>{let t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new s.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=(0,o.toMiliseconds)(o.THIRTY_SECONDS+o.ONE_SECOND),this.request=async e=>{var t,i;this.logger.debug("Publishing Request Payload");let r=e.id||(0,es.getBigIntRpcId)().toString();await this.toEstablishConnection();try{let s=this.provider.request(e);this.requestsInFlight.set(r,{promise:s,request:e}),this.logger.trace({id:r,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - attempt to publish...");let n=await new Promise(async(e,t)=>{let i=()=>{t(Error("relayer.request - publish interrupted, id: ".concat(r)))};this.provider.on(ew.disconnect,i);let n=await s;this.provider.off(ew.disconnect,i),e(n)});return this.logger.trace({id:r,method:e.method,topic:null==(i=e.params)?void 0:i.topic},"relayer.request - published"),n}catch(e){throw this.logger.debug("Failed to Publish Request: ".concat(r)),e}finally{this.requestsInFlight.delete(r)}},this.resetPingTimeout=()=>{if((0,et.UGU)())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,i;null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)||i.terminate()},this.heartBeatTimeout)}catch(e){this.logger.warn(e)}},this.onPayloadHandler=e=>{this.onProviderPayload(e),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(ev.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit(ev.error,e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(ew.payload,this.onPayloadHandler),this.provider.on(ew.connect,this.onConnectHandler),this.provider.on(ew.disconnect,this.onDisconnectHandler),this.provider.on(ew.error,this.onProviderErrorHandler)},this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?(0,U.Ep)(e.logger,this.name):(0,U.gw)((0,U.jI)({level:e.logger||"error"})),this.messages=new tM(this.logger,e.core),this.subscriber=new tz(this,this.logger),this.publisher=new tA(this,this.logger),this.relayUrl=(null==e?void 0:e.relayUrl)||em,this.projectId=e.projectId,this.bundleId=(0,et.X_B)(),this.provider={}}}var tJ=Object.defineProperty,tW=Object.getOwnPropertySymbols,tY=Object.prototype.hasOwnProperty,tG=Object.prototype.propertyIsEnumerable,tQ=(e,t,i)=>t in e?tJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tX=(e,t)=>{for(var i in t||(t={}))tY.call(t,i)&&tQ(e,i,t[i]);if(tW)for(var i of tW(t))tG.call(t,i)&&tQ(e,i,t[i]);return e};class tZ extends J{get context(){return(0,U.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","Record was recently deleted - ".concat(this.name,": ").concat(e));throw this.logger.error(t),Error(t)}let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","".concat(this.name,": ").concat(e));throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=(0,et.kCb)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug("Successfully Restored value for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug("Failed to Restore value for ".concat(this.name)),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}constructor(e,t,i,r=el,s){super(e,t,i,r),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=el,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{this.getKey&&null!==e&&!(0,et.o8e)(e)?this.map.set(this.getKey(e),e):(0,et.xWS)(e)?this.map.set(e.id,e):(0,et.h1R)(e)&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(i=>eu()(t[i],e[i]))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let i=tX(tX({},this.getData(e)),t);this.map.set(e,i),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())},this.logger=(0,U.Ep)(t,this.name),this.storagePrefix=r,this.getKey=s}}class t${get context(){return(0,U.Fd)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(ev.message,async e=>{let{topic:t,message:i,transportType:r}=e;if(!this.pairings.keys.includes(t)||r===eD.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;let s=await this.core.crypto.decode(t,i);try{(0,es.isJsonRpcRequest)(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):(0,es.isJsonRpcResponse)(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(eC.expired,async e=>{let{topic:t}=(0,et.iPz)(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(eA.expire,{topic:t}))})}constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(n()),this.initialized=!1,this.storagePrefix=el,this.ignoredPayloadTypes=[et.rVF],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=e=>{let{methods:t}=e;this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...t])]},this.create=async e=>{this.isInitialized();let t=(0,et.jdp)(),i=await this.core.crypto.setSymKey(t),r=(0,et.gn4)(o.FIVE_MINUTES),s={protocol:"irn"},n={topic:i,expiry:r,relay:s,active:!1,methods:null==e?void 0:e.methods},a=(0,et.Bvr)({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:t,relay:s,expiryTimestamp:r,methods:null==e?void 0:e.methods});return this.events.emit(eA.create,n),this.core.expirer.set(i,r),await this.pairings.set(i,n),await this.core.relayer.subscribe(i,{transportType:null==e?void 0:e.transportType}),{topic:i,uri:a}},this.pair=async e=>{let t;this.isInitialized();let i=this.core.eventClient.createEvent({properties:{topic:null==e?void 0:e.uri,trace:[eT.pairing_started]}});this.isValidPair(e,i);let{topic:r,symKey:s,relay:n,expiryTimestamp:a,methods:c}=(0,et.heJ)(e.uri);if(i.props.properties.topic=r,i.addTrace(eT.pairing_uri_validation_success),i.addTrace(eT.pairing_uri_not_expired),this.pairings.keys.includes(r)){if(t=this.pairings.get(r),i.addTrace(eT.existing_pairing),t.active)throw i.setError(eN.active_pairing_already_exists),Error("Pairing already exists: ".concat(r,". Please try again with a new connection URI."));i.addTrace(eT.pairing_not_expired)}let h=a||(0,et.gn4)(o.FIVE_MINUTES),u={topic:r,relay:n,expiry:h,active:!1,methods:c};this.core.expirer.set(r,h),await this.pairings.set(r,u),i.addTrace(eT.store_new_pairing),e.activatePairing&&await this.activate({topic:r}),this.events.emit(eA.create,u),i.addTrace(eT.emit_inactive_pairing),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(s,r),i.addTrace(eT.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch(e){i.setError(eN.no_internet_connection)}try{await this.core.relayer.subscribe(r,{relay:n})}catch(e){throw i.setError(eN.subscribe_pairing_topic_failure),e}return i.addTrace(eT.subscribe_pairing_topic_success),u},this.activate=async e=>{let{topic:t}=e;this.isInitialized();let i=(0,et.gn4)(o.THIRTY_DAYS);this.core.expirer.set(t,i),await this.pairings.update(t,{active:!0,expiry:i})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:i,resolve:r,reject:s}=(0,et.H1S)();this.events.once((0,et.E0T)("pairing_ping",e),e=>{let{error:t}=e;t?s(t):r()}),await i()}},this.updateExpiry=async e=>{let{topic:t,expiry:i}=e;this.isInitialized(),await this.pairings.update(t,{expiry:i})},this.updateMetadata=async e=>{let{topic:t,metadata:i}=e;this.isInitialized(),await this.pairings.update(t,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",(0,et.D6H)("USER_DISCONNECTED")),await this.deletePairing(t))},this.formatUriFromPairing=e=>{this.isInitialized();let{topic:t,relay:i,expiry:r,methods:s}=e,n=this.core.crypto.keychain.get(t);return(0,et.Bvr)({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:n,relay:i,expiryTimestamp:r,methods:s})},this.sendRequest=async(e,t,i)=>{let r=(0,es.formatJsonRpcRequest)(t,i),s=await this.core.crypto.encode(e,r),n=eM[t].req;return this.core.history.set(e,r),this.core.relayer.publish(e,s,n),r.id},this.sendResult=async(e,t,i)=>{let r=(0,es.formatJsonRpcResult)(e,i),s=await this.core.crypto.encode(t,r),n=eM[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,s,n),await this.core.history.resolve(r)},this.sendError=async(e,t,i)=>{let r=(0,es.formatJsonRpcError)(e,i),s=await this.core.crypto.encode(t,r),n=await this.core.history.get(t,e),o=eM[n.request.method]?eM[n.request.method].res:eM.unregistered_method.res;await this.core.relayer.publish(t,s,o),await this.core.history.resolve(r)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,(0,et.D6H)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{let e=this.pairings.getAll().filter(e=>(0,et.BwD)(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))},this.onRelayEventRequest=e=>{let{topic:t,payload:i}=e;switch(i.method){case"wc_pairingPing":return this.onPairingPingRequest(t,i);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,i);default:return this.onUnknownRpcMethodRequest(t,i)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:i}=e,r=(await this.core.history.get(t,i.id)).request.method;return"wc_pairingPing"===r?this.onPairingPingResponse(t,i):this.onUnknownRpcMethodResponse(r)},this.onPairingPingRequest=async(e,t)=>{let{id:i}=t;try{this.isValidPing({topic:e}),await this.sendResult(i,e,!0),this.events.emit(eA.ping,{id:i,topic:e})}catch(t){await this.sendError(i,e,t),this.logger.error(t)}},this.onPairingPingResponse=(e,t)=>{let{id:i}=t;setTimeout(()=>{(0,es.isJsonRpcResult)(t)?this.events.emit((0,et.E0T)("pairing_ping",i),{}):(0,es.isJsonRpcError)(t)&&this.events.emit((0,et.E0T)("pairing_ping",i),{error:t.error})},500)},this.onPairingDeleteRequest=async(e,t)=>{let{id:i}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(eA.delete,{id:i,topic:e})}catch(t){await this.sendError(i,e,t),this.logger.error(t)}},this.onUnknownRpcMethodRequest=async(e,t)=>{let{id:i,method:r}=t;try{if(this.registeredMethods.includes(r))return;let t=(0,et.D6H)("WC_METHOD_UNSUPPORTED",r);await this.sendError(i,e,t),this.logger.error(t)}catch(t){await this.sendError(i,e,t),this.logger.error(t)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error((0,et.D6H)("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=(e,t)=>{var i;if(!(0,et.EJd)(e)){let{message:i}=(0,et.kCb)("MISSING_OR_INVALID","pair() params: ".concat(e));throw t.setError(eN.malformed_pairing_uri),Error(i)}if(!(0,et.jvJ)(e.uri)){let{message:i}=(0,et.kCb)("MISSING_OR_INVALID","pair() uri: ".concat(e.uri));throw t.setError(eN.malformed_pairing_uri),Error(i)}let r=(0,et.heJ)(null==e?void 0:e.uri);if(!(null!=(i=null==r?void 0:r.relay)&&i.protocol)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(eN.malformed_pairing_uri),Error(e)}if(!(null!=r&&r.symKey)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(eN.malformed_pairing_uri),Error(e)}if(null!=r&&r.expiryTimestamp&&(0,o.toMiliseconds)(null==r?void 0:r.expiryTimestamp)<Date.now()){t.setError(eN.pairing_expired);let{message:e}=(0,et.kCb)("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}},this.isValidPing=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","ping() params: ".concat(e));throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","disconnect() params: ".concat(e));throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!(0,et.M_r)(e,!1)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","pairing topic should be a string: ".concat(e));throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","pairing topic doesn't exist: ".concat(e));throw Error(t)}if((0,et.BwD)(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=(0,et.kCb)("EXPIRED","pairing topic: ".concat(e));throw Error(t)}},this.core=e,this.logger=(0,U.Ep)(t,this.name),this.pairings=new tZ(this.core,this.logger,this.name,this.storagePrefix)}}class t0 extends B{get context(){return(0,U.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let i={topic:t.topic,request:(0,es.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","".concat(this.name,": ").concat(e));throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ex.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=(0,et.kCb)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug("Successfully Restored records for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug("Failed to Restore records for ".concat(this.name)),this.logger.error(e)}}registerEventListeners(){this.events.on(ex.created,e=>{let t=ex.created;this.logger.info("Emitting ".concat(t)),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(ex.updated,e=>{let t=ex.updated;this.logger.info("Emitting ".concat(t)),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(ex.deleted,e=>{let t=ex.deleted;this.logger.info("Emitting ".concat(t)),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(u.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,o.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info("Deleting expired history log: ".concat(t.id)),this.records.delete(t.id),this.events.emit(ex.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new s.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=el,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:i}),this.records.has(t.id))return;let r={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:i,expiry:(0,et.gn4)(o.THIRTY_DAYS)};this.records.set(r.id,r),this.persist(),this.events.emit(ex.created,r)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,es.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(ex.updated,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(i=>{i.topic!==e||"u">typeof t&&i.id!==t||(this.records.delete(i.id),this.events.emit(ex.deleted,i))}),this.persist()},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,U.Ep)(t,this.name)}}class t1 extends Y{get context(){return(0,U.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return(0,et.Z42)(e);if("number"==typeof e)return(0,et.GqV)(e);let{message:t}=(0,et.kCb)("UNKNOWN_TYPE","Target type: ".concat(typeof e));throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(eC.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=(0,et.kCb)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug("Successfully Restored expirations for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug("Failed to Restore expirations for ".concat(this.name)),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","".concat(this.name,": ").concat(e));throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:i}=t;(0,o.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(eC.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(u.pulse,()=>this.checkExpirations()),this.events.on(eC.created,e=>{let t=eC.created;this.logger.info("Emitting ".concat(t)),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(eC.expired,e=>{let t=eC.expired;this.logger.info("Emitting ".concat(t)),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(eC.deleted,e=>{let t=eC.deleted;this.logger.info("Emitting ".concat(t)),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new s.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=el,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch(e){return!1}},this.set=(e,t)=>{this.isInitialized();let i=this.formatTarget(e),r={target:i,expiry:t};this.expirations.set(i,r),this.checkExpiry(i,r),this.events.emit(eC.created,{target:i,expiration:r})},this.get=e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),i=this.getExpiration(t);this.expirations.delete(t),this.events.emit(eC.deleted,{target:t,expiration:i})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,U.Ep)(t,this.name)}}var t3={};function t6(e){let t;return"u">typeof window[e]&&(t=window[e]),t}function t2(e){let t=t6(e);if(!t)throw Error("".concat(e," is not defined in Window"));return t}Object.defineProperty(t3,"__esModule",{value:!0}),t3.getLocalStorage=t3.getLocalStorageOrThrow=t3.getCrypto=t3.getCryptoOrThrow=t3.getLocation=t3.getLocationOrThrow=t3.getNavigator=t3.getNavigatorOrThrow=t5=t3.getDocument=t3.getDocumentOrThrow=t3.getFromWindowOrThrow=t3.getFromWindow=void 0,t3.getFromWindow=t6,t3.getFromWindowOrThrow=t2,t3.getDocumentOrThrow=function(){return t2("document")};var t5=t3.getDocument=function(){return t6("document")};t3.getNavigatorOrThrow=function(){return t2("navigator")},t3.getNavigator=function(){return t6("navigator")},t3.getLocationOrThrow=function(){return t2("location")},t3.getLocation=function(){return t6("location")},t3.getCryptoOrThrow=function(){return t2("crypto")},t3.getCrypto=function(){return t6("crypto")},t3.getLocalStorageOrThrow=function(){return t2("localStorage")},t3.getLocalStorage=function(){return t6("localStorage")};class t8 extends G{get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,U.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,o.toMiliseconds)(e))}constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,this.name="verify-api",this.verifyUrlV3=eO,this.storagePrefix=el,this.version=2,this.init=async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,o.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async e=>{if(!(0,et.jUY)()||this.isDevEnv)return;let t=window.location.origin,{id:i,decryptedId:r}=e,s="".concat(this.verifyUrlV3,"/attestation?projectId=").concat(this.core.projectId,"&origin=").concat(t,"&id=").concat(i,"&decryptedId=").concat(r);try{let e=t5(),t=this.startAbortTimer(5*o.ONE_SECOND),r=await new Promise((r,n)=>{let o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),n("attestation aborted")};this.abortController.signal.addEventListener("abort",o);let a=e.createElement("iframe");a.src=s,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});let c=s=>{if(s.data&&"string"==typeof s.data)try{let n=JSON.parse(s.data);if("verify_attestation"===n.type){if((0,ee.decodeJWT)(n.attestation).payload.id!==i)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),r(null===n.attestation?"":n.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",r),r}catch(e){this.logger.warn(e)}return""},this.resolve=async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:i,encryptedId:r}=e;if(""===t){this.logger.debug("resolve: attestationId is empty, skipping");return}if(t){if((0,ee.decodeJWT)(t).payload.id!==r)return;let e=await this.isValidJwtAttestation(t);if(e){if(!e.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return e}}if(!i)return;let s=this.getVerifyUrl(null==e?void 0:e.verifyUrl);return this.fetchAttestation(i,s)},this.fetchAttestation=async(e,t)=>{this.logger.debug("resolving attestation: ".concat(e," from url: ").concat(t));let i=this.startAbortTimer(5*o.ONE_SECOND),r=await fetch("".concat(t,"/attestation/").concat(e,"?v2Supported=true"),{signal:this.abortController.signal});return clearTimeout(i),200===r.status?await r.json():void 0},this.getVerifyUrl=e=>{let t=e||eR;return eP.includes(t)||(this.logger.info("verify url: ".concat(t,", not included in trusted list, assigning default: ").concat(eR)),t=eR),t},this.fetchPublicKey=async()=>{try{this.logger.debug("fetching public key from: ".concat(this.verifyUrlV3));let e=this.startAbortTimer(o.FIVE_SECONDS),t=await fetch("".concat(this.verifyUrlV3,"/public-key"),{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}},this.persistPublicKey=async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let i=await this.fetchAndPersistPublicKey();try{if(i)return this.validateAttestation(e,i)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e},this.validateAttestation=(e,t)=>{let i=(0,et.NbI)(e,t.publicKey),r={hasExpired:(0,o.toMiliseconds)(i.exp)<Date.now(),payload:i};if(r.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:r.payload.origin,isScam:r.payload.isScam,isVerified:r.payload.isVerified}},this.logger=(0,U.Ep)(t,this.name),this.abortController=new AbortController,this.isDevEnv=(0,et.h9F)(),this.init()}}class t4 extends Q{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context="echo",this.registerDeviceToken=async e=>{let{clientId:t,token:i,notificationType:r,enableEncrypted:s=!1}=e,n="".concat("https://echo.walletconnect.com","/").concat(this.projectId,"/clients");await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:r,token:i,always_raw:s})})},this.logger=(0,U.Ep)(t,this.context)}}var t9=Object.defineProperty,t7=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,ii=(e,t,i)=>t in e?t9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ir=(e,t)=>{for(var i in t||(t={}))ie.call(t,i)&&ii(e,i,t[i]);if(t7)for(var i of t7(t))it.call(t,i)&&ii(e,i,t[i]);return e};class is extends X{get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,this.context="event-client",this.storagePrefix=el,this.storageVersion=.1,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!(0,et.h9F)())try{let e={eventId:(0,et.k$y)(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:(0,et.oIp)(this.core.relayer.protocol,this.core.relayer.version,e_)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}},this.createEvent=e=>{let{event:t="ERROR",type:i="",properties:{topic:r,trace:s}}=e,n=(0,et.k$y)(),o=this.core.projectId||"",a=ir({eventId:n,timestamp:Date.now(),props:{event:t,type:i,properties:{topic:r,trace:s}},bundleId:o,domain:this.getAppDomain()},this.setMethods(n));return this.telemetryEnabled&&(this.events.set(n,a),this.shouldPersist=!0),a},this.getEvent=e=>{let{eventId:t,topic:i}=e;if(t)return this.events.get(t);let r=Array.from(this.events.values()).find(e=>e.props.properties.topic===i);if(r)return ir(ir({},r),this.setMethods(r.eventId))},this.deleteEvent=e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(u.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,o.fromMiliseconds)(Date.now())-(0,o.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})},this.setMethods=e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}),this.addTrace=(e,t)=>{let i=this.events.get(e);i&&(i.props.properties.trace.push(t),this.events.set(e,i),this.shouldPersist=!0)},this.setError=(e,t)=>{let i=this.events.get(e);i&&(i.props.type=t,i.timestamp=Date.now(),this.events.set(e,i),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,ir(ir({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}},this.submit=async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,i]of this.events)i.props.type&&e.push(i);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}},this.sendEvent=async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch("".concat("https://pulse.walletconnect.org/batch","?projectId=").concat(this.core.projectId,"&st=events_sdk&sv=js-").concat(e_).concat(t),{method:"POST",body:JSON.stringify(e)})},this.getAppDomain=()=>(0,et.DaH)().url,this.logger=(0,U.Ep)(t,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}}var io=Object.defineProperty,ia=Object.getOwnPropertySymbols,ic=Object.prototype.hasOwnProperty,ih=Object.prototype.propertyIsEnumerable,iu=(e,t,i)=>t in e?io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,id=(e,t)=>{for(var i in t||(t={}))ic.call(t,i)&&iu(e,i,t[i]);if(ia)for(var i of ia(t))ih.call(t,i)&&iu(e,i,t[i]);return e};class il extends F{static async init(e){let t=new il(e);await t.initialize();let i=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",i),t}get context(){return(0,U.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(eE,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(eE)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn("Core Initialization Failure at epoch ".concat(Date.now()),e),this.logger.error(e.message),e}}constructor(e){var t;super(e),this.protocol="wc",this.version=2,this.name=ed,this.events=new s.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.dispatchEnvelope=e=>{let{topic:t,message:i,sessionExists:r}=e;if(!t||!i)return;let s={topic:t,message:i,publishedAt:Date.now(),transportType:eD.link_mode};this.relayer.onLinkMessageEvent(s,{sessionExists:r})},this.projectId=null==e?void 0:e.projectId,this.relayUrl=(null==e?void 0:e.relayUrl)||em,this.customStoragePrefix=null!=e&&e.customStoragePrefix?":".concat(e.customStoragePrefix):"";let i=(0,U.jI)({level:"string"==typeof(null==e?void 0:e.logger)&&e.logger?e.logger:ef.logger}),{logger:r,chunkLoggerController:n}=(0,U.Rt)({opts:i,maxSizeInBytes:null==e?void 0:e.maxLogBlobSizeInBytes,loggerOverride:null==e?void 0:e.logger});this.logChunkController=n,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,U.Ep)(r,this.name),this.heartbeat=new d,this.crypto=new tI(this,this.logger,null==e?void 0:e.keychain),this.history=new t0(this,this.logger),this.expirer=new t1(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new j(id(id({},ep),null==e?void 0:e.storageOptions)),this.relayer=new tH({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new t$(this,this.logger),this.verify=new t8(this,this.logger,this.storage),this.echoClient=new t4(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new is(this,this.logger,null==e?void 0:e.telemetryEnabled)}}let ip="client",ig="".concat("wc","@").concat(2,":").concat(ip,":"),ib={name:ip,logger:"error"},iy="WALLETCONNECT_DEEPLINK_CHOICE",im="Proposal expired",iv=o.SEVEN_DAYS,iw={wc_sessionPropose:{req:{ttl:o.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1104},res:{ttl:o.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1106},res:{ttl:o.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:o.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:o.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1112},res:{ttl:o.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1114},res:{ttl:o.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:o.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:o.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1119}}},i_={min:o.FIVE_MINUTES,max:o.SEVEN_DAYS},iD={idle:"IDLE",active:"ACTIVE"},iE=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],iS="".concat("wc","@",1.5,":").concat("auth",":"),iI="".concat(iS,":PUB_KEY");var iM=Object.defineProperty,iA=Object.defineProperties,ix=Object.getOwnPropertyDescriptors,iC=Object.getOwnPropertySymbols,iR=Object.prototype.hasOwnProperty,iO=Object.prototype.propertyIsEnumerable,iP=(e,t,i)=>t in e?iM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,iT=(e,t)=>{for(var i in t||(t={}))iR.call(t,i)&&iP(e,i,t[i]);if(iC)for(var i of iC(t))iO.call(t,i)&&iP(e,i,t[i]);return e},iN=(e,t)=>iA(e,ix(t));class ik extends ${isInitialized(){if(!this.initialized){let{message:e}=(0,et.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ev.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){let{topic:t,message:i,attestation:r,transportType:s}=e,{publicKey:n}=this.client.auth.authKeys.keys.includes(iI)?this.client.auth.authKeys.get(iI):{responseTopic:void 0,publicKey:void 0},o=await this.client.core.crypto.decode(t,i,{receiverPublicKey:n,encoding:s===eD.link_mode?et.zl_:et.$dT});try{(0,es.isJsonRpcRequest)(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o,attestation:r,transportType:s,encryptedId:(0,et.rjm)(i)})):(0,es.isJsonRpcResponse)(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o,transportType:s}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o,transportType:s})}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(eC.expired,async e=>{let{topic:t,id:i}=(0,et.iPz)(e.target);return i&&this.client.pendingRequest.keys.includes(i)?await this.deletePendingSessionRequest(i,(0,et.kCb)("EXPIRED"),!0):i&&this.client.auth.requests.keys.includes(i)?await this.deletePendingAuthRequest(i,(0,et.kCb)("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i})))})}registerPairingEvents(){this.client.core.pairing.events.on(eA.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(eA.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!(0,et.M_r)(e,!1)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","pairing topic should be a string: ".concat(e));throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","pairing topic doesn't exist: ".concat(e));throw Error(t)}if((0,et.BwD)(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=(0,et.kCb)("EXPIRED","pairing topic: ".concat(e));throw Error(t)}}async isValidSessionTopic(e){if(!(0,et.M_r)(e,!1)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","session topic should be a string: ".concat(e));throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","session topic doesn't exist: ".concat(e));throw Error(t)}if((0,et.BwD)(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=(0,et.kCb)("EXPIRED","session topic: ".concat(e));throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","session topic does not exist in keychain: ".concat(e));throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if((0,et.M_r)(e,!1)){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","session or pairing topic doesn't exist: ".concat(e));throw Error(t)}else{let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","session or pairing topic should be a string: ".concat(e));throw Error(t)}}async isValidProposalId(e){if(!(0,et.Q01)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","proposal id should be a number: ".concat(e));throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=(0,et.kCb)("NO_MATCHING_KEY","proposal id doesn't exist: ".concat(e));throw Error(t)}if((0,et.BwD)(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=(0,et.kCb)("EXPIRED","proposal id: ".concat(e));throw Error(t)}}constructor(e){var t;super(e),t=this,this.name="engine",this.events=new(n()),this.initialized=!1,this.requestQueue={state:iD.idle,queue:[]},this.sessionRequestQueue={state:iD.idle,queue:[]},this.requestQueueDelay=o.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(iw)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,o.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=iN(iT({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);let{pairingTopic:i,requiredNamespaces:r,optionalNamespaces:s,sessionProperties:n,relays:a}=t,c=i,h,u=!1;try{c&&(u=this.client.core.pairing.pairings.get(c).active)}catch(e){throw this.client.logger.error("connect() -> pairing.get(".concat(c,") failed")),e}if(!c||!u){let{topic:e,uri:t}=await this.client.core.pairing.create();c=e,h=t}if(!c){let{message:e}=(0,et.kCb)("NO_MATCHING_KEY","connect() pairing topic: ".concat(c));throw Error(e)}let d=await this.client.core.crypto.generateKeyPair(),l=iw.wc_sessionPropose.req.ttl||o.FIVE_MINUTES,f=(0,et.gn4)(l),p=iT({requiredNamespaces:r,optionalNamespaces:s,relays:null!=a?a:[{protocol:"irn"}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:c},n&&{sessionProperties:n}),{reject:g,resolve:b,done:y}=(0,et.H1S)(l,im);this.events.once((0,et.E0T)("session_connect"),async e=>{let{error:t,session:i}=e;if(t)g(t);else if(i){i.self.publicKey=d;let e=iN(iT({},i),{pairingTopic:p.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,transportType:eD.relay});await this.client.session.set(i.topic,e),await this.setExpiry(i.topic,i.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:i.peer.metadata}),this.cleanupDuplicatePairings(e),b(e)}});let m=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0});return await this.setProposal(m,iT({id:m},p)),{uri:h,approval:y}},this.pair=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}},this.approve=async e=>{var t,i,r;let s=this.client.core.eventClient.createEvent({properties:{topic:null==(t=null==e?void 0:e.id)?void 0:t.toString(),trace:[ek.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw s.setError(eL.no_internet_connection),e}try{await this.isValidProposalId(null==e?void 0:e.id)}catch(t){throw this.client.logger.error("approve() -> proposal.get(".concat(null==e?void 0:e.id,") failed")),s.setError(eL.proposal_not_found),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),s.setError(eL.session_approve_namespace_validation_failure),e}let{id:n,relayProtocol:o,namespaces:a,sessionProperties:c,sessionConfig:h}=e,u=this.client.proposal.get(n);this.client.core.eventClient.deleteEvent({eventId:s.eventId});let{pairingTopic:d,proposer:l,requiredNamespaces:f,optionalNamespaces:p}=u,g=null==(i=this.client.core.eventClient)?void 0:i.getEvent({topic:d});g||(g=null==(r=this.client.core.eventClient)?void 0:r.createEvent({type:ek.session_approve_started,properties:{topic:d,trace:[ek.session_approve_started,ek.session_namespaces_validation_success]}}));let b=await this.client.core.crypto.generateKeyPair(),y=l.publicKey,m=await this.client.core.crypto.generateSharedKey(b,y),v=iT(iT({relay:{protocol:null!=o?o:"irn"},namespaces:a,controller:{publicKey:b,metadata:this.client.metadata},expiry:(0,et.gn4)(iv)},c&&{sessionProperties:c}),h&&{sessionConfig:h}),w=eD.relay;g.addTrace(ek.subscribing_session_topic);try{await this.client.core.relayer.subscribe(m,{transportType:w})}catch(e){throw g.setError(eL.subscribe_session_topic_failure),e}g.addTrace(ek.subscribe_session_topic_success);let _=iN(iT({},v),{topic:m,requiredNamespaces:f,optionalNamespaces:p,pairingTopic:d,acknowledged:!1,self:v.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:b,transportType:eD.relay});await this.client.session.set(m,_),g.addTrace(ek.store_session);try{g.addTrace(ek.publishing_session_settle),await this.sendRequest({topic:m,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch(e=>{throw null==g||g.setError(eL.session_settle_publish_failure),e}),g.addTrace(ek.session_settle_publish_success),g.addTrace(ek.publishing_session_approve),await this.sendResult({id:n,topic:d,result:{relay:{protocol:null!=o?o:"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(e=>{throw null==g||g.setError(eL.session_approve_publish_failure),e}),g.addTrace(ek.session_approve_publish_success)}catch(e){throw this.client.logger.error(e),this.client.session.delete(m,(0,et.D6H)("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(m),e}return this.client.core.eventClient.deleteEvent({eventId:g.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:l.metadata}),await this.client.proposal.delete(n,(0,et.D6H)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(m,(0,et.gn4)(iv)),{topic:m,acknowledged:()=>Promise.resolve(this.client.session.get(m))}},this.reject=async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:i,reason:r}=e;try{t=this.client.proposal.get(i).pairingTopic}catch(e){throw this.client.logger.error("reject() -> proposal.get(".concat(i,") failed")),e}t&&(await this.sendError({id:i,topic:t,error:r,rpcOpts:iw.wc_sessionPropose.reject}),await this.client.proposal.delete(i,(0,et.D6H)("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:i}=e,{done:r,resolve:s,reject:n}=(0,et.H1S)(),o=(0,es.payloadId)(),a=(0,es.getBigIntRpcId)().toString(),c=this.client.session.get(t).namespaces;return this.events.once((0,et.E0T)("session_update",o),e=>{let{error:t}=e;t?n(t):s()}),await this.client.session.update(t,{namespaces:i}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),n(e)}),{acknowledged:r}},this.extend=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,i=(0,es.payloadId)(),{done:r,resolve:s,reject:n}=(0,et.H1S)();return this.events.once((0,et.E0T)("session_extend",i),e=>{let{error:t}=e;t?n(t):s()}),await this.setExpiry(t,(0,et.gn4)(iv)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(e=>{n(e)}),{acknowledged:r}},this.request=async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:i,topic:r,expiry:s=iw.wc_sessionRequest.req.ttl}=e,n=this.client.session.get(r);(null==n?void 0:n.transportType)===eD.relay&&await this.confirmOnlineStateOrThrow();let o=(0,es.payloadId)(),a=(0,es.getBigIntRpcId)().toString(),{done:c,resolve:h,reject:u}=(0,et.H1S)(s,"Request expired. Please try again.");this.events.once((0,et.E0T)("session_request",o),e=>{let{error:t,result:i}=e;t?u(t):h(i)});let d=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);return d?(await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:r,method:"wc_sessionRequest",params:{request:iN(iT({},i),{expiryTimestamp:(0,et.gn4)(s)}),chainId:t},expiry:s,throwOnFailedPublish:!0,appLink:d}).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:t,id:o}),await c()):await Promise.all([new Promise(async e=>{await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:r,method:"wc_sessionRequest",params:{request:iN(iT({},i),{expiryTimestamp:(0,et.gn4)(s)}),chainId:t},expiry:s,throwOnFailedPublish:!0}).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:t,id:o}),e()}),new Promise(async e=>{var t;if(!(null!=(t=n.sessionConfig)&&t.disableDeepLink)){let e=await (0,et.bW6)(this.client.core.storage,iy);await (0,et.HhN)({id:o,topic:r,wcDeepLink:e})}e()}),c()]).then(e=>e[2])},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:i}=e,{id:r}=i,s=this.client.session.get(t);s.transportType===eD.relay&&await this.confirmOnlineStateOrThrow();let n=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);(0,es.isJsonRpcResult)(i)?await this.sendResult({id:r,topic:t,result:i.result,throwOnFailedPublish:!0,appLink:n}):(0,es.isJsonRpcError)(i)&&await this.sendError({id:r,topic:t,error:i.error,appLink:n}),this.cleanupAfterResponse(e)},this.ping=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=(0,es.payloadId)(),i=(0,es.getBigIntRpcId)().toString(),{done:r,resolve:s,reject:n}=(0,et.H1S)();this.events.once((0,et.E0T)("session_ping",e),e=>{let{error:t}=e;t?n(t):s()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:i}),r()])}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:i,chainId:r}=e,s=(0,es.getBigIntRpcId)().toString();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:i,chainId:r},throwOnFailedPublish:!0,relayRpcId:s})},this.disconnect=async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:(0,et.D6H)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=(0,et.kCb)("MISMATCHED_TOPIC","Session or pairing topic not found: ".concat(t));throw Error(e)}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(0,et.Ih8)(t,e))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(e,t)=>{var i;let r;this.isInitialized(),this.isValidAuthenticate(e);let s=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(i=this.client.metadata.redirect)?void 0:i.linkMode),n=s?eD.link_mode:eD.relay;n===eD.relay&&await this.confirmOnlineStateOrThrow();let{chains:o,statement:a="",uri:c,domain:h,nonce:u,type:d,exp:l,nbf:f,methods:p=[],expiry:g}=e,b=[...e.resources||[]],{topic:y,uri:m}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:n});this.client.logger.info({message:"Generated new pairing",pairing:{topic:y,uri:m}});let v=await this.client.core.crypto.generateKeyPair(),w=(0,et.YmJ)(v);if(await Promise.all([this.client.auth.authKeys.set(iI,{responseTopic:w,publicKey:v}),this.client.auth.pairingTopics.set(w,{topic:w,pairingTopic:y})]),await this.client.core.relayer.subscribe(w,{transportType:n}),this.client.logger.info("sending request to new pairing topic: ".concat(y)),p.length>0){let{namespace:e}=(0,et.DQe)(o[0]),t=(0,et.IkP)(e,"request",p);(0,et.hA9)(b)&&(t=(0,et.qJM)(t,b.pop())),b.push(t)}let _=g&&g>iw.wc_sessionAuthenticate.req.ttl?g:iw.wc_sessionAuthenticate.req.ttl,D={authPayload:{type:null!=d?d:"caip122",chains:o,statement:a,aud:c,domain:h,version:"1",nonce:u,iat:new Date().toISOString(),exp:l,nbf:f,resources:b},requester:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:(0,et.gn4)(_)},E={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:o,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:y,proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:(0,et.gn4)(iw.wc_sessionPropose.req.ttl)},{done:S,resolve:I,reject:M}=(0,et.H1S)(_,"Request expired"),A=async e=>{let{error:t,session:i}=e;if(this.events.off((0,et.E0T)("session_request",C),x),t)M(t);else if(i){i.self.publicKey=v,await this.client.session.set(i.topic,i),await this.setExpiry(i.topic,i.expiry),y&&await this.client.core.pairing.updateMetadata({topic:y,metadata:i.peer.metadata});let e=this.client.session.get(i.topic);await this.deleteProposal(R),I({session:e})}},x=async e=>{var i,r,s;let o;if(await this.deletePendingAuthRequest(C,{message:"fulfilled",code:0}),e.error){let t=(0,et.D6H)("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off((0,et.E0T)("session_connect"),A),M(e.error.message))}await this.deleteProposal(R),this.events.off((0,et.E0T)("session_connect"),A);let{cacaos:a,responder:c}=e.result,h=[],u=[];for(let e of a){await (0,et.c4l)({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),M((0,et.D6H)("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,i=(0,et.hA9)(t.resources),r=[(0,et.DJo)(t.iss)],s=(0,et.NmC)(t.iss);if(i){let e=(0,et.Y31)(i),t=(0,et.ouN)(i);h.push(...e),r.push(...t)}for(let e of r)u.push("".concat(e,":").concat(s))}let d=await this.client.core.crypto.generateSharedKey(v,c.publicKey);h.length>0&&(o={topic:d,acknowledged:!0,self:{publicKey:v,metadata:this.client.metadata},peer:c,controller:c.publicKey,expiry:(0,et.gn4)(iv),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:y,namespaces:(0,et.E12)([...new Set(h)],[...new Set(u)]),transportType:n},await this.client.core.relayer.subscribe(d,{transportType:n}),await this.client.session.set(d,o),y&&await this.client.core.pairing.updateMetadata({topic:y,metadata:c.metadata}),o=this.client.session.get(d)),null!=(i=this.client.metadata.redirect)&&i.linkMode&&null!=(r=c.metadata.redirect)&&r.linkMode&&null!=(s=c.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.session.update(d,{transportType:eD.link_mode})),I({auths:a,session:o})},C=(0,es.payloadId)(),R=(0,es.payloadId)();this.events.once((0,et.E0T)("session_connect"),A),this.events.once((0,et.E0T)("session_request",C),x);try{if(s){let e=(0,es.formatJsonRpcRequest)("wc_sessionAuthenticate",D,C);this.client.core.history.set(y,e);let i=await this.client.core.crypto.encode("",e,{type:et.FpL,encoding:et.zl_});r=(0,et.L9d)(t,y,i)}else await Promise.all([this.sendRequest({topic:y,method:"wc_sessionAuthenticate",params:D,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:C}),this.sendRequest({topic:y,method:"wc_sessionPropose",params:E,expiry:iw.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:R})])}catch(e){throw this.events.off((0,et.E0T)("session_connect"),A),this.events.off((0,et.E0T)("session_request",C),x),e}return await this.setProposal(R,iT({id:R},E)),await this.setAuthRequest(C,{request:iN(iT({},D),{verifyContext:{}}),pairingTopic:y,transportType:n}),{uri:null!=r?r:m,response:S}},this.approveSessionAuthenticate=async e=>{let t;let{id:i,auths:r}=e,s=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[eq.authenticated_session_approve_started]}});try{this.isInitialized()}catch(e){throw s.setError(ez.no_internet_connection),e}let n=this.getPendingAuthRequest(i);if(!n)throw s.setError(ez.authenticated_session_pending_request_not_found),Error("Could not find pending auth request with id ".concat(i));let o=n.transportType||eD.relay;o===eD.relay&&await this.confirmOnlineStateOrThrow();let a=n.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),h=(0,et.YmJ)(a),u={type:et.rVF,receiverPublicKey:a,senderPublicKey:c},d=[],l=[];for(let e of r){if(!await (0,et.c4l)({cacao:e,projectId:this.client.core.projectId})){s.setError(ez.invalid_cacao);let e=(0,et.D6H)("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:h,error:e,encodeOpts:u}),Error(e.message)}s.addTrace(eq.cacaos_verified);let{p:t}=e,r=(0,et.hA9)(t.resources),n=[(0,et.DJo)(t.iss)],o=(0,et.NmC)(t.iss);if(r){let e=(0,et.Y31)(r),t=(0,et.ouN)(r);d.push(...e),n.push(...t)}for(let e of n)l.push("".concat(e,":").concat(o))}let f=await this.client.core.crypto.generateSharedKey(c,a);if(s.addTrace(eq.create_authenticated_session_topic),(null==d?void 0:d.length)>0){t={topic:f,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:a,metadata:n.requester.metadata},controller:a,expiry:(0,et.gn4)(iv),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:n.pairingTopic,namespaces:(0,et.E12)([...new Set(d)],[...new Set(l)]),transportType:o},s.addTrace(eq.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:o})}catch(e){throw s.setError(ez.subscribe_authenticated_session_topic_failure),e}s.addTrace(eq.subscribe_authenticated_session_topic_success),await this.client.session.set(f,t),s.addTrace(eq.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:n.pairingTopic,metadata:n.requester.metadata})}s.addTrace(eq.publishing_authenticated_session_approve);try{await this.sendResult({topic:h,id:i,result:{cacaos:r,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(n.requester.metadata,o)})}catch(e){throw s.setError(ez.authenticated_session_approve_publish_failure),e}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:n.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:t}},this.rejectSessionAuthenticate=async e=>{this.isInitialized();let{id:t,reason:i}=e,r=this.getPendingAuthRequest(t);if(!r)throw Error("Could not find pending auth request with id ".concat(t));r.transportType===eD.relay&&await this.confirmOnlineStateOrThrow();let s=r.requester.publicKey,n=await this.client.core.crypto.generateKeyPair(),o=(0,et.YmJ)(s),a={type:et.rVF,receiverPublicKey:s,senderPublicKey:n};await this.sendError({id:t,topic:o,error:i,encodeOpts:a,rpcOpts:iw.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(r.requester.metadata,r.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,(0,et.D6H)("USER_DISCONNECTED"))},this.formatAuthMessage=e=>{this.isInitialized();let{request:t,iss:i}=e;return(0,et.wvx)(t,i)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)},this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(i=>{var r,s;return(null==(r=i.peerMetadata)?void 0:r.url)&&(null==(s=i.peerMetadata)?void 0:s.url)===e.peer.metadata.url&&i.topic&&i.topic!==t.topic});if(0===i.length)return;this.client.logger.info("Cleaning up ".concat(i.length," duplicate pairing(s)")),await Promise.all(i.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}},this.deleteSession=async e=>{var t;let{topic:i,expirerHasDeleted:r=!1,emitEvent:s=!0,id:n=0}=e,{self:o}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,(0,et.D6H)("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),r||this.client.core.expirer.del(i),this.client.core.storage.removeItem(iy).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===i&&this.deletePendingSessionRequest(e.id,(0,et.D6H)("USER_DISCONNECTED"))}),i===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=iD.idle),s&&this.client.events.emit("session_delete",{id:n,topic:i})},this.deleteProposal=async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),i=this.client.core.eventClient.getEvent({topic:t.pairingTopic});null==i||i.setError(eL.proposal_expired)}catch(e){}await Promise.all([this.client.proposal.delete(e,(0,et.D6H)("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")},this.deletePendingSessionRequest=async function(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await Promise.all([t.client.pendingRequest.delete(e,i),r?Promise.resolve():t.client.core.expirer.del(e)]),t.addToRecentlyDeleted(e,"request"),t.sessionRequestQueue.queue=t.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(t.sessionRequestQueue.state=iD.idle,t.client.events.emit("session_request_expire",{id:e}))},this.deletePendingAuthRequest=async function(e,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await Promise.all([t.client.auth.requests.delete(e,i),r?Promise.resolve():t.client.core.expirer.del(e)])},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))},this.setProposal=async(e,t)=>{this.client.core.expirer.set(e,(0,et.gn4)(iw.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)},this.setAuthRequest=async(e,t)=>{let{request:i,pairingTopic:r,transportType:s=eD.relay}=t;this.client.core.expirer.set(e,i.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:e,pairingTopic:r,verifyContext:i.verifyContext,transportType:s})},this.setPendingSessionRequest=async e=>{let{id:t,topic:i,params:r,verifyContext:s}=e,n=r.request.expiryTimestamp||(0,et.gn4)(iw.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,n),await this.client.pendingRequest.set(t,{id:t,topic:i,params:r,verifyContext:s})},this.sendRequest=async e=>{let t,r;let{topic:s,method:n,params:o,expiry:a,relayRpcId:c,clientRpcId:h,throwOnFailedPublish:u,appLink:d}=e,l=(0,es.formatJsonRpcRequest)(n,o,h),f=!!d;try{let e=f?et.zl_:et.$dT;t=await this.client.core.crypto.encode(s,l,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error("sendRequest() -> core.crypto.encode() for topic ".concat(s," failed")),e}if(iE.includes(n)){let e=(0,et.rjm)(JSON.stringify(l)),i=(0,et.rjm)(t);r=await this.client.core.verify.register({id:i,decryptedId:e})}let p=iw[n].req;if(p.attestation=r,a&&(p.ttl=a),c&&(p.id=c),this.client.core.history.set(s,l),f){let e=(0,et.L9d)(d,s,t);await i.g.Linking.openURL(e,this.client.name)}else{let e=iw[n].req;a&&(e.ttl=a),c&&(e.id=c),u?(e.internal=iN(iT({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,t,e)):this.client.core.relayer.publish(s,t,e).catch(e=>this.client.logger.error(e))}return l.id},this.sendResult=async e=>{let t,r;let{id:s,topic:n,result:o,throwOnFailedPublish:a,encodeOpts:c,appLink:h}=e,u=(0,es.formatJsonRpcResult)(s,o),d=h&&"u">typeof(null==i.g?void 0:i.g.Linking);try{let e=d?et.zl_:et.$dT;t=await this.client.core.crypto.encode(n,u,iN(iT({},c||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error("sendResult() -> core.crypto.encode() for topic ".concat(n," failed")),e}try{r=await this.client.core.history.get(n,s)}catch(e){throw this.client.logger.error("sendResult() -> history.get(".concat(n,", ").concat(s,") failed")),e}if(d){let e=(0,et.L9d)(h,n,t);await i.g.Linking.openURL(e,this.client.name)}else{let e=iw[r.request.method].res;a?(e.internal=iN(iT({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,t,e)):this.client.core.relayer.publish(n,t,e).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(u)},this.sendError=async e=>{let t,r;let{id:s,topic:n,error:o,encodeOpts:a,rpcOpts:c,appLink:h}=e,u=(0,es.formatJsonRpcError)(s,o),d=h&&"u">typeof(null==i.g?void 0:i.g.Linking);try{let e=d?et.zl_:et.$dT;t=await this.client.core.crypto.encode(n,u,iN(iT({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error("sendError() -> core.crypto.encode() for topic ".concat(n," failed")),e}try{r=await this.client.core.history.get(n,s)}catch(e){throw this.client.logger.error("sendError() -> history.get(".concat(n,", ").concat(s,") failed")),e}if(d){let e=(0,et.L9d)(h,n,t);await i.g.Linking.openURL(e,this.client.name)}else{let e=c||iw[r.request.method].res;this.client.core.relayer.publish(n,t,e)}await this.client.core.history.resolve(u)},this.cleanup=async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let i=!1;(0,et.BwD)(t.expiry)&&(i=!0),this.client.core.crypto.keychain.has(t.topic)||(i=!0),i&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{(0,et.BwD)(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===iD.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info("Request queue starting with ".concat(this.requestQueue.queue.length," requests"));this.requestQueue.queue.length>0;){this.requestQueue.state=iD.active;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=iD.idle},this.processRequest=async e=>{let{topic:t,payload:i,attestation:r,transportType:s,encryptedId:n}=e,o=i.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:i,attestation:r,encryptedId:n});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,i);case"wc_sessionPing":return await this.onSessionPingRequest(t,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:i,attestation:r,encryptedId:n,transportType:s});case"wc_sessionEvent":return await this.onSessionEventRequest(t,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:i,attestation:r,encryptedId:n,transportType:s});default:return this.client.logger.info("Unsupported request method ".concat(o))}},this.onRelayEventResponse=async e=>{let{topic:t,payload:i,transportType:r}=e,s=(await this.client.core.history.get(t,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(t,i,r);case"wc_sessionSettle":return this.onSessionSettleResponse(t,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,i);case"wc_sessionExtend":return this.onSessionExtendResponse(t,i);case"wc_sessionPing":return this.onSessionPingResponse(t,i);case"wc_sessionRequest":return this.onSessionRequestResponse(t,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,i);default:return this.client.logger.info("Unsupported response method ".concat(s))}},this.onRelayEventUnknownPayload=e=>{let{topic:t}=e,{message:i}=(0,et.kCb)("MISSING_OR_INVALID","Decoded payload on topic ".concat(t," is not identifiable as a JSON-RPC request or a response."));throw Error(i)},this.shouldIgnorePairingRequest=e=>{let{topic:t,requestMethod:i}=e,r=this.expectedPairingMethodMap.get(t);return!(!r||r.includes(i))&&!!(r.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async e=>{let{topic:t,payload:i,attestation:r,encryptedId:s}=e,{params:n,id:o}=i;try{let e=this.client.core.eventClient.getEvent({topic:t});this.isValidConnect(iT({},i.params));let a=n.expiryTimestamp||(0,et.gn4)(iw.wc_sessionPropose.req.ttl),c=iT({id:o,pairingTopic:t,expiryTimestamp:a},n);await this.setProposal(o,c);let h=await this.getVerifyContext({attestationId:r,hash:(0,et.rjm)(JSON.stringify(i)),encryptedId:s,metadata:c.proposer.metadata});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),null==e||e.setError(eN.proposal_listener_not_found)),null==e||e.addTrace(eT.emit_session_proposal),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:h})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:iw.wc_sessionPropose.autoReject}),this.client.logger.error(e)}},this.onSessionProposeResponse=async(e,t,i)=>{let{id:r}=t;if((0,es.isJsonRpcResult)(t)){let{result:s}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});let n=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:n});let o=n.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});let a=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let c=await this.client.core.crypto.generateSharedKey(o,a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:c});let h=await this.client.core.relayer.subscribe(c,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:e})}else if((0,es.isJsonRpcError)(t)){await this.client.proposal.delete(r,(0,et.D6H)("USER_DISCONNECTED"));let e=(0,et.E0T)("session_connect");if(0===this.events.listenerCount(e))throw Error("emitting ".concat(e," without any listeners, 954"));this.events.emit((0,et.E0T)("session_connect"),{error:t.error})}},this.onSessionSettleRequest=async(e,t)=>{let{id:i,params:r}=t;try{this.isValidSessionSettleRequest(r);let{relay:i,controller:s,expiry:n,namespaces:o,sessionProperties:a,sessionConfig:c}=t.params,h=iN(iT(iT({topic:e,relay:i,expiry:n,namespaces:o,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:s.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:s.publicKey,metadata:s.metadata}},a&&{sessionProperties:a}),c&&{sessionConfig:c}),{transportType:eD.relay}),u=(0,et.E0T)("session_connect");if(0===this.events.listenerCount(u))throw Error("emitting ".concat(u," without any listeners 997"));this.events.emit((0,et.E0T)("session_connect"),{session:h}),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionSettleResponse=async(e,t)=>{let{id:i}=t;(0,es.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit((0,et.E0T)("session_approve",i),{})):(0,es.isJsonRpcError)(t)&&(await this.client.session.delete(e,(0,et.D6H)("USER_DISCONNECTED")),this.events.emit((0,et.E0T)("session_approve",i),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{let{params:i,id:r}=t;try{let t="".concat(e,"_session_update"),s=et.O6B.get(t);if(s&&this.isRequestOutOfSync(s,r)){this.client.logger.info("Discarding out of sync request - ".concat(r)),this.sendError({id:r,topic:e,error:(0,et.D6H)("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(iT({topic:e},i));try{et.O6B.set(t,r),await this.client.session.update(e,{namespaces:i.namespaces}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw et.O6B.delete(t),e}this.client.events.emit("session_update",{id:r,topic:e,params:i})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.isRequestOutOfSync=(e,t)=>parseInt(t.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,t)=>{let{id:i}=t,r=(0,et.E0T)("session_update",i);if(0===this.events.listenerCount(r))throw Error("emitting ".concat(r," without any listeners"));(0,es.isJsonRpcResult)(t)?this.events.emit((0,et.E0T)("session_update",i),{}):(0,es.isJsonRpcError)(t)&&this.events.emit((0,et.E0T)("session_update",i),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{let{id:i}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,(0,et.gn4)(iv)),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:e})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionExtendResponse=(e,t)=>{let{id:i}=t,r=(0,et.E0T)("session_extend",i);if(0===this.events.listenerCount(r))throw Error("emitting ".concat(r," without any listeners"));(0,es.isJsonRpcResult)(t)?this.events.emit((0,et.E0T)("session_extend",i),{}):(0,es.isJsonRpcError)(t)&&this.events.emit((0,et.E0T)("session_extend",i),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{let{id:i}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:e})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionPingResponse=(e,t)=>{let{id:i}=t,r=(0,et.E0T)("session_ping",i);if(0===this.events.listenerCount(r))throw Error("emitting ".concat(r," without any listeners"));setTimeout(()=>{(0,es.isJsonRpcResult)(t)?this.events.emit((0,et.E0T)("session_ping",i),{}):(0,es.isJsonRpcError)(t)&&this.events.emit((0,et.E0T)("session_ping",i),{error:t.error})},500)},this.onSessionDeleteRequest=async(e,t)=>{let{id:i}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(t=>{this.client.core.relayer.once(ev.publish,async()=>{t(await this.deleteSession({topic:e,id:i}))})}),this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:(0,et.D6H)("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}},this.onSessionRequest=async e=>{var t,i,r;let{topic:s,payload:n,attestation:o,encryptedId:a,transportType:c}=e,{id:h,params:u}=n;try{await this.isValidRequest(iT({topic:s},u));let e=this.client.session.get(s),n=await this.getVerifyContext({attestationId:o,hash:(0,et.rjm)(JSON.stringify((0,es.formatJsonRpcRequest)("wc_sessionRequest",u,h))),encryptedId:a,metadata:e.peer.metadata,transportType:c}),d={id:h,topic:s,params:u,verifyContext:n};await this.setPendingSessionRequest(d),c===eD.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(i=e.peer.metadata.redirect)?void 0:i.universal),null!=(r=this.client.signConfig)&&r.disableRequestQueue?this.emitSessionRequest(d):(this.addSessionRequestToSessionRequestQueue(d),this.processSessionRequestQueue())}catch(e){await this.sendError({id:h,topic:s,error:e}),this.client.logger.error(e)}},this.onSessionRequestResponse=(e,t)=>{let{id:i}=t,r=(0,et.E0T)("session_request",i);if(0===this.events.listenerCount(r))throw Error("emitting ".concat(r," without any listeners"));(0,es.isJsonRpcResult)(t)?this.events.emit((0,et.E0T)("session_request",i),{result:t.result}):(0,es.isJsonRpcError)(t)&&this.events.emit((0,et.E0T)("session_request",i),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{let{id:i,params:r}=t;try{let t="".concat(e,"_session_event_").concat(r.event.name),s=et.O6B.get(t);if(s&&this.isRequestOutOfSync(s,i)){this.client.logger.info("Discarding out of sync request - ".concat(i));return}this.isValidEmit(iT({topic:e},r)),this.client.events.emit("session_event",{id:i,topic:e,params:r}),et.O6B.set(t,i)}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionAuthenticateResponse=(e,t)=>{let{id:i}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,es.isJsonRpcResult)(t)?this.events.emit((0,et.E0T)("session_request",i),{result:t.result}):(0,es.isJsonRpcError)(t)&&this.events.emit((0,et.E0T)("session_request",i),{error:t.error})},this.onSessionAuthenticateRequest=async e=>{var t;let{topic:i,payload:r,attestation:s,encryptedId:n,transportType:o}=e;try{let{requester:e,authPayload:a,expiryTimestamp:c}=r.params,h=await this.getVerifyContext({attestationId:s,hash:(0,et.rjm)(JSON.stringify(r)),encryptedId:n,metadata:e.metadata,transportType:o}),u={requester:e,pairingTopic:i,id:r.id,authPayload:a,verifyContext:h,expiryTimestamp:c};await this.setAuthRequest(r.id,{request:u,pairingTopic:i,transportType:o}),o===eD.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:r.params,id:r.id,verifyContext:h})}catch(a){this.client.logger.error(a);let e=r.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),s=this.getAppLinkIfEnabled(r.params.requester.metadata,o),n={type:et.rVF,receiverPublicKey:e,senderPublicKey:t};await this.sendError({id:r.id,topic:i,error:a,encodeOpts:n,rpcOpts:iw.wc_sessionAuthenticate.autoReject,appLink:s})}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=iD.idle,this.processSessionRequestQueue()},(0,o.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=e=>{let{topic:t,error:i}=e,r=this.client.core.history.pending;r.length>0&&r.filter(e=>e.topic===t&&"wc_sessionRequest"===e.request.method).forEach(e=>{let t=e.request.id,r=(0,et.E0T)("session_request",t);if(0===this.events.listenerCount(r))throw Error("emitting ".concat(r," without any listeners"));this.events.emit((0,et.E0T)("session_request",e.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===iD.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=iD.active,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}},this.emitSessionRequest=e=>{this.client.events.emit("session_request",e)},this.onPairingCreated=e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,es.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id)})},this.isValidConnect=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","connect() params: ".concat(JSON.stringify(e)));throw Error(t)}let{pairingTopic:t,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:s,relays:n}=e;if((0,et.o8e)(t)||await this.isValidPairingTopic(t),!(0,et.PMr)(n,!0)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","connect() relays: ".concat(n));throw Error(e)}(0,et.o8e)(i)||0===(0,et.L5o)(i)||this.validateNamespaces(i,"requiredNamespaces"),(0,et.o8e)(r)||0===(0,et.L5o)(r)||this.validateNamespaces(r,"optionalNamespaces"),(0,et.o8e)(s)||this.validateSessionProps(s,"sessionProperties")},this.validateNamespaces=(e,t)=>{let i=(0,et.naP)(e,"connect()",t);if(i)throw Error(i.message)},this.isValidApprove=async e=>{if(!(0,et.EJd)(e))throw Error((0,et.kCb)("MISSING_OR_INVALID","approve() params: ".concat(e)).message);let{id:t,namespaces:i,relayProtocol:r,sessionProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let n=this.client.proposal.get(t),o=(0,et.ing)(i,"approve()");if(o)throw Error(o.message);let a=(0,et.rFo)(n.requiredNamespaces,i,"approve()");if(a)throw Error(a.message);if(!(0,et.M_r)(r,!0)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","approve() relayProtocol: ".concat(r));throw Error(e)}(0,et.o8e)(s)||this.validateSessionProps(s,"sessionProperties")},this.isValidReject=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","reject() params: ".concat(e));throw Error(t)}let{id:t,reason:i}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!(0,et.H4H)(i)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","reject() reason: ".concat(JSON.stringify(i)));throw Error(e)}},this.isValidSessionSettleRequest=e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","onSessionSettleRequest() params: ".concat(e));throw Error(t)}let{relay:t,controller:i,namespaces:r,expiry:s}=e;if(!(0,et.Z26)(t)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let n=(0,et.DdM)(i,"onSessionSettleRequest()");if(n)throw Error(n.message);let o=(0,et.ing)(r,"onSessionSettleRequest()");if(o)throw Error(o.message);if((0,et.BwD)(s)){let{message:e}=(0,et.kCb)("EXPIRED","onSessionSettleRequest()");throw Error(e)}},this.isValidUpdate=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","update() params: ".concat(e));throw Error(t)}let{topic:t,namespaces:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let r=this.client.session.get(t),s=(0,et.ing)(i,"update()");if(s)throw Error(s.message);let n=(0,et.rFo)(r.requiredNamespaces,i,"update()");if(n)throw Error(n.message)},this.isValidExtend=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","extend() params: ".concat(e));throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","request() params: ".concat(e));throw Error(t)}let{topic:t,request:i,chainId:r,expiry:s}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let{namespaces:n}=this.client.session.get(t);if(!(0,et.p8o)(n,r)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","request() chainId: ".concat(r));throw Error(e)}if(!(0,et.hHR)(i)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","request() ".concat(JSON.stringify(i)));throw Error(e)}if(!(0,et.alS)(n,r,i.method)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","request() method: ".concat(i.method));throw Error(e)}if(s&&!(0,et.ONw)(s,i_)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","request() expiry: ".concat(s,". Expiry must be a number (in seconds) between ").concat(i_.min," and ").concat(i_.max));throw Error(e)}},this.isValidRespond=async e=>{var t;if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","respond() params: ".concat(e));throw Error(t)}let{topic:i,response:r}=e;try{await this.isValidSessionTopic(i)}catch(i){throw null!=(t=null==e?void 0:e.response)&&t.id&&this.cleanupAfterResponse(e),i}if(!(0,et.JTI)(r)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","respond() response: ".concat(JSON.stringify(r)));throw Error(e)}},this.isValidPing=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","ping() params: ".concat(e));throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","emit() params: ".concat(e));throw Error(t)}let{topic:t,event:i,chainId:r}=e;await this.isValidSessionTopic(t);let{namespaces:s}=this.client.session.get(t);if(!(0,et.p8o)(s,r)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","emit() chainId: ".concat(r));throw Error(e)}if(!(0,et.nfW)(i)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","emit() event: ".concat(JSON.stringify(i)));throw Error(e)}if(!(0,et.B95)(s,r,i.name)){let{message:e}=(0,et.kCb)("MISSING_OR_INVALID","emit() event: ".concat(JSON.stringify(i)));throw Error(e)}},this.isValidDisconnect=async e=>{if(!(0,et.EJd)(e)){let{message:t}=(0,et.kCb)("MISSING_OR_INVALID","disconnect() params: ".concat(e));throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidAuthenticate=e=>{let{chains:t,uri:i,domain:r,nonce:s}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!(0,et.M_r)(i,!1))throw Error("uri is required parameter");if(!(0,et.M_r)(r,!1))throw Error("domain is required parameter");if(!(0,et.M_r)(s,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>(0,et.DQe)(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:n}=(0,et.DQe)(t[0]);if("eip155"!==n)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async e=>{let{attestationId:t,hash:i,encryptedId:r,metadata:s,transportType:n}=e,o={verified:{verifyUrl:s.verifyUrl||eR,validation:"UNKNOWN",origin:s.url||""}};try{if(n===eD.link_mode){let e=this.getAppLinkIfEnabled(s,n);return o.verified.validation=e&&new URL(e).origin===new URL(s.url).origin?"VALID":"INVALID",o}let e=await this.client.core.verify.resolve({attestationId:t,hash:i,encryptedId:r,verifyUrl:s.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug("Verify context: ".concat(JSON.stringify(o))),o},this.validateSessionProps=(e,t)=>{Object.values(e).forEach(e=>{if(!(0,et.M_r)(e,!1)){let{message:i}=(0,et.kCb)("MISSING_OR_INVALID","".concat(t," must be in Record<string, string> format. Received: ").concat(JSON.stringify(e)));throw Error(i)}})},this.getPendingAuthRequest=e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0},this.addToRecentlyDeleted=(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let i of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(i)}}},this.checkRecentlyDeleted=e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:i}=(0,et.kCb)("MISSING_OR_INVALID","Record was recently deleted - ".concat(t,": ").concat(e));throw Error(i)}},this.isLinkModeEnabled=(e,t)=>{var r,s,n,o,a,c,h,u,d;return!!e&&t===eD.link_mode&&(null==(s=null==(r=this.client.metadata)?void 0:r.redirect)?void 0:s.linkMode)===!0&&(null==(o=null==(n=this.client.metadata)?void 0:n.redirect)?void 0:o.universal)!==void 0&&(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)!==""&&(null==(h=null==e?void 0:e.redirect)?void 0:h.universal)!==void 0&&(null==(u=null==e?void 0:e.redirect)?void 0:u.universal)!==""&&(null==(d=null==e?void 0:e.redirect)?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&"u">typeof(null==i.g?void 0:i.g.Linking)},this.getAppLinkIfEnabled=(e,t)=>{var i;return this.isLinkModeEnabled(e,t)?null==(i=null==e?void 0:e.redirect)?void 0:i.universal:void 0},this.handleLinkModeMessage=e=>{let{url:t}=e;if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;let i=(0,et.waw)(t,"topic")||"",r=decodeURIComponent((0,et.waw)(t,"wc_ev")||""),s=this.client.session.keys.includes(i);s&&this.client.session.update(i,{transportType:eD.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:r,sessionExists:s})},this.registerLinkModeListeners=async()=>{var e;if((0,et.h9F)()||(0,et.b$m)()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){let e=null==i.g?void 0:i.g.Linking;if("u">typeof e){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);let t=await e.getInitialURL();t&&setTimeout(()=>{this.handleLinkModeMessage({url:t})},50)}}}}}class iL extends tZ{constructor(e,t){super(e,t,"proposal",ig),this.core=e,this.logger=t}}class iq extends tZ{constructor(e,t){super(e,t,"session",ig),this.core=e,this.logger=t}}class iz extends tZ{constructor(e,t){super(e,t,"request",ig,e=>e.id),this.core=e,this.logger=t}}class ij extends tZ{constructor(e,t){super(e,t,"authKeys",iS,()=>iI),this.core=e,this.logger=t}}class iU extends tZ{constructor(e,t){super(e,t,"pairingTopics",iS),this.core=e,this.logger=t}}class iF extends tZ{constructor(e,t){super(e,t,"requests",iS,e=>e.id),this.core=e,this.logger=t}}class iB{async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}constructor(e,t){this.core=e,this.logger=t,this.authKeys=new ij(this.core,this.logger),this.pairingTopics=new iU(this.core,this.logger),this.requests=new iF(this.core,this.logger)}}class iK extends Z{static async init(e){let t=new iK(e);return await t.initialize(),t}get context(){return(0,U.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}constructor(e){super(e),this.protocol="wc",this.version=2,this.name=ib.name,this.events=new s.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}},this.update=async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}},this.request=async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}},this.find=e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.authenticate=async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}},this.approveSessionAuthenticate=async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.rejectSessionAuthenticate=async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.name=(null==e?void 0:e.name)||ib.name,this.metadata=(null==e?void 0:e.metadata)||(0,et.DaH)(),this.signConfig=null==e?void 0:e.signConfig;let t="u">typeof(null==e?void 0:e.logger)&&"string"!=typeof(null==e?void 0:e.logger)?e.logger:(0,U.gw)((0,U.jI)({level:(null==e?void 0:e.logger)||ib.logger}));this.core=(null==e?void 0:e.core)||new il(e),this.logger=(0,U.Ep)(t,this.name),this.session=new iq(this.core,this.logger),this.proposal=new iL(this.core,this.logger),this.pendingRequest=new iz(this.core,this.logger),this.engine=new ik(this),this.auth=new iB(this.core,this.logger)}}},85067:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(50547);r.__exportStar(i(77581),t),r.__exportStar(i(85889),t)},77581:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},85889:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},70435:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(50547);r.__exportStar(i(51516),t),r.__exportStar(i(58188),t),r.__exportStar(i(73489),t),r.__exportStar(i(85067),t)},73489:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(50547).__exportStar(i(63953),t)},63953:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;class i{}t.IWatch=i},60133:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;let r=i(85067);t.toMiliseconds=function(e){return e*r.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/r.ONE_THOUSAND)}},62386:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}},51516:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(50547);r.__exportStar(i(62386),t),r.__exportStar(i(60133),t)},58188:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class i{start(e){if(this.timestamps.has(e))throw Error("Watch already started for label: ".concat(e));this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(void 0!==t.elapsed)throw Error("Watch already stopped for label: ".concat(e));let i=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:i})}get(e){let t=this.timestamps.get(e);if(void 0===t)throw Error("No timestamp found for label: ".concat(e));return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}constructor(){this.timestamps=new Map}}t.Watch=i,t.default=i},39863:function(e,t){"use strict";function i(e){let t;return void 0!==window[e]&&(t=window[e]),t}function r(e){let t=i(e);if(!t)throw Error("".concat(e," is not defined in Window"));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=i,t.getFromWindowOrThrow=r,t.getDocumentOrThrow=function(){return r("document")},t.getDocument=function(){return i("document")},t.getNavigatorOrThrow=function(){return r("navigator")},t.getNavigator=function(){return i("navigator")},t.getLocationOrThrow=function(){return r("location")},t.getLocation=function(){return i("location")},t.getCryptoOrThrow=function(){return r("crypto")},t.getCrypto=function(){return i("crypto")},t.getLocalStorageOrThrow=function(){return r("localStorage")},t.getLocalStorage=function(){return i("localStorage")}},96685:function(e,t,i){"use strict";t.D=void 0;let r=i(39863);t.D=function(){let e,t,i;try{e=r.getDocumentOrThrow(),t=r.getLocationOrThrow()}catch(e){return null}function s(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];let s=e.getElementsByTagName("meta");for(let e=0;e<s.length;e++){let t=s[e],r=["itemprop","property","name"].map(e=>t.getAttribute(e)).filter(e=>!!e&&i.includes(e));if(r.length&&r){let e=t.getAttribute("content");if(e)return e}}return""}let n=((i=s("name","og:site_name","og:title","twitter:title"))||(i=e.title),i),o=s("description","og:description","twitter:description","keywords");return{description:o,url:t.origin,icons:function(){let i=e.getElementsByTagName("link"),r=[];for(let e=0;e<i.length;e++){let s=i[e],n=s.getAttribute("rel");if(n&&n.toLowerCase().indexOf("icon")>-1){let e=s.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let i=t.protocol+"//"+t.host;if(0===e.indexOf("/"))i+=e;else{let r=t.pathname.split("/");r.pop(),i+=r.join("/")+"/"+e}r.push(i)}else if(0===e.indexOf("//")){let i=t.protocol+e;r.push(i)}else r.push(e)}}}return r}(),name:n}}},75406:function(e,t,i){!function(e,t){"use strict";function r(e,t){if(!e)throw Error(t||"Assertion failed")}function s(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function n(e,t,i){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(i=t,t=10),this._init(e||0,t||10,i||"be"))}"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{h=void 0!==window.Buffer?window.Buffer:i(72005).Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function a(e,t,i){var r=o(e,i);return i-1>=t&&(r|=o(e,i-1)<<4),r}function c(e,t,i,r){for(var s=0,n=Math.min(e.length,i),o=t;o<n;o++){var a=e.charCodeAt(o)-48;s*=r,a>=49?s+=a-49+10:a>=17?s+=a-17+10:s+=a}return s}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return 0>e.cmp(t)?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,i):(this._parseBase(e,t,s),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var s,n,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===i)for(o=e.length-1,s=0;o>=0;o-=3)n=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(o=0,s=0;o<e.length;o+=3)n=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[s]|=n<<a&67108863,this.words[s+1]=n>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},n.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var r,s=0;s<this.length;s++)this.words[s]=0;var n=0,o=0;if("be"===i)for(s=e.length-1;s>=t;s-=2)r=a(e,t,s)<<n,this.words[o]|=67108863&r,n>=18?(n-=18,o+=1,this.words[o]|=r>>>26):n+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)r=a(e,t,s)<<n,this.words[o]|=67108863&r,n>=18?(n-=18,o+=1,this.words[o]|=r>>>26):n+=8;this.strip()},n.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=t)r++;r--,s=s/t|0;for(var n=e.length-i,o=n%r,a=Math.min(n,n-o)+i,h=0,u=i;u<a;u+=r)h=c(e,u,u+r,t),this.imuln(s),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var d=1;for(h=c(e,u,e.length,t),u=0;u<o;u++)d*=t;this.imuln(d),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h,u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,i){i.negative=t.negative^e.negative;var r=e.length+t.length|0;i.length=r,r=r-1|0;var s=0|e.words[0],n=0|t.words[0],o=s*n,a=67108863&o,c=o/67108864|0;i.words[0]=a;for(var h=1;h<r;h++){for(var u=c>>>26,d=67108863&c,l=Math.min(h,t.length-1),f=Math.max(0,h-e.length+1);f<=l;f++){var p=h-f|0;u+=(o=(s=0|e.words[p])*(n=0|t.words[f])+d)/67108864|0,d=67108863&o}i.words[h]=0|d,c=0|u}return 0!==c?i.words[h]=0|c:i.length--,i.strip()}n.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var i,s=0,n=0,o=0;o<this.length;o++){var a=this.words[o],c=((a<<s|n)&16777215).toString(16);n=a>>>24-s&16777215,(s+=2)>=26&&(s-=26,o--),i=0!==n||o!==this.length-1?u[6-c.length]+c+i:c+i}for(0!==n&&(i=n.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var h=d[e],f=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?g+i:u[h-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==h),this.toArrayLike(h,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var s,n,o=this.byteLength(),a=i||Math.max(1,o);r(o<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var c=new e(a),h=this.clone();if("le"===t){for(n=0;!h.isZero();n++)s=h.andln(255),h.iushrn(8),c[n]=s;for(;n<a;n++)c[n]=0}else{for(n=0;n<a-o;n++)c[n]=0;for(n=0;!h.isZero();n++)s=h.andln(255),h.iushrn(8),c[a-n-1]=s}return c},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return(8191&t)==0&&(i+=13,t>>>=13),(127&t)==0&&(i+=7,t>>>=7),(15&t)==0&&(i+=4,t>>>=4),(3&t)==0&&(i+=2,t>>>=2),(1&t)==0&&i++,i},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r((this.negative|e.negative)==0),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r((this.negative|e.negative)==0),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){this.length>e.length?(t=this,i=e):(t=e,i=this);for(var t,i,r=0;r<i.length;r++)this.words[r]=t.words[r]^i.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r((this.negative|e.negative)==0),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,s=e%26;return this._expand(i+1),t?this.words[i]=this.words[i]|1<<s:this.words[i]=this.words[i]&~(1<<s),this.strip()},n.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,r=e):(i=e,r=this);for(var t,i,r,s=0,n=0;n<r.length;n++)t=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&t,s=t>>>26;for(;0!==s&&n<i.length;n++)t=(0|i.words[n])+s,this.words[n]=67108863&t,s=t>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,i,r=this.iadd(e);return e.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(t=this,i=e):(t=e,i=this);for(var n=0,o=0;o<i.length;o++)n=(r=(0|t.words[o])-(0|i.words[o])+n)>>26,this.words[o]=67108863&r;for(;0!==n&&o<t.length;o++)n=(r=(0|t.words[o])+n)>>26,this.words[o]=67108863&r;if(0===n&&o<t.length&&t!==this)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=Math.max(this.length,o),t!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var r,s,n,o=e.words,a=t.words,c=i.words,h=0,u=0|o[0],d=8191&u,l=u>>>13,f=0|o[1],p=8191&f,g=f>>>13,b=0|o[2],y=8191&b,m=b>>>13,v=0|o[3],w=8191&v,_=v>>>13,D=0|o[4],E=8191&D,S=D>>>13,I=0|o[5],M=8191&I,A=I>>>13,x=0|o[6],C=8191&x,R=x>>>13,O=0|o[7],P=8191&O,T=O>>>13,N=0|o[8],k=8191&N,L=N>>>13,q=0|o[9],z=8191&q,j=q>>>13,U=0|a[0],F=8191&U,B=U>>>13,K=0|a[1],V=8191&K,H=K>>>13,J=0|a[2],W=8191&J,Y=J>>>13,G=0|a[3],Q=8191&G,X=G>>>13,Z=0|a[4],$=8191&Z,ee=Z>>>13,et=0|a[5],ei=8191&et,er=et>>>13,es=0|a[6],en=8191&es,eo=es>>>13,ea=0|a[7],ec=8191&ea,eh=ea>>>13,eu=0|a[8],ed=8191&eu,el=eu>>>13,ef=0|a[9],ep=8191&ef,eg=ef>>>13;i.negative=e.negative^t.negative,i.length=19;var eb=(h+(r=Math.imul(d,F))|0)+((8191&(s=(s=Math.imul(d,B))+Math.imul(l,F)|0))<<13)|0;h=((n=Math.imul(l,B))+(s>>>13)|0)+(eb>>>26)|0,eb&=67108863,r=Math.imul(p,F),s=(s=Math.imul(p,B))+Math.imul(g,F)|0,n=Math.imul(g,B);var ey=(h+(r=r+Math.imul(d,V)|0)|0)+((8191&(s=(s=s+Math.imul(d,H)|0)+Math.imul(l,V)|0))<<13)|0;h=((n=n+Math.imul(l,H)|0)+(s>>>13)|0)+(ey>>>26)|0,ey&=67108863,r=Math.imul(y,F),s=(s=Math.imul(y,B))+Math.imul(m,F)|0,n=Math.imul(m,B),r=r+Math.imul(p,V)|0,s=(s=s+Math.imul(p,H)|0)+Math.imul(g,V)|0,n=n+Math.imul(g,H)|0;var em=(h+(r=r+Math.imul(d,W)|0)|0)+((8191&(s=(s=s+Math.imul(d,Y)|0)+Math.imul(l,W)|0))<<13)|0;h=((n=n+Math.imul(l,Y)|0)+(s>>>13)|0)+(em>>>26)|0,em&=67108863,r=Math.imul(w,F),s=(s=Math.imul(w,B))+Math.imul(_,F)|0,n=Math.imul(_,B),r=r+Math.imul(y,V)|0,s=(s=s+Math.imul(y,H)|0)+Math.imul(m,V)|0,n=n+Math.imul(m,H)|0,r=r+Math.imul(p,W)|0,s=(s=s+Math.imul(p,Y)|0)+Math.imul(g,W)|0,n=n+Math.imul(g,Y)|0;var ev=(h+(r=r+Math.imul(d,Q)|0)|0)+((8191&(s=(s=s+Math.imul(d,X)|0)+Math.imul(l,Q)|0))<<13)|0;h=((n=n+Math.imul(l,X)|0)+(s>>>13)|0)+(ev>>>26)|0,ev&=67108863,r=Math.imul(E,F),s=(s=Math.imul(E,B))+Math.imul(S,F)|0,n=Math.imul(S,B),r=r+Math.imul(w,V)|0,s=(s=s+Math.imul(w,H)|0)+Math.imul(_,V)|0,n=n+Math.imul(_,H)|0,r=r+Math.imul(y,W)|0,s=(s=s+Math.imul(y,Y)|0)+Math.imul(m,W)|0,n=n+Math.imul(m,Y)|0,r=r+Math.imul(p,Q)|0,s=(s=s+Math.imul(p,X)|0)+Math.imul(g,Q)|0,n=n+Math.imul(g,X)|0;var ew=(h+(r=r+Math.imul(d,$)|0)|0)+((8191&(s=(s=s+Math.imul(d,ee)|0)+Math.imul(l,$)|0))<<13)|0;h=((n=n+Math.imul(l,ee)|0)+(s>>>13)|0)+(ew>>>26)|0,ew&=67108863,r=Math.imul(M,F),s=(s=Math.imul(M,B))+Math.imul(A,F)|0,n=Math.imul(A,B),r=r+Math.imul(E,V)|0,s=(s=s+Math.imul(E,H)|0)+Math.imul(S,V)|0,n=n+Math.imul(S,H)|0,r=r+Math.imul(w,W)|0,s=(s=s+Math.imul(w,Y)|0)+Math.imul(_,W)|0,n=n+Math.imul(_,Y)|0,r=r+Math.imul(y,Q)|0,s=(s=s+Math.imul(y,X)|0)+Math.imul(m,Q)|0,n=n+Math.imul(m,X)|0,r=r+Math.imul(p,$)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(g,$)|0,n=n+Math.imul(g,ee)|0;var e_=(h+(r=r+Math.imul(d,ei)|0)|0)+((8191&(s=(s=s+Math.imul(d,er)|0)+Math.imul(l,ei)|0))<<13)|0;h=((n=n+Math.imul(l,er)|0)+(s>>>13)|0)+(e_>>>26)|0,e_&=67108863,r=Math.imul(C,F),s=(s=Math.imul(C,B))+Math.imul(R,F)|0,n=Math.imul(R,B),r=r+Math.imul(M,V)|0,s=(s=s+Math.imul(M,H)|0)+Math.imul(A,V)|0,n=n+Math.imul(A,H)|0,r=r+Math.imul(E,W)|0,s=(s=s+Math.imul(E,Y)|0)+Math.imul(S,W)|0,n=n+Math.imul(S,Y)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,X)|0)+Math.imul(_,Q)|0,n=n+Math.imul(_,X)|0,r=r+Math.imul(y,$)|0,s=(s=s+Math.imul(y,ee)|0)+Math.imul(m,$)|0,n=n+Math.imul(m,ee)|0,r=r+Math.imul(p,ei)|0,s=(s=s+Math.imul(p,er)|0)+Math.imul(g,ei)|0,n=n+Math.imul(g,er)|0;var eD=(h+(r=r+Math.imul(d,en)|0)|0)+((8191&(s=(s=s+Math.imul(d,eo)|0)+Math.imul(l,en)|0))<<13)|0;h=((n=n+Math.imul(l,eo)|0)+(s>>>13)|0)+(eD>>>26)|0,eD&=67108863,r=Math.imul(P,F),s=(s=Math.imul(P,B))+Math.imul(T,F)|0,n=Math.imul(T,B),r=r+Math.imul(C,V)|0,s=(s=s+Math.imul(C,H)|0)+Math.imul(R,V)|0,n=n+Math.imul(R,H)|0,r=r+Math.imul(M,W)|0,s=(s=s+Math.imul(M,Y)|0)+Math.imul(A,W)|0,n=n+Math.imul(A,Y)|0,r=r+Math.imul(E,Q)|0,s=(s=s+Math.imul(E,X)|0)+Math.imul(S,Q)|0,n=n+Math.imul(S,X)|0,r=r+Math.imul(w,$)|0,s=(s=s+Math.imul(w,ee)|0)+Math.imul(_,$)|0,n=n+Math.imul(_,ee)|0,r=r+Math.imul(y,ei)|0,s=(s=s+Math.imul(y,er)|0)+Math.imul(m,ei)|0,n=n+Math.imul(m,er)|0,r=r+Math.imul(p,en)|0,s=(s=s+Math.imul(p,eo)|0)+Math.imul(g,en)|0,n=n+Math.imul(g,eo)|0;var eE=(h+(r=r+Math.imul(d,ec)|0)|0)+((8191&(s=(s=s+Math.imul(d,eh)|0)+Math.imul(l,ec)|0))<<13)|0;h=((n=n+Math.imul(l,eh)|0)+(s>>>13)|0)+(eE>>>26)|0,eE&=67108863,r=Math.imul(k,F),s=(s=Math.imul(k,B))+Math.imul(L,F)|0,n=Math.imul(L,B),r=r+Math.imul(P,V)|0,s=(s=s+Math.imul(P,H)|0)+Math.imul(T,V)|0,n=n+Math.imul(T,H)|0,r=r+Math.imul(C,W)|0,s=(s=s+Math.imul(C,Y)|0)+Math.imul(R,W)|0,n=n+Math.imul(R,Y)|0,r=r+Math.imul(M,Q)|0,s=(s=s+Math.imul(M,X)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,X)|0,r=r+Math.imul(E,$)|0,s=(s=s+Math.imul(E,ee)|0)+Math.imul(S,$)|0,n=n+Math.imul(S,ee)|0,r=r+Math.imul(w,ei)|0,s=(s=s+Math.imul(w,er)|0)+Math.imul(_,ei)|0,n=n+Math.imul(_,er)|0,r=r+Math.imul(y,en)|0,s=(s=s+Math.imul(y,eo)|0)+Math.imul(m,en)|0,n=n+Math.imul(m,eo)|0,r=r+Math.imul(p,ec)|0,s=(s=s+Math.imul(p,eh)|0)+Math.imul(g,ec)|0,n=n+Math.imul(g,eh)|0;var eS=(h+(r=r+Math.imul(d,ed)|0)|0)+((8191&(s=(s=s+Math.imul(d,el)|0)+Math.imul(l,ed)|0))<<13)|0;h=((n=n+Math.imul(l,el)|0)+(s>>>13)|0)+(eS>>>26)|0,eS&=67108863,r=Math.imul(z,F),s=(s=Math.imul(z,B))+Math.imul(j,F)|0,n=Math.imul(j,B),r=r+Math.imul(k,V)|0,s=(s=s+Math.imul(k,H)|0)+Math.imul(L,V)|0,n=n+Math.imul(L,H)|0,r=r+Math.imul(P,W)|0,s=(s=s+Math.imul(P,Y)|0)+Math.imul(T,W)|0,n=n+Math.imul(T,Y)|0,r=r+Math.imul(C,Q)|0,s=(s=s+Math.imul(C,X)|0)+Math.imul(R,Q)|0,n=n+Math.imul(R,X)|0,r=r+Math.imul(M,$)|0,s=(s=s+Math.imul(M,ee)|0)+Math.imul(A,$)|0,n=n+Math.imul(A,ee)|0,r=r+Math.imul(E,ei)|0,s=(s=s+Math.imul(E,er)|0)+Math.imul(S,ei)|0,n=n+Math.imul(S,er)|0,r=r+Math.imul(w,en)|0,s=(s=s+Math.imul(w,eo)|0)+Math.imul(_,en)|0,n=n+Math.imul(_,eo)|0,r=r+Math.imul(y,ec)|0,s=(s=s+Math.imul(y,eh)|0)+Math.imul(m,ec)|0,n=n+Math.imul(m,eh)|0,r=r+Math.imul(p,ed)|0,s=(s=s+Math.imul(p,el)|0)+Math.imul(g,ed)|0,n=n+Math.imul(g,el)|0;var eI=(h+(r=r+Math.imul(d,ep)|0)|0)+((8191&(s=(s=s+Math.imul(d,eg)|0)+Math.imul(l,ep)|0))<<13)|0;h=((n=n+Math.imul(l,eg)|0)+(s>>>13)|0)+(eI>>>26)|0,eI&=67108863,r=Math.imul(z,V),s=(s=Math.imul(z,H))+Math.imul(j,V)|0,n=Math.imul(j,H),r=r+Math.imul(k,W)|0,s=(s=s+Math.imul(k,Y)|0)+Math.imul(L,W)|0,n=n+Math.imul(L,Y)|0,r=r+Math.imul(P,Q)|0,s=(s=s+Math.imul(P,X)|0)+Math.imul(T,Q)|0,n=n+Math.imul(T,X)|0,r=r+Math.imul(C,$)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(R,$)|0,n=n+Math.imul(R,ee)|0,r=r+Math.imul(M,ei)|0,s=(s=s+Math.imul(M,er)|0)+Math.imul(A,ei)|0,n=n+Math.imul(A,er)|0,r=r+Math.imul(E,en)|0,s=(s=s+Math.imul(E,eo)|0)+Math.imul(S,en)|0,n=n+Math.imul(S,eo)|0,r=r+Math.imul(w,ec)|0,s=(s=s+Math.imul(w,eh)|0)+Math.imul(_,ec)|0,n=n+Math.imul(_,eh)|0,r=r+Math.imul(y,ed)|0,s=(s=s+Math.imul(y,el)|0)+Math.imul(m,ed)|0,n=n+Math.imul(m,el)|0;var eM=(h+(r=r+Math.imul(p,ep)|0)|0)+((8191&(s=(s=s+Math.imul(p,eg)|0)+Math.imul(g,ep)|0))<<13)|0;h=((n=n+Math.imul(g,eg)|0)+(s>>>13)|0)+(eM>>>26)|0,eM&=67108863,r=Math.imul(z,W),s=(s=Math.imul(z,Y))+Math.imul(j,W)|0,n=Math.imul(j,Y),r=r+Math.imul(k,Q)|0,s=(s=s+Math.imul(k,X)|0)+Math.imul(L,Q)|0,n=n+Math.imul(L,X)|0,r=r+Math.imul(P,$)|0,s=(s=s+Math.imul(P,ee)|0)+Math.imul(T,$)|0,n=n+Math.imul(T,ee)|0,r=r+Math.imul(C,ei)|0,s=(s=s+Math.imul(C,er)|0)+Math.imul(R,ei)|0,n=n+Math.imul(R,er)|0,r=r+Math.imul(M,en)|0,s=(s=s+Math.imul(M,eo)|0)+Math.imul(A,en)|0,n=n+Math.imul(A,eo)|0,r=r+Math.imul(E,ec)|0,s=(s=s+Math.imul(E,eh)|0)+Math.imul(S,ec)|0,n=n+Math.imul(S,eh)|0,r=r+Math.imul(w,ed)|0,s=(s=s+Math.imul(w,el)|0)+Math.imul(_,ed)|0,n=n+Math.imul(_,el)|0;var eA=(h+(r=r+Math.imul(y,ep)|0)|0)+((8191&(s=(s=s+Math.imul(y,eg)|0)+Math.imul(m,ep)|0))<<13)|0;h=((n=n+Math.imul(m,eg)|0)+(s>>>13)|0)+(eA>>>26)|0,eA&=67108863,r=Math.imul(z,Q),s=(s=Math.imul(z,X))+Math.imul(j,Q)|0,n=Math.imul(j,X),r=r+Math.imul(k,$)|0,s=(s=s+Math.imul(k,ee)|0)+Math.imul(L,$)|0,n=n+Math.imul(L,ee)|0,r=r+Math.imul(P,ei)|0,s=(s=s+Math.imul(P,er)|0)+Math.imul(T,ei)|0,n=n+Math.imul(T,er)|0,r=r+Math.imul(C,en)|0,s=(s=s+Math.imul(C,eo)|0)+Math.imul(R,en)|0,n=n+Math.imul(R,eo)|0,r=r+Math.imul(M,ec)|0,s=(s=s+Math.imul(M,eh)|0)+Math.imul(A,ec)|0,n=n+Math.imul(A,eh)|0,r=r+Math.imul(E,ed)|0,s=(s=s+Math.imul(E,el)|0)+Math.imul(S,ed)|0,n=n+Math.imul(S,el)|0;var ex=(h+(r=r+Math.imul(w,ep)|0)|0)+((8191&(s=(s=s+Math.imul(w,eg)|0)+Math.imul(_,ep)|0))<<13)|0;h=((n=n+Math.imul(_,eg)|0)+(s>>>13)|0)+(ex>>>26)|0,ex&=67108863,r=Math.imul(z,$),s=(s=Math.imul(z,ee))+Math.imul(j,$)|0,n=Math.imul(j,ee),r=r+Math.imul(k,ei)|0,s=(s=s+Math.imul(k,er)|0)+Math.imul(L,ei)|0,n=n+Math.imul(L,er)|0,r=r+Math.imul(P,en)|0,s=(s=s+Math.imul(P,eo)|0)+Math.imul(T,en)|0,n=n+Math.imul(T,eo)|0,r=r+Math.imul(C,ec)|0,s=(s=s+Math.imul(C,eh)|0)+Math.imul(R,ec)|0,n=n+Math.imul(R,eh)|0,r=r+Math.imul(M,ed)|0,s=(s=s+Math.imul(M,el)|0)+Math.imul(A,ed)|0,n=n+Math.imul(A,el)|0;var eC=(h+(r=r+Math.imul(E,ep)|0)|0)+((8191&(s=(s=s+Math.imul(E,eg)|0)+Math.imul(S,ep)|0))<<13)|0;h=((n=n+Math.imul(S,eg)|0)+(s>>>13)|0)+(eC>>>26)|0,eC&=67108863,r=Math.imul(z,ei),s=(s=Math.imul(z,er))+Math.imul(j,ei)|0,n=Math.imul(j,er),r=r+Math.imul(k,en)|0,s=(s=s+Math.imul(k,eo)|0)+Math.imul(L,en)|0,n=n+Math.imul(L,eo)|0,r=r+Math.imul(P,ec)|0,s=(s=s+Math.imul(P,eh)|0)+Math.imul(T,ec)|0,n=n+Math.imul(T,eh)|0,r=r+Math.imul(C,ed)|0,s=(s=s+Math.imul(C,el)|0)+Math.imul(R,ed)|0,n=n+Math.imul(R,el)|0;var eR=(h+(r=r+Math.imul(M,ep)|0)|0)+((8191&(s=(s=s+Math.imul(M,eg)|0)+Math.imul(A,ep)|0))<<13)|0;h=((n=n+Math.imul(A,eg)|0)+(s>>>13)|0)+(eR>>>26)|0,eR&=67108863,r=Math.imul(z,en),s=(s=Math.imul(z,eo))+Math.imul(j,en)|0,n=Math.imul(j,eo),r=r+Math.imul(k,ec)|0,s=(s=s+Math.imul(k,eh)|0)+Math.imul(L,ec)|0,n=n+Math.imul(L,eh)|0,r=r+Math.imul(P,ed)|0,s=(s=s+Math.imul(P,el)|0)+Math.imul(T,ed)|0,n=n+Math.imul(T,el)|0;var eO=(h+(r=r+Math.imul(C,ep)|0)|0)+((8191&(s=(s=s+Math.imul(C,eg)|0)+Math.imul(R,ep)|0))<<13)|0;h=((n=n+Math.imul(R,eg)|0)+(s>>>13)|0)+(eO>>>26)|0,eO&=67108863,r=Math.imul(z,ec),s=(s=Math.imul(z,eh))+Math.imul(j,ec)|0,n=Math.imul(j,eh),r=r+Math.imul(k,ed)|0,s=(s=s+Math.imul(k,el)|0)+Math.imul(L,ed)|0,n=n+Math.imul(L,el)|0;var eP=(h+(r=r+Math.imul(P,ep)|0)|0)+((8191&(s=(s=s+Math.imul(P,eg)|0)+Math.imul(T,ep)|0))<<13)|0;h=((n=n+Math.imul(T,eg)|0)+(s>>>13)|0)+(eP>>>26)|0,eP&=67108863,r=Math.imul(z,ed),s=(s=Math.imul(z,el))+Math.imul(j,ed)|0,n=Math.imul(j,el);var eT=(h+(r=r+Math.imul(k,ep)|0)|0)+((8191&(s=(s=s+Math.imul(k,eg)|0)+Math.imul(L,ep)|0))<<13)|0;h=((n=n+Math.imul(L,eg)|0)+(s>>>13)|0)+(eT>>>26)|0,eT&=67108863;var eN=(h+(r=Math.imul(z,ep))|0)+((8191&(s=(s=Math.imul(z,eg))+Math.imul(j,ep)|0))<<13)|0;return h=((n=Math.imul(j,eg))+(s>>>13)|0)+(eN>>>26)|0,eN&=67108863,c[0]=eb,c[1]=ey,c[2]=em,c[3]=ev,c[4]=ew,c[5]=e_,c[6]=eD,c[7]=eE,c[8]=eS,c[9]=eI,c[10]=eM,c[11]=eA,c[12]=ex,c[13]=eC,c[14]=eR,c[15]=eO,c[16]=eP,c[17]=eT,c[18]=eN,0!==h&&(c[19]=h,i.length++),i};function g(e,t,i){return new b().mulp(e,t,i)}function b(e,t){this.x=e,this.y=t}Math.imul||(p=f),n.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?function(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var o=s;s=0;for(var a=67108863&r,c=Math.min(n,t.length-1),h=Math.max(0,n-e.length+1);h<=c;h++){var u=n-h,d=(0|e.words[u])*(0|t.words[h]),l=67108863&d;o=o+(d/67108864|0)|0,a=67108863&(l=l+a|0),s+=(o=o+(l>>>26)|0)>>>26,o&=67108863}i.words[n]=a,r=o,o=s}return 0!==r?i.words[n]=r:i.length--,i.strip()}(this,e,t):g(this,e,t)},b.prototype.makeRBT=function(e){for(var t=Array(e),i=n.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,i,e);return t},b.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var r=0,s=0;s<t;s++)r|=(1&e)<<t-s-1,e>>=1;return r},b.prototype.permute=function(e,t,i,r,s,n){for(var o=0;o<n;o++)r[o]=t[e[o]],s[o]=i[e[o]]},b.prototype.transform=function(e,t,i,r,s,n){this.permute(n,e,t,i,r,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),u=0;u<s;u+=a)for(var d=c,l=h,f=0;f<o;f++){var p=i[u+f],g=r[u+f],b=i[u+f+o],y=r[u+f+o],m=d*b-l*y;y=d*y+l*b,b=m,i[u+f]=p+b,r[u+f]=g+y,i[u+f+o]=p-b,r[u+f+o]=g-y,f!==a&&(m=c*d-h*l,l=c*l+h*d,d=m)}},b.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},b.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=e[r];e[r]=e[i-r-1],e[i-r-1]=s,s=t[r],t[r]=-t[i-r-1],t[i-r-1]=-s}},b.prototype.normalize13b=function(e,t){for(var i=0,r=0;r<t/2;r++){var s=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+i;e[r]=67108863&s,i=s<67108864?0:s/67108864|0}return e},b.prototype.convert13b=function(e,t,i,s){for(var n=0,o=0;o<t;o++)n+=0|e[o],i[2*o]=8191&n,n>>>=13,i[2*o+1]=8191&n,n>>>=13;for(o=2*t;o<s;++o)i[o]=0;r(0===n),r((-8192&n)==0)},b.prototype.stub=function(e){for(var t=Array(e),i=0;i<e;i++)t[i]=0;return t},b.prototype.mulp=function(e,t,i){var r=2*this.guessLen13b(e.length,t.length),s=this.makeRBT(r),n=this.stub(r),o=Array(r),a=Array(r),c=Array(r),h=Array(r),u=Array(r),d=Array(r),l=i.words;l.length=r,this.convert13b(e.words,e.length,o,r),this.convert13b(t.words,t.length,h,r),this.transform(o,n,a,c,r,s),this.transform(h,n,u,d,r,s);for(var f=0;f<r;f++){var p=a[f]*u[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*u[f],a[f]=p}return this.conjugate(a,c,r),this.transform(a,c,l,n,r,s),this.conjugate(l,n,r),this.normalize13b(l,r),i.negative=e.negative^t.negative,i.length=e.length+t.length,i.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=Array(this.length+e.length),g(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,n=(67108863&s)+(67108863&t);t>>=26,t+=(s/67108864|0)+(n>>>26),this.words[i]=67108863&n}return 0!==t&&(this.words[i]=t,this.length++),this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),i=0;i<t.length;i++){var r=i/26|0,s=i%26;t[i]=(e.words[r]&1<<s)>>>s}return t}(e);if(0===t.length)return new n(1);for(var i=this,r=0;r<t.length&&0===t[r];r++,i=i.sqr());if(++r<t.length)for(var s=i.sqr();r<t.length;r++,s=s.sqr())0!==t[r]&&(i=i.mul(s));return i},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,s=(e-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&n,c=(0|this.words[t])-a<<i;this.words[t]=c|o,o=a>>>26-i}o&&(this.words[t]=o,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){r("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var s,n=e%26,o=Math.min((e-n)/26,this.length),a=67108863^67108863>>>n<<n;if(s-=o,s=Math.max(0,s),i){for(var c=0;c<o;c++)i.words[c]=this.words[c];i.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=s);c--){var u=0|this.words[c];this.words[c]=h<<26-n|u>>>n,h=u&a}return i&&0!==h&&(i.words[i.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return!(this.length<=i)&&!!(this.words[i]&1<<t)},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;return(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)?this:(0!==t&&i++,this.length=Math.min(i,this.length),0!==t&&(this.words[this.length-1]&=67108863^67108863>>>t<<t),this.strip())},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return(r("number"==typeof e),r(e<67108864),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var s,n,o=e.length+i;this._expand(o);var a=0;for(s=0;s<e.length;s++){n=(0|this.words[s+i])+a;var c=(0|e.words[s])*t;n-=67108863&c,a=(n>>26)-(c/67108864|0),this.words[s+i]=67108863&n}for(;s<this.length-i;s++)a=(n=(0|this.words[s+i])+a)>>26,this.words[s+i]=67108863&n;if(0===a)return this.strip();for(r(-1===a),a=0,s=0;s<this.length;s++)a=(n=-(0|this.words[s])+a)>>26,this.words[s]=67108863&n;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var i,r=this.length-e.length,s=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),s.iushln(r),a=0|o.words[o.length-1]);var c=s.length-o.length;if("mod"!==t){(i=new n(null)).length=c+1,i.words=Array(i.length);for(var h=0;h<i.length;h++)i.words[h]=0}var u=s.clone()._ishlnsubmul(o,1,c);0===u.negative&&(s=u,i&&(i.words[c]=1));for(var d=c-1;d>=0;d--){var l=(0|s.words[o.length+d])*67108864+(0|s.words[o.length+d-1]);for(l=Math.min(l/a|0,67108863),s._ishlnsubmul(o,l,d);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(o,1,d),s.isZero()||(s.negative^=1);i&&(i.words[d]=l)}return i&&i.strip(),s.strip(),"div"!==t&&0!==r&&s.iushrn(r),{div:i||null,mod:s}},n.prototype.divmod=function(e,t,i){var s,o,a;return(r(!e.isZero()),this.isZero())?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(s=a.div.neg()),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(e)),{div:s,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(s=a.div.neg()),{div:s,mod:a.mod}):(this.negative&e.negative)!=0?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||0>this.cmp(e)?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t)},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),s=e.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=67108863);for(var t=67108864%e,i=0,s=this.length-1;s>=0;s--)i=(t*i+(0|this.words[s]))%e;return i},n.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*t;this.words[i]=s/e|0,t=s%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new n(1),o=new n(0),a=new n(0),c=new n(1),h=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++h;for(var u=i.clone(),d=t.clone();!t.isZero();){for(var l=0,f=1;(t.words[0]&f)==0&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(d)),s.iushrn(1),o.iushrn(1);for(var p=0,g=1;(i.words[0]&g)==0&&p<26;++p,g<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(a),o.isub(c)):(i.isub(t),a.isub(s),c.isub(o))}return{a:a,b:c,gcd:i.iushln(h)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t,i=this,s=e.clone();i=0!==i.negative?i.umod(e):i.clone();for(var o=new n(1),a=new n(0),c=s.clone();i.cmpn(1)>0&&s.cmpn(1)>0;){for(var h=0,u=1;(i.words[0]&u)==0&&h<26;++h,u<<=1);if(h>0)for(i.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var d=0,l=1;(s.words[0]&l)==0&&d<26;++d,l<<=1);if(d>0)for(s.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);i.cmp(s)>=0?(i.isub(s),o.isub(a)):(s.isub(i),a.isub(o))}return 0>(t=0===i.cmpn(1)?o:a).cmpn(0)&&t.iadd(e),t},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var r=0;t.isEven()&&i.isEven();r++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=t.cmp(i);if(s<0){var n=t;t=i,i=n}else if(0===s||0===i.cmpn(1))break;t.isub(i)}return i.iushln(r)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,s=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=s,this;for(var n=s,o=i;0!==n&&o<this.length;o++){var a=0|this.words[o];a+=n,n=a>>>26,a&=67108863,this.words[o]=a}return 0!==n&&(this.words[o]=n,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return -1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|e.words[i];if(r!==s){r<s?t=-1:r>s&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return -1===this.cmpn(e)},n.prototype.lt=function(e){return -1===this.cmp(e)},n.prototype.lten=function(e){return 0>=this.cmpn(e)},n.prototype.lte=function(e){return 0>=this.cmp(e)},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new E(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function m(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function D(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new n(null);return e.words=Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,i=e;do this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(t>this.n);var r=t<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},s(v,m),v.prototype.split=function(e,t){for(var i=Math.min(e.length,9),r=0;r<i;r++)t.words[r]=e.words[r];if(t.length=i,e.length<=9){e.words[0]=0,e.length=1;return}var s=e.words[9];for(r=10,t.words[t.length++]=4194303&s;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,e.words[r-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var r=0|e.words[i];t+=977*r,e.words[i]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},s(w,m),s(_,m),s(D,m),D.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var r=(0|e.words[i])*19+t,s=67108863&r;r>>>=26,e.words[i]=s,t=r}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){var t;if(y[e])return y[e];if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else if("p25519"===e)t=new D;else throw Error("Unknown prime "+e);return y[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r((e.negative|t.negative)==0,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},E.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return 0>i.cmpn(0)&&i.iadd(this.m),i},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),o=0;!s.isZero()&&0===s.andln(1);)o++,s.iushrn(1);r(!s.isZero());var a=new n(1).toRed(this),c=a.redNeg(),h=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new n(2*u*u).toRed(this);0!==this.pow(u,h).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,s),l=this.pow(e,s.addn(1).iushrn(1)),f=this.pow(e,s),p=o;0!==f.cmp(a);){for(var g=f,b=0;0!==g.cmp(a);b++)g=g.redSqr();r(b<p);var y=this.pow(d,new n(1).iushln(p-b-1));l=l.redMul(y),d=y.redSqr(),f=f.redMul(d),p=b}return l},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=Array(16);i[0]=new n(1).toRed(this),i[1]=e;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],e);var s=i[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var h=t.words[r],u=c-1;u>=0;u--){var d=h>>u&1;if(s!==i[0]&&(s=this.sqr(s)),0===d&&0===o){a=0;continue}o<<=1,o|=d,(4==++a||0===r&&0===u)&&(s=this.mul(s,i[o]),a=0,o=0)}c=26}return s},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new S(e)},s(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):0>s.cmpn(0)&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var i=e.mul(t),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):0>s.cmpn(0)&&(o=s.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},75143:function(e,t,i){"use strict";var r;function s(e){this.rand=e}if(e.exports=function(e){return r||(r=new s(null)),r.generate(e)},e.exports.Rand=s,s.prototype.generate=function(e){return this._rand(e)},s.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:s.prototype._rand=function(){throw Error("Not implemented yet")};else try{var n=i(86585);if("function"!=typeof n.randomBytes)throw Error("Not supported");s.prototype._rand=function(e){return n.randomBytes(e)}}catch(e){}},21664:function(e,t,i){"use strict";var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==i.g&&i.g,s=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();(function(e){var t=void 0!==s&&s||"undefined"!=typeof self&&self||void 0!==i.g&&i.g||{},r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function l(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function f(e){var t=new FileReader,i=l(t);return t.readAsArrayBuffer(e),i}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;r.arrayBuffer&&r.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return d(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(r.blob)return this.blob().then(f);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,i,r,s,n=d(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,i=l(t=new FileReader),s=(r=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?r[1]:"utf-8",t.readAsText(e,s),i;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),i=Array(t.length),r=0;r<t.length;r++)i[r]=String.fromCharCode(t[r]);return i.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},r.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=a(e),t=c(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=c(t)},u.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),h(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),h(e)},r.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function y(e,i){if(!(this instanceof y))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,s,n=(i=i||{}).body;if(e instanceof y){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,i.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=i.credentials||this.credentials||"same-origin",(i.headers||!this.headers)&&(this.headers=new u(i.headers)),this.method=(s=(r=i.method||this.method||"GET").toUpperCase(),b.indexOf(s)>-1?s:r),this.mode=i.mode||this.mode||null,this.signal=i.signal||this.signal||function(){if("AbortController"in t)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===i.cache||"no-cache"===i.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),r=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(s))}}),t}function v(e,t){if(!(this instanceof v))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},g.call(y.prototype),g.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var w=[301,302,303,307,308];v.redirect=function(e,t){if(-1===w.indexOf(t))throw RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var i=Error(e);this.stack=i.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function _(i,s){return new Promise(function(n,o){var h=new y(i,s);if(h.signal&&h.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var d=new XMLHttpRequest;function l(){d.abort()}if(d.onload=function(){var e,t,i={statusText:d.statusText,headers:(e=d.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var i=e.split(":"),r=i.shift().trim();if(r){var s=i.join(":").trim();try{t.append(r,s)}catch(e){console.warn("Response "+e.message)}}}),t)};0===h.url.indexOf("file://")&&(d.status<200||d.status>599)?i.status=200:i.status=d.status,i.url="responseURL"in d?d.responseURL:i.headers.get("X-Request-URL");var r="response"in d?d.response:d.responseText;setTimeout(function(){n(new v(r,i))},0)},d.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},d.ontimeout=function(){setTimeout(function(){o(TypeError("Network request timed out"))},0)},d.onabort=function(){setTimeout(function(){o(new e.DOMException("Aborted","AbortError"))},0)},d.open(h.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(h.url),!0),"include"===h.credentials?d.withCredentials=!0:"omit"===h.credentials&&(d.withCredentials=!1),"responseType"in d&&(r.blob?d.responseType="blob":r.arrayBuffer&&(d.responseType="arraybuffer")),s&&"object"==typeof s.headers&&!(s.headers instanceof u||t.Headers&&s.headers instanceof t.Headers)){var f=[];Object.getOwnPropertyNames(s.headers).forEach(function(e){f.push(a(e)),d.setRequestHeader(e,c(s.headers[e]))}),h.headers.forEach(function(e,t){-1===f.indexOf(t)&&d.setRequestHeader(t,e)})}else h.headers.forEach(function(e,t){d.setRequestHeader(t,e)});h.signal&&(h.signal.addEventListener("abort",l),d.onreadystatechange=function(){4===d.readyState&&h.signal.removeEventListener("abort",l)}),d.send(void 0===h._bodyInit?null:h._bodyInit)})}_.polyfill=!0,t.fetch||(t.fetch=_,t.Headers=u,t.Request=y,t.Response=v),e.Headers=u,e.Request=y,e.Response=v,e.fetch=_,Object.defineProperty(e,"__esModule",{value:!0})})({}),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var n=r.fetch?r:s;(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t},2546:function(e){"use strict";var t="%[a-f0-9]{2}",i=RegExp("("+t+")|([^%]+?)","gi"),r=RegExp("("+t+")+","gi");e.exports=function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},s=r.exec(e);s;){try{t[s[0]]=decodeURIComponent(s[0])}catch(e){var n=function(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(i)||[],r=1;r<t.length;r++)t=(e=(function e(t,i){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;i=i||1;var r=t.slice(0,i),s=t.slice(i);return Array.prototype.concat.call([],e(r),e(s))})(t,r).join("")).match(i)||[];return e}}(s[0]);n!==s[0]&&(t[s[0]]=n)}s=r.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];e=e.replace(RegExp(c,"g"),t[c])}return e}(e)}}},32193:function(e,t,i){"use strict";i.d(t,{qY:function(){return f}});var r=i(51501),s=function(e,t,i){if(i||2==arguments.length)for(var r,s=0,n=t.length;s<n;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},n=function(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"},o=function(e){this.version=e,this.type="node",this.name="node",this.os=r.platform},a=function(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"},c=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},h=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},u=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],l=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(e){return e?p(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new h:"undefined"!=typeof navigator?p(navigator.userAgent):void 0!==r&&r.version?new o(r.version.slice(1)):null}function p(e){var t=""!==e&&d.reduce(function(t,i){var r=i[0],s=i[1];if(t)return t;var n=s.exec(e);return!!n&&[r,n]},!1);if(!t)return null;var i=t[0],r=t[1];if("searchbot"===i)return new c;var o=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);o?o.length<3&&(o=s(s([],o,!0),function(e){for(var t=[],i=0;i<e;i++)t.push("0");return t}(3-o.length),!0)):o=[];var h=o.join("."),f=function(e){for(var t=0,i=l.length;t<i;t++){var r=l[t],s=r[0];if(r[1].exec(e))return s}return null}(e),p=u.exec(e);return p&&p[1]?new a(i,h,f,p[1]):new n(i,h,f)}},40272:function(e,t,i){"use strict";t.version=i(5363).i8,t.utils=i(3303),t.rand=i(75143),t.curve=i(54216),t.curves=i(88375),t.ec=i(88699),t.eddsa=i(57598)},81835:function(e,t,i){"use strict";var r=i(75406),s=i(3303),n=s.getNAF,o=s.getJSF,a=s.assert;function c(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function h(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw Error("Not implemented")},c.prototype.validate=function(){throw Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var i,r,s=e._getDoubles(),o=n(t,1,this._bitLength),c=(1<<s.step+1)-(s.step%2==0?2:1);c/=3;var h=[];for(i=0;i<o.length;i+=s.step){r=0;for(var u=i+s.step-1;u>=i;u--)r=(r<<1)+o[u];h.push(r)}for(var d=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=c;f>0;f--){for(i=0;i<h.length;i++)(r=h[i])===f?l=l.mixedAdd(s.points[i]):r===-f&&(l=l.mixedAdd(s.points[i].neg()));d=d.add(l)}return d.toP()},c.prototype._wnafMul=function(e,t){var i=4,r=e._getNAFPoints(i);i=r.wnd;for(var s=r.points,o=n(t,i,this._bitLength),c=this.jpoint(null,null,null),h=o.length-1;h>=0;h--){for(var u=0;h>=0&&0===o[h];h--)u++;if(h>=0&&u++,c=c.dblp(u),h<0)break;var d=o[h];a(0!==d),c="affine"===e.type?d>0?c.mixedAdd(s[d-1>>1]):c.mixedAdd(s[-d-1>>1].neg()):d>0?c.add(s[d-1>>1]):c.add(s[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,i,r,s){var a,c,h,u=this._wnafT1,d=this._wnafT2,l=this._wnafT3,f=0;for(a=0;a<r;a++){var p=(h=t[a])._getNAFPoints(e);u[a]=p.wnd,d[a]=p.points}for(a=r-1;a>=1;a-=2){var g=a-1,b=a;if(1!==u[g]||1!==u[b]){l[g]=n(i[g],u[g],this._bitLength),l[b]=n(i[b],u[b],this._bitLength),f=Math.max(l[g].length,f),f=Math.max(l[b].length,f);continue}var y=[t[g],null,null,t[b]];0===t[g].y.cmp(t[b].y)?(y[1]=t[g].add(t[b]),y[2]=t[g].toJ().mixedAdd(t[b].neg())):0===t[g].y.cmp(t[b].y.redNeg())?(y[1]=t[g].toJ().mixedAdd(t[b]),y[2]=t[g].add(t[b].neg())):(y[1]=t[g].toJ().mixedAdd(t[b]),y[2]=t[g].toJ().mixedAdd(t[b].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=o(i[g],i[b]);for(c=0,f=Math.max(v[0].length,f),l[g]=Array(f),l[b]=Array(f);c<f;c++){var w=0|v[0][c],_=0|v[1][c];l[g][c]=m[(w+1)*3+(_+1)],l[b][c]=0,d[g]=y}}var D=this.jpoint(null,null,null),E=this._wnafT4;for(a=f;a>=0;a--){for(var S=0;a>=0;){var I=!0;for(c=0;c<r;c++)E[c]=0|l[c][a],0!==E[c]&&(I=!1);if(!I)break;S++,a--}if(a>=0&&S++,D=D.dblp(S),a<0)break;for(c=0;c<r;c++){var M=E[c];0!==M&&(M>0?h=d[c][M-1>>1]:M<0&&(h=d[c][-M-1>>1].neg()),D="affine"===h.type?D.mixedAdd(h):D.add(h))}}for(a=0;a<r;a++)d[a]=null;return s?D:D.toP()},c.BasePoint=h,h.prototype.eq=function(){throw Error("Not implemented")},h.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=s.toArray(e,t);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*i)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw Error("Unknown point format")},h.prototype.encodeCompressed=function(e){return this.encode(e,!0)},h.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},h.prototype.encode=function(e,t){return s.encode(this._encode(t),e)},h.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},h.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},h.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,s=0;s<t;s+=e){for(var n=0;n<e;n++)r=r.dbl();i.push(r)}return{step:e,points:i}},h.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,r=1===i?null:this.dbl(),s=1;s<i;s++)t[s]=t[s-1].add(r);return{wnd:e,points:t}},h.prototype._getBeta=function(){return null},h.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}},10776:function(e,t,i){"use strict";var r=i(3303),s=i(75406),n=i(85093),o=i(81835),a=r.assert;function c(e){this.twisted=(0|e.a)!=1,this.mOneA=this.twisted&&(0|e.a)==-1,this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new s(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=(0|e.c)==1}function h(e,t,i,r,n){o.BasePoint.call(this,e,"projective"),null===t&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(t,16),this.y=new s(i,16),this.z=r?new s(r,16):this.curve.one,this.t=n&&new s(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,!this.curve.extended||this.t||(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}n(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,i,r){return this.point(e,t,i,r)},c.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),r=this.c2.redSub(this.a.redMul(i)),n=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=r.redMul(n.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),r=i.redSub(this.c2),n=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=r.redMul(n.redInvm());if(0===o.cmp(this.zero)){if(!t)return this.point(this.zero,e);throw Error("invalid point")}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),r=t.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return 0===r.cmp(s)},n(h,o.BasePoint),c.prototype.pointFromJSON=function(e){return h.fromJSON(this,e)},c.prototype.point=function(e,t,i,r){return new h(this,e,t,i,r)},h.fromJSON=function(e,t){return new h(e,t[0],t[1],t[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},h.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var r=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),n=r.redAdd(t),o=n.redSub(i),a=r.redSub(t),c=s.redMul(o),h=n.redMul(a),u=s.redMul(a),d=o.redMul(n);return this.curve.point(c,h,d,u)},h.prototype._projDbl=function(){var e,t,i,r,s,n,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var h=(r=this.curve._mulA(a)).redAdd(c);this.zOne?(e=o.redSub(a).redSub(c).redMul(h.redSub(this.curve.two)),t=h.redMul(r.redSub(c)),i=h.redSqr().redSub(h).redSub(h)):(s=this.z.redSqr(),n=h.redSub(s).redISub(s),e=o.redSub(a).redISub(c).redMul(n),t=h.redMul(r.redSub(c)),i=h.redMul(n))}else r=a.redAdd(c),s=this.curve._mulC(this.z).redSqr(),n=r.redSub(s).redSub(s),e=this.curve._mulC(o.redISub(r)).redMul(n),t=this.curve._mulC(r).redMul(a.redISub(c)),i=r.redMul(n);return this.curve.point(e,t,i)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),n=i.redSub(t),o=s.redSub(r),a=s.redAdd(r),c=i.redAdd(t),h=n.redMul(o),u=a.redMul(c),d=n.redMul(c),l=o.redMul(a);return this.curve.point(h,u,l,d)},h.prototype._projAdd=function(e){var t,i,r=this.z.redMul(e.z),s=r.redSqr(),n=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(n).redMul(o),c=s.redSub(a),h=s.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(o),d=r.redMul(c).redMul(u);return this.curve.twisted?(t=r.redMul(h).redMul(o.redSub(this.curve._mulA(n))),i=c.redMul(h)):(t=r.redMul(h).redMul(o.redSub(n)),i=this.curve._mulC(c).redMul(h)),this.curve.point(d,t,i)},h.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},h.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},h.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)},h.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},h.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var i=e.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},54216:function(e,t,i){"use strict";t.base=i(81835),t.short=i(26305),t.mont=i(25813),t.edwards=i(10776)},25813:function(e,t,i){"use strict";var r=i(75406),s=i(85093),n=i(81835),o=i(3303);function a(e){n.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,i){n.BasePoint.call(this,e,"projective"),null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(a,n),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),r=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},s(c,n.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),i=e.redSub(t),r=e.redMul(t),s=i.redMul(t.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,s)},c.prototype.add=function(){throw Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),s=e.x.redAdd(e.z),n=e.x.redSub(e.z).redMul(i),o=s.redMul(r),a=t.z.redMul(n.redAdd(o).redSqr()),c=t.x.redMul(n.redISub(o).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(e){for(var t=e.clone(),i=this,r=this.curve.point(null,null),s=[];0!==t.cmpn(0);t.iushrn(1))s.push(t.andln(1));for(var n=s.length-1;n>=0;n--)0===s[n]?(i=i.diffAdd(r,this),r=r.dbl()):(r=i.diffAdd(r,this),i=i.dbl());return r},c.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},26305:function(e,t,i){"use strict";var r=i(3303),s=i(75406),n=i(85093),o=i(81835),a=r.assert;function c(e){o.call(this,"short",e),this.a=new s(e.a,16).toRed(this.red),this.b=new s(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function h(e,t,i,r){o.BasePoint.call(this,e,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(t,16),this.y=new s(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,i,r){o.BasePoint.call(this,e,"jacobian"),null===t&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(t,16),this.y=new s(i,16),this.z=new s(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}n(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(e.beta)t=new s(e.beta,16).toRed(this.red);else{var t,i,r,n=this._getEndoRoots(this.p);t=(t=0>n[0].cmp(n[1])?n[0]:n[1]).toRed(this.red)}if(e.lambda)i=new s(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?i=o[0]:(i=o[1],a(0===this.g.mul(i).x.cmp(this.g.x.redMul(t))))}return r=e.basis?e.basis.map(function(e){return{a:new s(e.a,16),b:new s(e.b,16)}}):this._getEndoBasis(i),{beta:t,lambda:i,basis:r}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:s.mont(e),i=new s(2).toRed(t).redInvm(),r=i.redNeg(),n=new s(3).toRed(t).redNeg().redSqrt().redMul(i);return[r.redAdd(n).fromRed(),r.redSub(n).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,i,r,n,o,a,c,h,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),p=new s(1),g=new s(0),b=new s(0),y=new s(1),m=0;0!==l.cmpn(0);){var v=f.div(l);h=f.sub(v.mul(l)),u=b.sub(v.mul(p));var w=y.sub(v.mul(g));if(!r&&0>h.cmp(d))t=c.neg(),i=p,r=h.neg(),n=u;else if(r&&2==++m)break;c=h,f=l,l=h,b=p,p=u,y=g,g=w}o=h.neg(),a=u;var _=r.sqr().add(n.sqr());return o.sqr().add(a.sqr()).cmp(_)>=0&&(o=t,a=i),r.negative&&(r=r.neg(),n=n.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:r,b:n},{a:o,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],r=t[1],s=r.b.mul(e).divRound(this.n),n=i.b.neg().mul(e).divRound(this.n),o=s.mul(i.a),a=n.mul(r.a),c=s.mul(i.b),h=n.mul(r.b);return{k1:e.sub(o).sub(a),k2:c.add(h).neg()}},c.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw Error("invalid point");var n=r.fromRed().isOdd();return(t&&!n||!t&&n)&&(r=r.redNeg()),this.point(e,r)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,r=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(s).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,i){for(var r=this._endoWnafT1,s=this._endoWnafT2,n=0;n<e.length;n++){var o=this._endoSplit(t[n]),a=e[n],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),r[2*n]=a,r[2*n+1]=c,s[2*n]=o.k1,s[2*n+1]=o.k2}for(var h=this._wnafMulAdd(1,r,s,2*n,i),u=0;u<2*n;u++)r[u]=null,s[u]=null;return h},n(h,o.BasePoint),c.prototype.point=function(e,t,i){return new h(this,e,t,i)},c.prototype.pointFromJSON=function(e,t){return h.fromJSON(this,e,t)},h.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,r=function(e){return i.point(e.x.redMul(i.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(e,t,i){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],i);if(!t[2])return r;function s(t){return e.point(t[0],t[1],i)}var n=t[2];return r.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[r].concat(n.doubles.points.map(s))},naf:n.naf&&{wnd:n.naf.wnd,points:[r].concat(n.naf.points.map(s))}},r},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e)||0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},h.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),r=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(r),n=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(e){return(e=new s(e,16),this.isInfinity())?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},h.prototype.mulAdd=function(e,t,i){var r=[this,t],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,s):this.curve._wnafMulAdd(1,r,s,2)},h.prototype.jmulAdd=function(e,t,i){var r=[this,t],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,s,!0):this.curve._wnafMulAdd(1,r,s,2,!0)},h.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},h.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return t},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},n(u,o.BasePoint),c.prototype.jpoint=function(e,t,i){return new u(this,e,t,i)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(i,r)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(t),s=e.x.redMul(i),n=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(i.redMul(this.z)),a=r.redSub(s),c=n.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),u=h.redMul(a),d=r.redMul(h),l=c.redSqr().redIAdd(u).redISub(d).redISub(d),f=c.redMul(d.redISub(l)).redISub(n.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,f,p)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,r=e.x.redMul(t),s=this.y,n=e.y.redMul(t).redMul(this.z),o=i.redSub(r),a=s.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),h=c.redMul(o),u=i.redMul(c),d=a.redSqr().redIAdd(h).redISub(u).redISub(u),l=a.redMul(u.redISub(d)).redISub(s.redMul(h)),f=this.z.redMul(o);return this.curve.jpoint(d,l,f)},u.prototype.dblp=function(e){if(0===e||this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var t,i=this;for(t=0;t<e;t++)i=i.dbl();return i}var r=this.curve.a,s=this.curve.tinv,n=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),h=o.redAdd(o);for(t=0;t<e;t++){var u=n.redSqr(),d=h.redSqr(),l=d.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(c)),p=n.redMul(d),g=f.redSqr().redISub(p.redAdd(p)),b=p.redISub(g),y=f.redMul(b);y=y.redIAdd(y).redISub(l);var m=h.redMul(a);t+1<e&&(c=c.redMul(l)),n=g,a=m,h=y}return this.curve.jpoint(n,h.redMul(s),a)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){if(this.zOne){var e,t,i,r=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(r).redISub(n);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r),c=a.redSqr().redISub(o).redISub(o),h=n.redIAdd(n);h=(h=h.redIAdd(h)).redIAdd(h),e=c,t=a.redMul(o.redISub(c)).redISub(h),i=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),l=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(u).redISub(l);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),g=p.redSqr(),b=l.redIAdd(l);b=(b=b.redIAdd(b)).redIAdd(b),e=g.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(b),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(e,t,i)},u.prototype._threeDbl=function(){if(this.zOne){var e,t,i,r=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(r).redISub(n);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var h=n.redIAdd(n);h=(h=h.redIAdd(h)).redIAdd(h),t=a.redMul(o.redISub(c)).redISub(h),i=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),l=this.x.redMul(d),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=l.redIAdd(l),g=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(g),i=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var b=d.redSqr();b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b),t=f.redMul(p.redISub(e)).redISub(b)}return this.curve.jpoint(e,t,i)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,r=this.z,s=r.redSqr().redSqr(),n=t.redSqr(),o=i.redSqr(),a=n.redAdd(n).redIAdd(n).redIAdd(e.redMul(s)),c=t.redAdd(t),h=(c=c.redIAdd(c)).redMul(o),u=a.redSqr().redISub(h.redAdd(h)),d=h.redISub(u),l=o.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=a.redMul(d).redISub(l),p=i.redAdd(i).redMul(r);return this.curve.jpoint(u,f,p)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),r=t.redSqr(),s=e.redAdd(e).redIAdd(e),n=s.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(r),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(n)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var h=s.redIAdd(o).redSqr().redISub(n).redISub(a).redISub(c),u=t.redMul(h);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(a).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var l=this.y.redMul(h.redMul(c.redISub(h)).redISub(o.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=this.z.redAdd(o).redSqr().redISub(i).redISub(a);return this.curve.jpoint(d,l,f)},u.prototype.mul=function(e,t){return e=new s(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(0!==this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),s=i.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(r)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(i))return!0;for(var r=e.clone(),s=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),0===this.x.cmp(i))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},88375:function(e,t,i){"use strict";var r,s=i(46330),n=i(54216),o=i(3303).assert;function a(e){"short"===e.type?this.curve=new n.short(e):"edwards"===e.type?this.curve=new n.edwards(e):this.curve=new n.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var r=new a(i);return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:r}),r}})}t.PresetCurve=a,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=i(38813)}catch(e){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},88699:function(e,t,i){"use strict";var r=i(75406),s=i(27871),n=i(3303),o=i(88375),a=i(75143),c=n.assert,h=i(67606),u=i(49099);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(o,e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new h(this,e)},d.prototype.keyFromPrivate=function(e,t){return h.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return h.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new s({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new r(2));;){var o=new r(t.generate(i));if(!(o.cmp(n)>0))return o.iaddn(1),this.keyFromPrivate(o)}},d.prototype._truncateToN=function(e,t,i){if(r.isBN(e)||"number"==typeof e)s=(e=new r(e,16)).byteLength();else if("object"==typeof e)s=e.length,e=new r(e,16);else{var s,n=e.toString();s=n.length+1>>>1,e=new r(n,16)}"number"!=typeof i&&(i=8*s);var o=i-this.n.bitLength();return(o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0)?e.sub(this.n):e},d.prototype.sign=function(e,t,i,n){if("object"==typeof i&&(n=i,i=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!r.isBN(e)){c("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),c(e.length>>>0===e.length);for(var o=0;o<e.length;o++)c((255&e[o])===e[o])}t=this.keyFromPrivate(t,i),c(!(e=this._truncateToN(e,!1,n.msgBitLength)).isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),h=t.getPrivate().toArray("be",a),d=e.toArray("be",a);c(new r(d).eq(e),"Can not sign message");for(var l=new s({hash:this.hash,entropy:h,nonce:d,pers:n.pers,persEnc:n.persEnc||"utf8"}),f=this.n.sub(new r(1)),p=0;;p++){var g=n.k?n.k(p):new r(l.generate(this.n.byteLength()));if(!(0>=(g=this._truncateToN(g,!0)).cmpn(1)||g.cmp(f)>=0)){var b=this.g.mul(g);if(!b.isInfinity()){var y=b.getX(),m=y.umod(this.n);if(0!==m.cmpn(0)){var v=g.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var w=(b.getY().isOdd()?1:0)|(0!==y.cmp(m)?2:0);return n.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),w^=1),new u({r:m,s:v,recoveryParam:w})}}}}}},d.prototype.verify=function(e,t,i,r,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),i=this.keyFromPublic(i,r);var n,o=(t=new u(t,"hex")).r,a=t.s;if(0>o.cmpn(1)||o.cmp(this.n)>=0||0>a.cmpn(1)||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),h=c.mul(e).umod(this.n),d=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(n=this.g.jmulAdd(h,i.getPublic(),d)).isInfinity()&&n.eqXToP(o):!(n=this.g.mulAdd(h,i.getPublic(),d)).isInfinity()&&0===n.getX().umod(this.n).cmp(o)},d.prototype.recoverPubKey=function(e,t,i,s){c((3&i)===i,"The recovery param is more than two bits"),t=new u(t,s);var n=this.n,o=new r(e),a=t.r,h=t.s,d=1&i,l=i>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw Error("Unable to find sencond key candinate");a=l?this.curve.pointFromX(a.add(this.curve.n),d):this.curve.pointFromX(a,d);var f=t.r.invm(n),p=n.sub(o).mul(f).umod(n),g=h.mul(f).umod(n);return this.g.mulAdd(p,a,g)},d.prototype.getKeyRecoveryParam=function(e,t,i,r){if(null!==(t=new u(t,r)).recoveryParam)return t.recoveryParam;for(var s,n=0;n<4;n++){try{s=this.recoverPubKey(e,t,n)}catch(e){continue}if(s.eq(i))return n}throw Error("Unable to find valid recovery factor")}},67606:function(e,t,i){"use strict";var r=i(75406),s=i(3303).assert;function n(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=n,n.fromPublic=function(e,t,i){return t instanceof n?t:new n(e,{pub:t,pubEnc:i})},n.fromPrivate=function(e,t,i){return t instanceof n?t:new n(e,{priv:t,privEnc:i})},n.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(e,t){return("string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t)?this.pub.encode(t,e):this.pub},n.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(e,t){if(e.x||e.y){"mont"===this.ec.curve.type?s(e.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&s(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)},n.prototype.derive=function(e){return e.validate()||s(e.validate(),"public point not validated"),e.mul(this.priv).getX()},n.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},n.prototype.verify=function(e,t,i){return this.ec.verify(e,t,this,void 0,i)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},49099:function(e,t,i){"use strict";var r=i(75406),s=i(3303),n=s.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(n(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var i=e[t.place++];if(!(128&i))return i;var r=15&i;if(0===r||r>4||0===e[t.place])return!1;for(var s=0,n=0,o=t.place;n<r;n++,o++)s<<=8,s|=e[o],s>>>=0;return!(s<=127)&&(t.place=o,s)}function h(e){for(var t=0,i=e.length-1;!e[t]&&!(128&e[t+1])&&t<i;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128){e.push(t);return}var i=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|i);--i;)e.push(t>>>(i<<3)&255);e.push(t)}e.exports=o,o.prototype._importDER=function(e,t){e=s.toArray(e,t);var i=new a;if(48!==e[i.place++])return!1;var n=c(e,i);if(!1===n||n+i.place!==e.length||2!==e[i.place++])return!1;var o=c(e,i);if(!1===o||(128&e[i.place])!=0)return!1;var h=e.slice(i.place,o+i.place);if(i.place+=o,2!==e[i.place++])return!1;var u=c(e,i);if(!1===u||e.length!==u+i.place||(128&e[i.place])!=0)return!1;var d=e.slice(i.place,u+i.place);if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new r(h),this.s=new r(d),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&i[0]&&(i=[0].concat(i)),t=h(t),i=h(i);!i[0]&&!(128&i[1]);)i=i.slice(1);var r=[2];u(r,t.length),(r=r.concat(t)).push(2),u(r,i.length);var n=r.concat(i),o=[48];return u(o,n.length),o=o.concat(n),s.encode(o,e)}},57598:function(e,t,i){"use strict";var r=i(46330),s=i(88375),n=i(3303),o=n.assert,a=n.parseBytes,c=i(71010),h=i(64296);function u(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=s[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=u,u.prototype.sign=function(e,t){e=a(e);var i=this.keyFromSecret(t),r=this.hashInt(i.messagePrefix(),e),s=this.g.mul(r),n=this.encodePoint(s),o=this.hashInt(n,i.pubBytes(),e).mul(i.priv()),c=r.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:n})},u.prototype.verify=function(e,t,i){if(e=a(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var r=this.keyFromPublic(i),s=this.hashInt(t.Rencoded(),r.pubBytes(),e),n=this.g.mul(t.S());return t.R().add(r.pub().mul(s)).eq(n)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return n.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof h?e:new h(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=n.parseBytes(e)).length-1,i=e.slice(0,t).concat(-129&e[t]),r=(128&e[t])!=0,s=n.intFromLE(i);return this.curve.pointFromY(s,r)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return n.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},71010:function(e,t,i){"use strict";var r=i(3303),s=r.assert,n=r.parseBytes,o=r.cachedProperty;function a(e,t){this.eddsa=e,this._secret=n(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=n(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(a,"privBytes",function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[i]&=127,r[i]|=64,r}),o(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(e){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return s(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},a.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=a},64296:function(e,t,i){"use strict";var r=i(75406),s=i(3303),n=s.assert,o=s.cachedProperty,a=s.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(n(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),n(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(c,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(c,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(c,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(c,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},38813:function(e){"use strict";e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},3303:function(e,t,i){"use strict";var r=i(75406),s=i(8375),n=i(19940);t.assert=s,t.toArray=n.toArray,t.zero2=n.zero2,t.toHex=n.toHex,t.encode=n.encode,t.getNAF=function(e,t,i){var r=Array(Math.max(e.bitLength(),i)+1);for(o=0;o<r.length;o+=1)r[o]=0;var s=1<<t+1,n=e.clone();for(o=0;o<r.length;o++){var o,a,c=n.andln(s-1);n.isOdd()?(a=c>(s>>1)-1?(s>>1)-c:c,n.isubn(a)):a=0,r[o]=a,n.iushrn(1)}return r},t.getJSF=function(e,t){var i=[[],[]];e=e.clone(),t=t.clone();for(var r=0,s=0;e.cmpn(-r)>0||t.cmpn(-s)>0;){var n,o,a,c=e.andln(3)+r&3,h=t.andln(3)+s&3;3===c&&(c=-1),3===h&&(h=-1),o=(1&c)==0?0:(3==(n=e.andln(7)+r&7)||5===n)&&2===h?-c:c,i[0].push(o),a=(1&h)==0?0:(3==(n=t.andln(7)+s&7)||5===n)&&2===c?-h:h,i[1].push(a),2*r===o+1&&(r=1-r),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return i},t.cachedProperty=function(e,t,i){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},t.parseBytes=function(e){return"string"==typeof e?t.toArray(e,"hex"):e},t.intFromLE=function(e){return new r(e,"hex","le")}},17365:function(e){"use strict";var t,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function n(){n.init.call(this)}e.exports=n,e.exports.once=function(e,t){return new Promise(function(i,r){function s(i){e.removeListener(t,n),r(i)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",s),i([].slice.call(arguments))}g(e,t,n,{once:!0}),"error"!==t&&"function"==typeof e.on&&g(e,"error",s,{once:!0})})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function h(e,t,i,r){if(a(i),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),o=n[t]),void 0===o)o=n[t]=i,++e._eventsCount;else if("function"==typeof o?o=n[t]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),(s=c(e))>0&&o.length>s&&!o.warned){o.warned=!0;var s,n,o,h=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,console&&console.warn&&console.warn(h)}return e}function u(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},s=u.bind(r);return s.listener=i,r.wrapFn=s,s}function l(e,t,i){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(e){for(var t=Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(s):p(s,s.length)}function f(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function p(e,t){for(var i=Array(t),r=0;r<t;++r)i[r]=e[r];return i}function g(e,t,i,r){if("function"==typeof e.on)r.once?e.once(t,i):e.on(t,i);else if("function"==typeof e.addEventListener)e.addEventListener(t,function s(n){r.once&&e.removeEventListener(t,s),i(n)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),n.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return c(this)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var s="error"===e,n=this._events;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else for(var h=c.length,u=p(c,h),i=0;i<h;++i)r(u[i],this,t);return!0},n.prototype.addListener=function(e,t){return h(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return h(this,e,t,!0)},n.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},n.prototype.removeListener=function(e,t){var i,r,s,n,o;if(a(t),void 0===(r=this._events)||void 0===(i=r[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(s=-1,n=i.length-1;n>=0;n--)if(i[n]===t||i[n].listener===t){o=i[n].listener,s=n;break}if(s<0)return this;0===s?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,s),1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0==arguments.length){var s,n=Object.keys(i);for(r=0;r<n.length;++r)"removeListener"!==(s=n[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},n.prototype.listeners=function(e){return l(this,e,!0)},n.prototype.rawListeners=function(e){return l(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},n.prototype.listenerCount=f,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},30889:function(e){"use strict";e.exports=function(e,t){for(var i={},r=Object.keys(e),s=Array.isArray(t),n=0;n<r.length;n++){var o=r[n],a=e[o];(s?-1!==t.indexOf(o):t(o,a,e))&&(i[o]=a)}return i}},46330:function(e,t,i){t.utils=i(42777),t.common=i(37310),t.sha=i(45727),t.ripemd=i(55600),t.hmac=i(87195),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160},37310:function(e,t,i){"use strict";var r=i(42777),s=i(8375);function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=n,n.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var i=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-i,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-i,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this},n.prototype.digest=function(e){return this.update(this._pad()),s(null===this.pending),this._digest(e)},n.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,r=Array(i+this.padLength);r[0]=128;for(var s=1;s<i;s++)r[s]=0;if(e<<=3,"big"===this.endian){for(var n=8;n<this.padLength;n++)r[s++]=0;r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=e>>>24&255,r[s++]=e>>>16&255,r[s++]=e>>>8&255,r[s++]=255&e}else for(n=8,r[s++]=255&e,r[s++]=e>>>8&255,r[s++]=e>>>16&255,r[s++]=e>>>24&255,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0;n<this.padLength;n++)r[s++]=0;return r}},87195:function(e,t,i){"use strict";var r=i(42777),s=i(8375);function n(e,t,i){if(!(this instanceof n))return new n(e,t,i);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,i))}e.exports=n,n.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),s(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(t=0,this.inner=new this.Hash().update(e);t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)},n.prototype.update=function(e,t){return this.inner.update(e,t),this},n.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},55600:function(e,t,i){"use strict";var r=i(42777),s=i(37310),n=r.rotl32,o=r.sum32,a=r.sum32_3,c=r.sum32_4,h=s.BlockHash;function u(){if(!(this instanceof u))return new u;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,i,r){return e<=15?t^i^r:e<=31?t&i|~t&r:e<=47?(t|~i)^r:e<=63?t&r|i&~r:t^(i|~r)}r.inherits(u,h),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var i=this.h[0],r=this.h[1],s=this.h[2],h=this.h[3],u=this.h[4],b=i,y=r,m=s,v=h,w=u,_=0;_<80;_++){var D,E,S=o(n(c(i,d(_,r,s,h),e[l[_]+t],(D=_)<=15?0:D<=31?1518500249:D<=47?1859775393:D<=63?2400959708:2840853838),p[_]),u);i=u,u=h,h=n(s,10),s=r,r=S,S=o(n(c(b,d(79-_,y,m,v),e[f[_]+t],(E=_)<=15?1352829926:E<=31?1548603684:E<=47?1836072691:E<=63?2053994217:0),g[_]),w),b=w,w=v,v=n(m,10),m=y,y=S}S=a(this.h[1],s,v),this.h[1]=a(this.h[2],h,w),this.h[2]=a(this.h[3],u,b),this.h[3]=a(this.h[4],i,y),this.h[4]=a(this.h[0],r,m),this.h[0]=S},u.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},45727:function(e,t,i){"use strict";t.sha1=i(46684),t.sha224=i(22112),t.sha256=i(93717),t.sha384=i(94191),t.sha512=i(62482)},46684:function(e,t,i){"use strict";var r=i(42777),s=i(37310),n=i(24498),o=r.rotl32,a=r.sum32,c=r.sum32_5,h=n.ft_1,u=s.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}r.inherits(l,u),e.exports=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(e,t){for(var i=this.W,r=0;r<16;r++)i[r]=e[t+r];for(;r<i.length;r++)i[r]=o(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var s=this.h[0],n=this.h[1],u=this.h[2],l=this.h[3],f=this.h[4];for(r=0;r<i.length;r++){var p=~~(r/20),g=c(o(s,5),h(p,n,u,l),f,i[r],d[p]);f=l,l=u,u=o(n,30),n=s,s=g}this.h[0]=a(this.h[0],s),this.h[1]=a(this.h[1],n),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],l),this.h[4]=a(this.h[4],f)},l.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},22112:function(e,t,i){"use strict";var r=i(42777),s=i(93717);function n(){if(!(this instanceof n))return new n;s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(n,s),e.exports=n,n.blockSize=512,n.outSize=224,n.hmacStrength=192,n.padLength=64,n.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},93717:function(e,t,i){"use strict";var r=i(42777),s=i(37310),n=i(24498),o=i(8375),a=r.sum32,c=r.sum32_4,h=r.sum32_5,u=n.ch32,d=n.maj32,l=n.s0_256,f=n.s1_256,p=n.g0_256,g=n.g1_256,b=s.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;b.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=Array(64)}r.inherits(m,b),e.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var i=this.W,r=0;r<16;r++)i[r]=e[t+r];for(;r<i.length;r++)i[r]=c(g(i[r-2]),i[r-7],p(i[r-15]),i[r-16]);var s=this.h[0],n=this.h[1],b=this.h[2],y=this.h[3],m=this.h[4],v=this.h[5],w=this.h[6],_=this.h[7];for(o(this.k.length===i.length),r=0;r<i.length;r++){var D=h(_,f(m),u(m,v,w),this.k[r],i[r]),E=a(l(s),d(s,n,b));_=w,w=v,v=m,m=a(y,D),y=b,b=n,n=s,s=a(D,E)}this.h[0]=a(this.h[0],s),this.h[1]=a(this.h[1],n),this.h[2]=a(this.h[2],b),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],m),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],_)},m.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},94191:function(e,t,i){"use strict";var r=i(42777),s=i(62482);function n(){if(!(this instanceof n))return new n;s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(n,s),e.exports=n,n.blockSize=1024,n.outSize=384,n.hmacStrength=192,n.padLength=128,n.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},62482:function(e,t,i){"use strict";var r=i(42777),s=i(37310),n=i(8375),o=r.rotr64_hi,a=r.rotr64_lo,c=r.shr64_hi,h=r.shr64_lo,u=r.sum64,d=r.sum64_hi,l=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,g=r.sum64_5_hi,b=r.sum64_5_lo,y=s.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=Array(160)}r.inherits(v,y),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var i=this.W,r=0;r<32;r++)i[r]=e[t+r];for(;r<i.length;r+=2){var s=function(e,t){var i=o(e,t,19)^o(t,e,29)^c(e,t,6);return i<0&&(i+=4294967296),i}(i[r-4],i[r-3]),n=function(e,t){var i=a(e,t,19)^a(t,e,29)^h(e,t,6);return i<0&&(i+=4294967296),i}(i[r-4],i[r-3]),u=i[r-14],d=i[r-13],l=function(e,t){var i=o(e,t,1)^o(e,t,8)^c(e,t,7);return i<0&&(i+=4294967296),i}(i[r-30],i[r-29]),g=function(e,t){var i=a(e,t,1)^a(e,t,8)^h(e,t,7);return i<0&&(i+=4294967296),i}(i[r-30],i[r-29]),b=i[r-32],y=i[r-31];i[r]=f(s,n,u,d,l,g,b,y),i[r+1]=p(s,n,u,d,l,g,b,y)}},v.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,r=this.h[0],s=this.h[1],c=this.h[2],h=this.h[3],f=this.h[4],p=this.h[5],y=this.h[6],m=this.h[7],v=this.h[8],w=this.h[9],_=this.h[10],D=this.h[11],E=this.h[12],S=this.h[13],I=this.h[14],M=this.h[15];n(this.k.length===i.length);for(var A=0;A<i.length;A+=2){var x=I,C=M,R=function(e,t){var i=o(e,t,14)^o(e,t,18)^o(t,e,9);return i<0&&(i+=4294967296),i}(v,w),O=function(e,t){var i=a(e,t,14)^a(e,t,18)^a(t,e,9);return i<0&&(i+=4294967296),i}(v,w),P=function(e,t,i,r,s){var n=e&i^~e&s;return n<0&&(n+=4294967296),n}(v,0,_,0,E,S),T=function(e,t,i,r,s,n){var o=t&r^~t&n;return o<0&&(o+=4294967296),o}(0,w,0,D,0,S),N=this.k[A],k=this.k[A+1],L=i[A],q=i[A+1],z=g(x,C,R,O,P,T,N,k,L,q),j=b(x,C,R,O,P,T,N,k,L,q);x=function(e,t){var i=o(e,t,28)^o(t,e,2)^o(t,e,7);return i<0&&(i+=4294967296),i}(r,s);var U=d(x,C=function(e,t){var i=a(e,t,28)^a(t,e,2)^a(t,e,7);return i<0&&(i+=4294967296),i}(r,s),R=function(e,t,i,r,s){var n=e&i^e&s^i&s;return n<0&&(n+=4294967296),n}(r,0,c,0,f,p),O=function(e,t,i,r,s,n){var o=t&r^t&n^r&n;return o<0&&(o+=4294967296),o}(0,s,0,h,0,p)),F=l(x,C,R,O);I=E,M=S,E=_,S=D,_=v,D=w,v=d(y,m,z,j),w=l(m,m,z,j),y=f,m=p,f=c,p=h,c=r,h=s,r=d(z,j,U,F),s=l(z,j,U,F)}u(this.h,0,r,s),u(this.h,2,c,h),u(this.h,4,f,p),u(this.h,6,y,m),u(this.h,8,v,w),u(this.h,10,_,D),u(this.h,12,E,S),u(this.h,14,I,M)},v.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},24498:function(e,t,i){"use strict";var r=i(42777).rotr32;function s(e,t,i){return e&t^e&i^t&i}t.ft_1=function(e,t,i,r){return 0===e?t&i^~t&r:1===e||3===e?t^i^r:2===e?s(t,i,r):void 0},t.ch32=function(e,t,i){return e&t^~e&i},t.maj32=s,t.p32=function(e,t,i){return e^t^i},t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},42777:function(e,t,i){"use strict";var r=i(8375),s=i(85093);function n(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function a(e){if(7===e.length)return"0"+e;if(6===e.length)return"00"+e;if(5===e.length)return"000"+e;if(4===e.length)return"0000"+e;if(3===e.length)return"00000"+e;if(2===e.length)return"000000"+e;if(1===e.length)return"0000000"+e;else return e}t.inherits=s,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"==typeof e){if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)i.push(parseInt(e[s]+e[s+1],16))}else for(var r=0,s=0;s<e.length;s++){var n,o,a=e.charCodeAt(s);a<128?i[r++]=a:(a<2048?i[r++]=a>>6|192:((n=e,o=s,(64512&n.charCodeAt(o))!=55296||o<0||o+1>=n.length?1:(64512&n.charCodeAt(o+1))!=56320)?i[r++]=a>>12|224:(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++s)),i[r++]=a>>18|240,i[r++]=a>>12&63|128),i[r++]=a>>6&63|128),i[r++]=63&a|128)}}else for(s=0;s<e.length;s++)i[s]=0|e[s];return i},t.toHex=function(e){for(var t="",i=0;i<e.length;i++)t+=o(e[i].toString(16));return t},t.htonl=n,t.toHex32=function(e,t){for(var i="",r=0;r<e.length;r++){var s=e[r];"little"===t&&(s=n(s)),i+=a(s.toString(16))}return i},t.zero2=o,t.zero8=a,t.join32=function(e,t,i,s){var n,o=i-t;r(o%4==0);for(var a=Array(o/4),c=0,h=t;c<a.length;c++,h+=4)n="big"===s?e[h]<<24|e[h+1]<<16|e[h+2]<<8|e[h+3]:e[h+3]<<24|e[h+2]<<16|e[h+1]<<8|e[h],a[c]=n>>>0;return a},t.split32=function(e,t){for(var i=Array(4*e.length),r=0,s=0;r<e.length;r++,s+=4){var n=e[r];"big"===t?(i[s]=n>>>24,i[s+1]=n>>>16&255,i[s+2]=n>>>8&255,i[s+3]=255&n):(i[s+3]=n>>>24,i[s+2]=n>>>16&255,i[s+1]=n>>>8&255,i[s]=255&n)}return i},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,i){return e+t+i>>>0},t.sum32_4=function(e,t,i,r){return e+t+i+r>>>0},t.sum32_5=function(e,t,i,r,s){return e+t+i+r+s>>>0},t.sum64=function(e,t,i,r){var s=e[t],n=r+e[t+1]>>>0;e[t]=(n<r?1:0)+i+s>>>0,e[t+1]=n},t.sum64_hi=function(e,t,i,r){return(t+r>>>0<t?1:0)+e+i>>>0},t.sum64_lo=function(e,t,i,r){return t+r>>>0},t.sum64_4_hi=function(e,t,i,r,s,n,o,a){var c,h=t;return e+i+s+o+(0+((h=h+r>>>0)<t?1:0)+((h=h+n>>>0)<n?1:0)+((h=h+a>>>0)<a?1:0))>>>0},t.sum64_4_lo=function(e,t,i,r,s,n,o,a){return t+r+n+a>>>0},t.sum64_5_hi=function(e,t,i,r,s,n,o,a,c,h){var u,d=t;return e+i+s+o+c+(0+((d=d+r>>>0)<t?1:0)+((d=d+n>>>0)<n?1:0)+((d=d+a>>>0)<a?1:0)+((d=d+h>>>0)<h?1:0))>>>0},t.sum64_5_lo=function(e,t,i,r,s,n,o,a,c,h){return t+r+n+a+h>>>0},t.rotr64_hi=function(e,t,i){return(t<<32-i|e>>>i)>>>0},t.rotr64_lo=function(e,t,i){return(e<<32-i|t>>>i)>>>0},t.shr64_hi=function(e,t,i){return e>>>i},t.shr64_lo=function(e,t,i){return(e<<32-i|t>>>i)>>>0}},27871:function(e,t,i){"use strict";var r=i(46330),s=i(19940),n=i(8375);function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=s.toArray(e.entropy,e.entropyEnc||"hex"),i=s.toArray(e.nonce,e.nonceEnc||"hex"),r=s.toArray(e.pers,e.persEnc||"hex");n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,r)}e.exports=o,o.prototype._init=function(e,t,i){var r=e.concat(t).concat(i);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,i,r){"string"!=typeof t&&(r=i,i=t,t=null),e=s.toArray(e,t),i=s.toArray(i,r),n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},o.prototype.generate=function(e,t,i,r){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof t&&(r=i,i=t,t=null),i&&(i=s.toArray(i,r||"hex"),this._update(i));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,e);return this._update(i),this._reseed++,s.encode(o,t)}},85093:function(e){"use strict";"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},55999:function(e,t,i){"use strict";e=i.nmd(e);var r,s,n,o="__lodash_hash_undefined__",a="[object Arguments]",c="[object Array]",h="[object Boolean]",u="[object Date]",d="[object Error]",l="[object Function]",f="[object Map]",p="[object Number]",g="[object Object]",b="[object Promise]",y="[object RegExp]",m="[object Set]",v="[object String]",w="[object WeakMap]",_="[object ArrayBuffer]",D="[object DataView]",E=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[a]=I[c]=I[_]=I[h]=I[D]=I[u]=I[d]=I[l]=I[f]=I[p]=I[g]=I[y]=I[m]=I[v]=I[w]=!1;var M="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,A="object"==typeof self&&self&&self.Object===Object&&self,x=M||A||Function("return this")(),C=t&&!t.nodeType&&t,R=C&&e&&!e.nodeType&&e,O=R&&R.exports===C,P=O&&M.process,T=function(){try{return P&&P.binding&&P.binding("util")}catch(e){}}(),N=T&&T.isTypedArray;function k(e){var t=-1,i=Array(e.size);return e.forEach(function(e,r){i[++t]=[r,e]}),i}function L(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}var q=Array.prototype,z=Function.prototype,j=Object.prototype,U=x["__core-js_shared__"],F=z.toString,B=j.hasOwnProperty,K=(r=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",V=j.toString,H=RegExp("^"+F.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=O?x.Buffer:void 0,W=x.Symbol,Y=x.Uint8Array,G=j.propertyIsEnumerable,Q=q.splice,X=W?W.toStringTag:void 0,Z=Object.getOwnPropertySymbols,$=J?J.isBuffer:void 0,ee=(s=Object.keys,n=Object,function(e){return s(n(e))}),et=eI(x,"DataView"),ei=eI(x,"Map"),er=eI(x,"Promise"),es=eI(x,"Set"),en=eI(x,"WeakMap"),eo=eI(Object,"create"),ea=ex(et),ec=ex(ei),eh=ex(er),eu=ex(es),ed=ex(en),el=W?W.prototype:void 0,ef=el?el.valueOf:void 0;function ep(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function eg(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function eb(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function ey(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new eb;++t<i;)this.add(e[t])}function em(e){var t=this.__data__=new eg(e);this.size=t.size}function ev(e,t){for(var i=e.length;i--;)if(eC(e[i][0],t))return i;return -1}function ew(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":X&&X in Object(e)?function(e){var t=B.call(e,X),i=e[X];try{e[X]=void 0;var r=!0}catch(e){}var s=V.call(e);return r&&(t?e[X]=i:delete e[X]),s}(e):V.call(e)}function e_(e){return eL(e)&&ew(e)==a}function eD(e,t,i,r,s,n){var o=1&i,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var h=n.get(e);if(h&&n.get(t))return h==t;var u=-1,d=!0,l=2&i?new ey:void 0;for(n.set(e,t),n.set(t,e);++u<a;){var f=e[u],p=t[u];if(r)var g=o?r(p,f,u,t,e,n):r(f,p,u,e,t,n);if(void 0!==g){if(g)continue;d=!1;break}if(l){if(!function(e,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}(t,function(e,t){if(!l.has(t)&&(f===e||s(f,e,i,r,n)))return l.push(t)})){d=!1;break}}else if(!(f===p||s(f,p,i,r,n))){d=!1;break}}return n.delete(e),n.delete(t),d}function eE(e){var t;return t=function(e){return null!=e&&eN(e.length)&&!eT(e)?function(e,t){var i,r=eO(e),s=!r&&eR(e),n=!r&&!s&&eP(e),o=!r&&!s&&!n&&eq(e),a=r||s||n||o,c=a?function(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}(e.length,String):[],h=c.length;for(var u in e)B.call(e,u)&&!(a&&("length"==u||n&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||(i=null==(i=h)?9007199254740991:i)&&("number"==typeof u||S.test(u))&&u>-1&&u%1==0&&u<i))&&c.push(u);return c}(e):function(e){if(t=e&&e.constructor,e!==("function"==typeof t&&t.prototype||j))return ee(e);var t,i=[];for(var r in Object(e))B.call(e,r)&&"constructor"!=r&&i.push(r);return i}(e)}(e),eO(e)?t:function(e,t){for(var i=-1,r=t.length,s=e.length;++i<r;)e[s+i]=t[i];return e}(t,eM(e))}function eS(e,t){var i,r=e.__data__;return("string"==(i=typeof t)||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function eI(e,t){var i=null==e?void 0:e[t];return!(!ek(i)||K&&K in i)&&(eT(i)?H:E).test(ex(i))?i:void 0}ep.prototype.clear=function(){this.__data__=eo?eo(null):{},this.size=0},ep.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ep.prototype.get=function(e){var t=this.__data__;if(eo){var i=t[e];return i===o?void 0:i}return B.call(t,e)?t[e]:void 0},ep.prototype.has=function(e){var t=this.__data__;return eo?void 0!==t[e]:B.call(t,e)},ep.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=eo&&void 0===t?o:t,this},eg.prototype.clear=function(){this.__data__=[],this.size=0},eg.prototype.delete=function(e){var t=this.__data__,i=ev(t,e);return!(i<0)&&(i==t.length-1?t.pop():Q.call(t,i,1),--this.size,!0)},eg.prototype.get=function(e){var t=this.__data__,i=ev(t,e);return i<0?void 0:t[i][1]},eg.prototype.has=function(e){return ev(this.__data__,e)>-1},eg.prototype.set=function(e,t){var i=this.__data__,r=ev(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this},eb.prototype.clear=function(){this.size=0,this.__data__={hash:new ep,map:new(ei||eg),string:new ep}},eb.prototype.delete=function(e){var t=eS(this,e).delete(e);return this.size-=t?1:0,t},eb.prototype.get=function(e){return eS(this,e).get(e)},eb.prototype.has=function(e){return eS(this,e).has(e)},eb.prototype.set=function(e,t){var i=eS(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this},ey.prototype.add=ey.prototype.push=function(e){return this.__data__.set(e,o),this},ey.prototype.has=function(e){return this.__data__.has(e)},em.prototype.clear=function(){this.__data__=new eg,this.size=0},em.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},em.prototype.get=function(e){return this.__data__.get(e)},em.prototype.has=function(e){return this.__data__.has(e)},em.prototype.set=function(e,t){var i=this.__data__;if(i instanceof eg){var r=i.__data__;if(!ei||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new eb(r)}return i.set(e,t),this.size=i.size,this};var eM=Z?function(e){return null==e?[]:function(e,t){for(var i=-1,r=null==e?0:e.length,s=0,n=[];++i<r;){var o=e[i];t(o,i,e)&&(n[s++]=o)}return n}(Z(e=Object(e)),function(t){return G.call(e,t)})}:function(){return[]},eA=ew;function ex(e){if(null!=e){try{return F.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eC(e,t){return e===t||e!=e&&t!=t}(et&&eA(new et(new ArrayBuffer(1)))!=D||ei&&eA(new ei)!=f||er&&eA(er.resolve())!=b||es&&eA(new es)!=m||en&&eA(new en)!=w)&&(eA=function(e){var t=ew(e),i=t==g?e.constructor:void 0,r=i?ex(i):"";if(r)switch(r){case ea:return D;case ec:return f;case eh:return b;case eu:return m;case ed:return w}return t});var eR=e_(function(){return arguments}())?e_:function(e){return eL(e)&&B.call(e,"callee")&&!G.call(e,"callee")},eO=Array.isArray,eP=$||function(){return!1};function eT(e){if(!ek(e))return!1;var t=ew(e);return t==l||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eN(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ek(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eL(e){return null!=e&&"object"==typeof e}var eq=N?function(e){return N(e)}:function(e){return eL(e)&&eN(e.length)&&!!I[ew(e)]};e.exports=function(e,t){return function e(t,i,r,s,n){return t===i||(null!=t&&null!=i&&(eL(t)||eL(i))?function(e,t,i,r,s,n){var o=eO(e),l=eO(t),b=o?c:eA(e),w=l?c:eA(t);b=b==a?g:b,w=w==a?g:w;var E=b==g,S=w==g,I=b==w;if(I&&eP(e)){if(!eP(t))return!1;o=!0,E=!1}if(I&&!E)return n||(n=new em),o||eq(e)?eD(e,t,i,r,s,n):function(e,t,i,r,s,n,o){switch(i){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case _:if(e.byteLength!=t.byteLength||!n(new Y(e),new Y(t)))break;return!0;case h:case u:case p:return eC(+e,+t);case d:return e.name==t.name&&e.message==t.message;case y:case v:return e==t+"";case f:var a=k;case m:var c=1&r;if(a||(a=L),e.size!=t.size&&!c)break;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var g=eD(a(e),a(t),r,s,n,o);return o.delete(e),g;case"[object Symbol]":if(ef)return ef.call(e)==ef.call(t)}return!1}(e,t,b,i,r,s,n);if(!(1&i)){var M=E&&B.call(e,"__wrapped__"),A=S&&B.call(t,"__wrapped__");if(M||A){var x=M?e.value():e,C=A?t.value():t;return n||(n=new em),s(x,C,i,r,n)}}return!!I&&(n||(n=new em),function(e,t,i,r,s,n){var o=1&i,a=eE(e),c=a.length;if(c!=eE(t).length&&!o)return!1;for(var h=c;h--;){var u=a[h];if(!(o?u in t:B.call(t,u)))return!1}var d=n.get(e);if(d&&n.get(t))return d==t;var l=!0;n.set(e,t),n.set(t,e);for(var f=o;++h<c;){var p=e[u=a[h]],g=t[u];if(r)var b=o?r(g,p,u,t,e,n):r(p,g,u,e,t,n);if(!(void 0===b?p===g||s(p,g,i,r,n):b)){l=!1;break}f||(f="constructor"==u)}if(l&&!f){var y=e.constructor,m=t.constructor;y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(l=!1)}return n.delete(e),n.delete(t),l}(e,t,i,r,s,n))}(t,i,r,s,e,n):t!=t&&i!=i)}(e,t)}},8375:function(e){"use strict";function t(e,t){if(!e)throw Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,i){if(e!=t)throw Error(i||"Assertion failed: "+e+" != "+t)}},19940:function(e,t){"use strict";function i(e){return 1===e.length?"0"+e:e}function r(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)i[r]=0|e[r];return i}if("hex"===t){(e=e.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(e="0"+e);for(var r=0;r<e.length;r+=2)i.push(parseInt(e[r]+e[r+1],16))}else for(var r=0;r<e.length;r++){var s=e.charCodeAt(r),n=s>>8,o=255&s;n?i.push(n,o):i.push(o)}return i},t.zero2=i,t.toHex=r,t.encode=function(e,t){return"hex"===t?r(e):e}},94921:function(e,t,i){"use strict";let r=i(15245),s=i(2546),n=i(70973),o=i(30889),a=e=>null==e,c=Symbol("encodeFragmentIdentifier");function h(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function u(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function d(e,t){return t.decode?s(e):e}function l(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function f(e){let t=(e=l(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function g(e,t){h((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let i=function(e){let t;switch(e.arrayFormat){case"index":return(e,i,r)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){r[e]=i;return}void 0===r[e]&&(r[e]={}),r[e][t[1]]=i};case"bracket":return(e,i,r)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){r[e]=i;return}if(void 0===r[e]){r[e]=[i];return}r[e]=[].concat(r[e],i)};case"colon-list-separator":return(e,i,r)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){r[e]=i;return}if(void 0===r[e]){r[e]=[i];return}r[e]=[].concat(r[e],i)};case"comma":case"separator":return(t,i,r)=>{let s="string"==typeof i&&i.includes(e.arrayFormatSeparator),n="string"==typeof i&&!s&&d(i,e).includes(e.arrayFormatSeparator);i=n?d(i,e):i;let o=s||n?i.split(e.arrayFormatSeparator).map(t=>d(t,e)):null===i?i:d(i,e);r[t]=o};case"bracket-separator":return(t,i,r)=>{let s=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!s){r[t]=i?d(i,e):i;return}let n=null===i?[]:i.split(e.arrayFormatSeparator).map(t=>d(t,e));if(void 0===r[t]){r[t]=n;return}r[t]=[].concat(r[t],n)};default:return(e,t,i)=>{if(void 0===i[e]){i[e]=t;return}i[e]=[].concat(i[e],t)}}}(t),r=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return r;for(let s of e.split("&")){if(""===s)continue;let[e,o]=n(t.decode?s.replace(/\+/g," "):s,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:d(o,t),i(d(e,t),o,r)}for(let e of Object.keys(r)){let i=r[e];if("object"==typeof i&&null!==i)for(let e of Object.keys(i))i[e]=p(i[e],t);else r[e]=p(i,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{let i=r[t];return i&&"object"==typeof i&&!Array.isArray(i)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(i):e[t]=i,e},Object.create(null))}t.extract=f,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";h((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let i=i=>t.skipNull&&a(e[i])||t.skipEmptyString&&""===e[i],r=function(e){switch(e.arrayFormat){case"index":return t=>(i,r)=>{let s=i.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:null===r?[...i,[u(t,e),"[",s,"]"].join("")]:[...i,[u(t,e),"[",u(s,e),"]=",u(r,e)].join("")]};case"bracket":return t=>(i,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:null===r?[...i,[u(t,e),"[]"].join("")]:[...i,[u(t,e),"[]=",u(r,e)].join("")];case"colon-list-separator":return t=>(i,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:null===r?[...i,[u(t,e),":list="].join("")]:[...i,[u(t,e),":list=",u(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return i=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:(s=null===s?"":s,0===r.length)?[[u(i,e),t,u(s,e)].join("")]:[[r,u(s,e)].join(e.arrayFormatSeparator)]}default:return t=>(i,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:null===r?[...i,u(t,e)]:[...i,[u(t,e),"=",u(r,e)].join("")]}}(t),s={};for(let t of Object.keys(e))i(t)||(s[t]=e[t]);let n=Object.keys(s);return!1!==t.sort&&n.sort(t.sort),n.map(i=>{let s=e[i];return void 0===s?"":null===s?u(i,t):Array.isArray(s)?0===s.length&&"bracket-separator"===t.arrayFormat?u(i,t)+"[]":s.reduce(r(i),[]).join("&"):u(i,t)+"="+u(s,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[i,r]=n(e,"#");return Object.assign({url:i.split("?")[0]||"",query:g(f(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:d(r,t)}:{})},t.stringifyUrl=(e,i)=>{i=Object.assign({encode:!0,strict:!0,[c]:!0},i);let r=l(e.url).split("?")[0]||"",s=t.extract(e.url),n=Object.assign(t.parse(s,{sort:!1}),e.query),o=t.stringify(n,i);o&&(o="?".concat(o));let a=function(e){let t="",i=e.indexOf("#");return -1!==i&&(t=e.slice(i)),t}(e.url);return e.fragmentIdentifier&&(a="#".concat(i[c]?u(e.fragmentIdentifier,i):e.fragmentIdentifier)),"".concat(r).concat(o).concat(a)},t.pick=(e,i,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[c]:!1},r);let{url:s,query:n,fragmentIdentifier:a}=t.parseUrl(e,r);return t.stringifyUrl({url:s,query:o(n,i),fragmentIdentifier:a},r)},t.exclude=(e,i,r)=>{let s=Array.isArray(i)?e=>!i.includes(e):(e,t)=>!i(e,t);return t.pick(e,s,r)}},22370:function(e){"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,i,r){var s=r&&r.stringify||t;if("object"==typeof e&&null!==e){var n=i.length+1;if(1===n)return e;var o=Array(n);o[0]=s(e);for(var a=1;a<n;a++)o[a]=s(i[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=i.length;if(0===c)return e;for(var h="",u=0,d=-1,l=e&&e.length||0,f=0;f<l;){if(37===e.charCodeAt(f)&&f+1<l){switch(d=d>-1?d:0,e.charCodeAt(f+1)){case 100:case 102:if(u>=c||null==i[u])break;d<f&&(h+=e.slice(d,f)),h+=Number(i[u]),d=f+2,f++;break;case 105:if(u>=c||null==i[u])break;d<f&&(h+=e.slice(d,f)),h+=Math.floor(Number(i[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||void 0===i[u])break;d<f&&(h+=e.slice(d,f));var p=typeof i[u];if("string"===p){h+="'"+i[u]+"'",d=f+2,f++;break}if("function"===p){h+=i[u].name||"<anonymous>",d=f+2,f++;break}h+=s(i[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(h+=e.slice(d,f)),h+=String(i[u]),d=f+2,f++;break;case 37:d<f&&(h+=e.slice(d,f)),h+="%",d=f+2,f++,u--}++u}++f}return -1===d?e:(d<l&&(h+=e.slice(d)),h)}},70973:function(e){"use strict";e.exports=(e,t)=>{if(!("string"==typeof e&&"string"==typeof t))throw TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];let i=e.indexOf(t);return -1===i?[e]:[e.slice(0,i),e.slice(i+t.length)]}},15245:function(e){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%".concat(e.charCodeAt(0).toString(16).toUpperCase()))},50547:function(e,t,i){"use strict";i.r(t),i.d(t,{__assign:function(){return n},__asyncDelegator:function(){return w},__asyncGenerator:function(){return v},__asyncValues:function(){return _},__await:function(){return m},__awaiter:function(){return u},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return M},__createBinding:function(){return l},__decorate:function(){return a},__exportStar:function(){return f},__extends:function(){return s},__generator:function(){return d},__importDefault:function(){return S},__importStar:function(){return E},__makeTemplateObject:function(){return D},__metadata:function(){return h},__param:function(){return c},__read:function(){return g},__rest:function(){return o},__spread:function(){return b},__spreadArrays:function(){return y},__values:function(){return p}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function s(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var n=function(){return(n=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function o(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)0>t.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]]);return i}function a(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function c(e,t){return function(i,r){t(i,r,e)}}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,i,r){return new(i||(i=Promise))(function(s,n){function o(e){try{c(r.next(e))}catch(e){n(e)}}function a(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})}function d(e,t){var i,r,s,n,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(s=2&n[0]?r.return:n[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){o.label=n[1];break}if(6===n[0]&&o.label<s[1]){o.label=s[1],s=n;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(n);break}s[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],r=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}}function l(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}function f(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||(t[i]=e[i])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,s,n=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return o}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function v(e,t,i){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,s=i.apply(e,t||[]),n=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){s[e]&&(r[e]=function(t){return new Promise(function(i,r){n.push([e,t,i,r])>1||a(e,t)})})}function a(e,t){try{var i;(i=s[e](t)).value instanceof m?Promise.resolve(i.value.v).then(c,h):u(n[0][2],i)}catch(e){u(n[0][3],e)}}function c(e){a("next",e)}function h(e){a("throw",e)}function u(e,t){e(t),n.shift(),n.length&&a(n[0][0],n[0][1])}}function w(e){var t,i;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,s){t[r]=e[r]?function(t){return(i=!i)?{value:m(e[r](t)),done:"return"===r}:s?s(t):t}:s}}function _(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise(function(r,s){!function(e,t,i,r){Promise.resolve(r).then(function(t){e({value:t,done:i})},t)}(r,s,(t=e[i](t)).done,t.value)})}}}function D(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function M(e,t,i){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,i),i}},18224:function(e){"use strict";e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},62156:function(e,t,i){"use strict";let r=i(22370);e.exports=n;let s=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function n(e){var t,i;(e=e||{}).browser=e.browser||{};let r=e.browser.transmit;if(r&&"function"!=typeof r.send)throw Error("pino: transmit option must have a send function");let u=e.browser.write||s;e.browser.write&&(e.browser.asObject=!0);let d=e.serializers||{},g=Array.isArray(t=e.browser.serialize)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(d),b=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(b=!1),"function"==typeof u&&(u.error=u.fatal=u.warn=u.info=u.debug=u.trace=u),!1===e.enabled&&(e.level="silent");let y=e.level||"info",m=Object.create(u);m.log||(m.log=l),Object.defineProperty(m,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(m,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,o(v,m,"error","log"),o(v,m,"fatal","error"),o(v,m,"warn","error"),o(v,m,"info","log"),o(v,m,"debug","log"),o(v,m,"trace","log")}});let v={transmit:r,serialize:g,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(i=e).timestamp?i.timestamp:!1===i.timestamp?f:p};return m.levels=n.levels,m.level=y,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=l,m.serializers=d,m._serialize=g,m._stdErrSerialize=b,m.child=function(t,i){if(!t)throw Error("missing bindings for child Pino");i=i||{},g&&t.serializers&&(i.serializers=t.serializers);let s=i.serializers;if(g&&s){var n=Object.assign({},d,s),o=!0===e.browser.serialize?Object.keys(n):g;delete t.serializers,a([t],o,n,this._stdErrSerialize)}function u(e){this._childLevel=(0|e._childLevel)+1,this.error=c(e,t,"error"),this.fatal=c(e,t,"fatal"),this.warn=c(e,t,"warn"),this.info=c(e,t,"info"),this.debug=c(e,t,"debug"),this.trace=c(e,t,"trace"),n&&(this.serializers=n,this._serialize=o),r&&(this._logEvent=h([].concat(e._logEvent.bindings,t)))}return u.prototype=this,new u(this)},r&&(m._logEvent=h()),m}function o(e,t,i,o){let c=Object.getPrototypeOf(t);t[i]=t.levelVal>t.levels.values[i]?l:c[i]?c[i]:s[i]||s[o]||l,function(e,t,i){if(e.transmit||t[i]!==l){var o;t[i]=(o=t[i],function(){let c=e.timestamp(),u=Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===s?s:this;for(var l=0;l<u.length;l++)u[l]=arguments[l];if(e.serialize&&!e.asObject&&a(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?o.call(d,function(e,t,i,s){e._serialize&&a(i,e._serialize,e.serializers,e._stdErrSerialize);let o=i.slice(),c=o[0],h={};s&&(h.time=s),h.level=n.levels.values[t];let u=(0|e._childLevel)+1;if(u<1&&(u=1),null!==c&&"object"==typeof c){for(;u--&&"object"==typeof o[0];)Object.assign(h,o.shift());c=o.length?r(o.shift(),o):void 0}else"string"==typeof c&&(c=r(o.shift(),o));return void 0!==c&&(h.msg=c),h}(this,i,u,c)):o.apply(d,u),e.transmit){let r=e.transmit.level||t.level,s=n.levels.values[r],o=n.levels.values[i];if(o<s)return;(function(e,t,i){let r=t.send,s=t.ts,n=t.methodLevel,o=t.methodValue,c=t.val,u=e._logEvent.bindings;a(i,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=s,e._logEvent.messages=i.filter(function(e){return -1===u.indexOf(e)}),e._logEvent.level.label=n,e._logEvent.level.value=o,r(n,e._logEvent,c),e._logEvent=h(u)})(this,{ts:c,methodLevel:i,methodValue:o,transmitLevel:r,transmitValue:n.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}})}}(e,t,i)}function a(e,t,i,r){for(let s in e)if(r&&e[s]instanceof Error)e[s]=n.stdSerializers.err(e[s]);else if("object"==typeof e[s]&&!Array.isArray(e[s]))for(let r in e[s])t&&t.indexOf(r)>-1&&r in i&&(e[s][r]=i[r](e[s][r]))}function c(e,t,i){return function(){let r=Array(1+arguments.length);r[0]=t;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return e[i].apply(this,r)}}function h(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function u(){return{}}function d(e){return e}function l(){}function f(){return!1}function p(){return Date.now()}n.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},n.stdSerializers={mapHttpRequest:u,mapHttpResponse:u,wrapRequestSerializer:d,wrapResponseSerializer:d,wrapErrorSerializer:d,req:u,res:u,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let i in e)void 0===t[i]&&(t[i]=e[i]);return t}},n.stdTimeFunctions=Object.assign({},{nullTime:f,epochTime:p,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},52034:function(e,t,i){"use strict";function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}i.d(t,{E:function(){return r}})},46105:function(e,t,i){"use strict";i.d(t,{z:function(){return s}});var r=i(52034);function s(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let i=(0,r.E)(t),s=0;for(let t of e)i.set(t,s),s+=t.length;return i}},57564:function(e,t,i){"use strict";i.d(t,{m:function(){return s}});var r=i(62572);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",i=r.Z[t];if(!i)throw Error('Unsupported encoding "'.concat(t,'"'));return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):i.decoder.decode("".concat(i.prefix).concat(e))}},33194:function(e,t,i){"use strict";i.d(t,{BB:function(){return n.B},mL:function(){return s.m},zo:function(){return r.z}});var r=i(46105),s=i(57564),n=i(20023)},20023:function(e,t,i){"use strict";i.d(t,{B:function(){return s}});var r=i(62572);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",i=r.Z[t];if(!i)throw Error('Unsupported encoding "'.concat(t,'"'));return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):i.encoder.encode(e).substring(1)}},62572:function(e,t,i){"use strict";i.d(t,{Z:function(){return eJ}});var r={};i.r(r),i.d(r,{identity:function(){return P}});var s={};i.r(s),i.d(s,{base2:function(){return T}});var n={};i.r(n),i.d(n,{base8:function(){return N}});var o={};i.r(o),i.d(o,{base10:function(){return k}});var a={};i.r(a),i.d(a,{base16:function(){return L},base16upper:function(){return q}});var c={};i.r(c),i.d(c,{base32:function(){return z},base32hex:function(){return B},base32hexpad:function(){return V},base32hexpadupper:function(){return H},base32hexupper:function(){return K},base32pad:function(){return U},base32padupper:function(){return F},base32upper:function(){return j},base32z:function(){return J}});var h={};i.r(h),i.d(h,{base36:function(){return W},base36upper:function(){return Y}});var u={};i.r(u),i.d(u,{base58btc:function(){return G},base58flickr:function(){return Q}});var d={};i.r(d),i.d(d,{base64:function(){return X},base64pad:function(){return Z},base64url:function(){return $},base64urlpad:function(){return ee}});var l={};i.r(l),i.d(l,{base256emoji:function(){return es}});var f={};i.r(f),i.d(f,{sha256:function(){return eb},sha512:function(){return ey}});var p={};i.r(p),i.d(p,{identity:function(){return em}});var g={};i.r(g),i.d(g,{code:function(){return ew},decode:function(){return eD},encode:function(){return e_},name:function(){return ev}});var b={};i.r(b),i.d(b,{code:function(){return eM},decode:function(){return ex},encode:function(){return eA},name:function(){return eI}});var y=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var s=0;s<e.length;s++){var n=e.charAt(s),o=n.charCodeAt(0);if(255!==i[o])throw TypeError(n+" is ambiguous");i[o]=s}var a=e.length,c=e.charAt(0),h=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var n=(e.length-t)*h+1>>>0,o=new Uint8Array(n);e[t];){var u=i[e.charCodeAt(t)];if(255===u)return;for(var d=0,l=n-1;(0!==u||d<s)&&-1!==l;l--,d++)u+=a*o[l]>>>0,o[l]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");s=d,t++}if(" "!==e[t]){for(var f=n-s;f!==n&&0===o[f];)f++;for(var p=new Uint8Array(r+(n-f)),g=r;f!==n;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var i=0,r=0,s=0,n=t.length;s!==n&&0===t[s];)s++,i++;for(var o=(n-s)*u+1>>>0,h=new Uint8Array(o);s!==n;){for(var d=t[s],l=0,f=o-1;(0!==d||l<r)&&-1!==f;f--,l++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw Error("Non-zero carry");r=l,s++}for(var p=o-r;p!==o&&0===h[p];)p++;for(var g=c.repeat(i);p<o;++p)g+=e.charAt(h[p]);return g},decodeUnsafe:d,decode:function(e){var i=d(e);if(i)return i;throw Error("Non-".concat(t," character"))}}};new Uint8Array(0);let m=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let i=0;i<e.byteLength;i++)if(e[i]!==t[i])return!1;return!0},v=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},w=e=>new TextEncoder().encode(e),_=e=>new TextDecoder().decode(e);class D{encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}}class E{decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return I(this,e)}constructor(e,t,i){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}}class S{or(e){return I(this,e)}decode(e){let t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}constructor(e){this.decoders=e}}let I=(e,t)=>new S({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class M{encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}constructor(e,t,i,r){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=r,this.encoder=new D(e,t,i),this.decoder=new E(e,t,r)}}let A=e=>{let{name:t,prefix:i,encode:r,decode:s}=e;return new M(t,i,r,s)},x=e=>{let{prefix:t,name:i,alphabet:r}=e,{encode:s,decode:n}=y(r,i);return A({prefix:t,name:i,encode:s,decode:e=>v(n(e))})},C=(e,t,i,r)=>{let s={};for(let e=0;e<t.length;++e)s[t[e]]=e;let n=e.length;for(;"="===e[n-1];)--n;let o=new Uint8Array(n*i/8|0),a=0,c=0,h=0;for(let t=0;t<n;++t){let n=s[e[t]];if(void 0===n)throw SyntaxError("Non-".concat(r," character"));c=c<<i|n,(a+=i)>=8&&(a-=8,o[h++]=255&c>>a)}if(a>=i||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},R=(e,t,i)=>{let r="="===t[t.length-1],s=(1<<i)-1,n="",o=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],o+=8;o>i;)o-=i,n+=t[s&a>>o];if(o&&(n+=t[s&a<<i-o]),r)for(;n.length*i&7;)n+="=";return n},O=e=>{let{name:t,prefix:i,bitsPerChar:r,alphabet:s}=e;return A({prefix:i,name:t,encode:e=>R(e,s,r),decode:e=>C(e,s,r,t)})},P=A({prefix:"\x00",name:"identity",encode:e=>_(e),decode:e=>w(e)}),T=O({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),N=O({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),k=x({prefix:"9",name:"base10",alphabet:"0123456789"}),L=O({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),q=O({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),z=O({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),j=O({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),U=O({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),F=O({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),B=O({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),K=O({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),V=O({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),H=O({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),J=O({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),W=x({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Y=x({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),G=x({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Q=x({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),X=O({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Z=O({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$=O({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ee=O({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),et=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),ei=et.reduce((e,t,i)=>(e[i]=t,e),[]),er=et.reduce((e,t,i)=>(e[t.codePointAt(0)]=i,e),[]),es=A({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=ei[t],"")},decode:function(e){let t=[];for(let i of e){let e=er[i.codePointAt(0)];if(void 0===e)throw Error("Non-base256emoji character: ".concat(i));t.push(e)}return new Uint8Array(t)}});var en={encode:function e(t,i,r){i=i||[];for(var s=r=r||0;t>=2147483648;)i[r++]=255&t|128,t/=128;for(;-128&t;)i[r++]=255&t|128,t>>>=7;return i[r]=0|t,e.bytes=r-s+1,i},decode:function e(t,i){var r,s=0,i=i||0,n=0,o=i,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");r=t[o++],s+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),n+=7}while(r>=128);return e.bytes=o-i,s},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let eo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[en.decode(e,t),en.decode.bytes]},ea=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return en.encode(e,t,i),t},ec=e=>en.encodingLength(e),eh=(e,t)=>{let i=t.byteLength,r=ec(e),s=r+ec(i),n=new Uint8Array(s+i);return ea(e,n,0),ea(i,n,r),n.set(t,s),new el(e,i,t,n)},eu=e=>{let t=v(e),[i,r]=eo(t),[s,n]=eo(t.subarray(r)),o=t.subarray(r+n);if(o.byteLength!==s)throw Error("Incorrect length");return new el(i,s,o,t)},ed=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&m(e.bytes,t.bytes);class el{constructor(e,t,i,r){this.code=e,this.size=t,this.digest=i,this.bytes=r}}let ef=e=>{let{name:t,code:i,encode:r}=e;return new ep(t,i,r)};class ep{digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?eh(this.code,t):t.then(e=>eh(this.code,e))}throw Error("Unknown type, must be binary type")}constructor(e,t,i){this.name=e,this.code=t,this.encode=i}}let eg=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),eb=ef({name:"sha2-256",code:18,encode:eg("SHA-256")}),ey=ef({name:"sha2-512",code:19,encode:eg("SHA-512")}),em={code:0,name:"identity",encode:v,digest:e=>eh(0,v(e))},ev="raw",ew=85,e_=e=>v(e),eD=e=>v(e),eE=new TextEncoder,eS=new TextDecoder,eI="json",eM=512,eA=e=>eE.encode(JSON.stringify(e)),ex=e=>JSON.parse(eS.decode(e));class eC{toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==eT)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==eN)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return eC.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,i=eh(e,t);return eC.createV1(this.code,i)}case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ed(this.multihash,e.multihash)}toString(e){let{bytes:t,version:i,_baseCache:r}=this;return 0===i?eO(t,r,e||G.encoder):eP(t,r,e||z.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return ej(/^0\.0/,eU),!!(e&&(e[eL]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof eC)return e;if(null!=e&&e.asCID===e){let{version:t,code:i,multihash:r,bytes:s}=e;return new eC(t,i,r,s||ek(t,i,r.bytes))}if(null==e||!0!==e[eL])return null;{let{version:t,multihash:i,code:r}=e,s=eu(i);return eC.create(t,r,s)}}static create(e,t,i){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===eT)return new eC(e,t,i,i.bytes);throw Error("Version 0 CID must use dag-pb (code: ".concat(eT,") block encoding"));case 1:{let r=ek(e,t,i.bytes);return new eC(e,t,i,r)}default:throw Error("Invalid version")}}static createV0(e){return eC.create(0,eT,e)}static createV1(e,t){return eC.create(1,e,t)}static decode(e){let[t,i]=eC.decodeFirst(e);if(i.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=eC.inspectBytes(e),i=t.size-t.multihashSize,r=v(e.subarray(i,i+t.multihashSize));if(r.byteLength!==t.multihashSize)throw Error("Incorrect length");let s=r.subarray(t.multihashSize-t.digestSize),n=new el(t.multihashCode,t.digestSize,s,r);return[0===t.version?eC.createV0(n):eC.createV1(t.codec,n),e.subarray(t.size)]}static inspectBytes(e){let t=0,i=()=>{let[i,r]=eo(e.subarray(t));return t+=r,i},r=i(),s=eT;if(18===r?(r=0,t=0):1===r&&(s=i()),0!==r&&1!==r)throw RangeError("Invalid CID version ".concat(r));let n=t,o=i(),a=i(),c=t+a;return{version:r,codec:s,multihashCode:o,digestSize:a,multihashSize:c-n,size:c}}static parse(e,t){let[i,r]=eR(e,t),s=eC.decode(r);return s._baseCache.set(i,e),s}constructor(e,t,i,r){this.code=t,this.version=e,this.multihash=i,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ez,byteLength:ez,code:eq,version:eq,multihash:eq,bytes:eq,_baseCache:ez,asCID:ez})}}let eR=(e,t)=>{switch(e[0]){case"Q":return[G.prefix,(t||G).decode("".concat(G.prefix).concat(e))];case G.prefix:return[G.prefix,(t||G).decode(e)];case z.prefix:return[z.prefix,(t||z).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},eO=(e,t,i)=>{let{prefix:r}=i;if(r!==G.prefix)throw Error("Cannot string encode V0 in ".concat(i.name," encoding"));let s=t.get(r);if(null!=s)return s;{let s=i.encode(e).slice(1);return t.set(r,s),s}},eP=(e,t,i)=>{let{prefix:r}=i,s=t.get(r);if(null!=s)return s;{let s=i.encode(e);return t.set(r,s),s}},eT=112,eN=18,ek=(e,t,i)=>{let r=ec(e),s=r+ec(t),n=new Uint8Array(s+i.byteLength);return ea(e,n,0),ea(t,n,r),n.set(i,s),n},eL=Symbol.for("@ipld/js-cid/CID"),eq={writable:!1,configurable:!1,enumerable:!0},ez={writable:!1,enumerable:!1,configurable:!1},ej=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},eU="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",eF={...r,...s,...n,...o,...a,...c,...h,...u,...d,...l};({...f,...p});var eB=i(52034);function eK(e,t,i,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:i},decoder:{decode:r}}}let eV=eK("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),eH=eK("ascii","a",e=>{let t="a";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e=>{e=e.substring(1);let t=(0,eB.E)(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t});var eJ={utf8:eV,"utf-8":eV,hex:eF.base16,latin1:eH,ascii:eH,binary:eH,...eF}},5363:function(e){"use strict";e.exports={i8:"6.6.1"}}}]);