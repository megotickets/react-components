"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[830],{70830:function(e,a,t){t.d(a,{offchainLookup:function(){return k},offchainLookupSignature:function(){return m}});var n=t(45095),s=t(80453),r=t(45054),o=t(81559);class c extends r.G{constructor({callbackSelector:e,cause:a,data:t,extraData:n,sender:s,urls:r}){var c;super(a.shortMessage||"An error occurred while fetching for an offchain result.",{cause:a,metaMessages:[...a.metaMessages||[],(null===(c=a.metaMessages)||void 0===c?void 0:c.length)?"":[],"Offchain Gateway Call:",r&&["  Gateway URL(s):",...r.map(e=>"    ".concat((0,o.G)(e)))],"  Sender: ".concat(s),"  Data: ".concat(t),"  Callback selector: ".concat(e),"  Extra data: ".concat(n)].flat(),name:"OffchainLookupError"})}}class i extends r.G{constructor({result:e,url:a}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:["Gateway URL: ".concat((0,o.G)(a)),"Response: ".concat((0,s.P)(e))],name:"OffchainLookupResponseMalformedError"})}}class u extends r.G{constructor({sender:e,to:a}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:["Contract address: ".concat(a),"OffchainLookup sender address: ".concat(e)],name:"OffchainLookupSenderMismatchError"})}}var d=t(27868),l=t(98443),f=t(6981),p=t(757),h=t(19763),y=t(93145),w=t(35567);let m="0x556f1830",g={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function k(e,a){let{blockNumber:t,blockTag:s,data:r,to:o}=a,{args:i}=(0,l.p)({data:r,abi:[g]}),[d,y,m,k,b]=i,{ccipRead:G}=e,O=G&&"function"==typeof(null==G?void 0:G.request)?G.request:v;try{if(!(0,p.E)(o,d))throw new u({sender:d,to:o});let a=y.includes(w.M)?await (0,w.w)({data:m,ccipRequest:O}):await O({data:m,sender:d,urls:y}),{data:r}=await (0,n.R)(e,{blockNumber:t,blockTag:s,data:(0,h.zo)([k,(0,f.E)([{type:"bytes"},{type:"bytes"}],[a,b])]),to:o});return r}catch(e){throw new c({callbackSelector:k,cause:e,data:r,extraData:b,sender:d,urls:y})}}async function v(e){let{data:a,sender:t,urls:n}=e,r=Error("An unknown error occurred.");for(let e=0;e<n.length;e++){let c=n[e],u=c.includes("{data}")?"GET":"POST",l="POST"===u?{data:a,sender:t}:void 0,f="POST"===u?{"Content-Type":"application/json"}:{};try{var o;let e;let n=await fetch(c.replace("{sender}",t.toLowerCase()).replace("{data}",a),{body:JSON.stringify(l),headers:f,method:u});if(e=(null===(o=n.headers.get("Content-Type"))||void 0===o?void 0:o.startsWith("application/json"))?(await n.json()).data:await n.text(),!n.ok){r=new d.Gg({body:l,details:(null==e?void 0:e.error)?(0,s.P)(e.error):n.statusText,headers:n.headers,status:n.status,url:c});continue}if(!(0,y.v)(e)){r=new i({result:e,url:c});continue}return e}catch(e){r=new d.Gg({body:l,details:e.message,url:c})}}throw r}}}]);